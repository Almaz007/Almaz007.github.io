import{r as _,j as c,c as V,G as Me,R as j,a as $e}from"./index-5v0WUSE6.js";import{a as M,c as he,d as ge,e as Ve,E as Re,P as L,f as ye,h as Pe,j as We,H as Fe,k as qt,N as Ae,l as ze,m as qe,o as Ke,n as Ue,p as Xe,q as Ge,r as Ye,t as Ze,F as Qe,s as Je,v as tn,u as me,b as en,w as Ot}from"./store2-B2nLEZdA.js";import{s as rt}from"./shallow-BbWNg5yE.js";import{B as W}from"./Button-DkAy4TqJ.js";import{i as ve,a as nn,u as be}from"./store-CHJ044RD.js";import{u as an}from"./store-CzlH7EyP.js";import{u as Gt}from"./store-DWPSX4g-.js";import{u as on}from"./store-CXWocZK6.js";import{v as Tt,g as xe}from"./helpers-fab74NUc.js";import{u as Ft}from"./store-DMyAk-zp.js";import{u as Yt}from"./store-D1k0Q38A.js";import{I as it}from"./Input-C2xJGQu9.js";import{C as sn}from"./CustomSelect-Cj4OeTpF.js";const rn="_popup_cjxb8_1",ln="_left_cjxb8_61",un="_center_cjxb8_67",cn="_right_cjxb8_75",dn="_visible_cjxb8_81",pn="_popup__label_cjxb8_91",dt={popup:rn,"popup-content":"_popup-content_cjxb8_11",left:ln,center:un,right:cn,visible:dn,popup__label:pn},fn=({text:t,children:e,position:a})=>{const[i,n]=_.useState(!1),o=_.useRef(null);_.useEffect(()=>{const r=l=>{o.current&&l.target instanceof Node&&!o.current.contains(l.target)&&n(!1)};return document.addEventListener("click",r),()=>{document.removeEventListener("click",r)}},[]);const s=r=>{r.stopPropagation(),n(l=>!l)};return c.jsxs("div",{className:dt.popup,ref:o,children:[c.jsx(W,{text:t,type:"button",onClick:s}),c.jsxs("div",{className:V(dt["popup-content"],dt[a],{[dt.visible]:i}),children:[c.jsx("div",{className:dt.popup__label,children:t}),c.jsx("div",{children:e})]})]})};function hn(t){return Me({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 294.1L383 167c9.4-9.4 24.6-9.4 33.9 0s9.3 24.6 0 34L273 345c-9.1 9.1-23.7 9.3-33.1.7L95 201.1c-4.7-4.7-7-10.9-7-17s2.3-12.3 7-17c9.4-9.4 24.6-9.4 33.9 0l127.1 127z"},child:[]}]})(t)}const gn="_container_1y4rw_1",yn="_header_1y4rw_19",mn="_title_1y4rw_51",vn="_arrow_1y4rw_63",bn="_rotated_1y4rw_73",xn="_content_1y4rw_81",En="_innerContent_1y4rw_91",K={container:gn,header:yn,title:mn,arrow:vn,rotated:bn,content:xn,innerContent:En},U=({name:t,children:e,defaultOpen:a=!1})=>{const[i,n]=_.useState(a),[o,s]=_.useState(0),r=_.useRef(null);_.useEffect(()=>{r.current&&s(r.current.scrollHeight)},[e]);const l=()=>{n(u=>!u)};return c.jsxs("div",{className:K.container,children:[c.jsxs("button",{className:K.header,onClick:l,"aria-expanded":i,children:[c.jsx("span",{className:K.title,children:t}),c.jsx(hn,{className:V(K.arrow,{[K.rotated]:i})})]}),c.jsx("div",{ref:r,className:K.content,style:{height:i?`${o}px`:"0px"},"aria-hidden":!i,children:c.jsx("div",{className:K.innerContent,children:e})})]})},Eo={"graph-editor":"_graph-editor_3h800_1"},_o=t=>({nodes:t.nodes,edges:t.edges,onNodesChange:t.onNodesChange,onEdgesChange:t.onEdgesChange,addEdge:t.addEdge}),_n={discreteInput:{outputHandles:{out:{dataType:"bool"}},inputHandles:{},type:"discreteInput",name:""},discreteOutput:{inputHandles:{input:{dataType:"bool"}},outputHandles:{},type:"discreteOutput",name:""},analogInput:{outputHandles:{out:{dataType:"analog"}},inputHandles:{},type:"analogInput"},analogInputInt:{outputHandles:{out:{dataType:"int"}},inputHandles:{},type:"analogInputInt"},analogOutput:{inputHandles:{input:{dataType:"float"}},outputHandles:{},type:"analogOutput",name:""},xor:{inputHandles:{"input-1":{dataType:"bool"},"input-2":{dataType:"bool"}},outputHandles:{out:{dataType:"bool"}},type:"xor"},and:{inputHandles:{"input-1":{dataType:"bool"},"input-2":{dataType:"bool"}},outputHandles:{out:{dataType:"bool"}},type:"and"},or:{inputHandles:{"input-1":{dataType:"bool"},"input-2":{dataType:"bool"},"input-3":{dataType:"bool"}},outputHandles:{out:{dataType:"bool"}},type:"or"},nand:{inputHandles:{"input-1":{dataType:"bool"},"input-2":{dataType:"bool"},"input-3":{dataType:"bool"}},outputHandles:{out:{dataType:"bool"}},type:"nand"},nor:{inputHandles:{"input-1":{dataType:"bool"},"input-2":{dataType:"bool"},"input-3":{dataType:"bool"}},outputHandles:{out:{dataType:"bool"}},type:"nor"},notOperation:{inputHandles:{"input-1":{dataType:"bool"}},outputHandles:{out:{dataType:"bool"}},type:"notOperation"},sumInt:{inputHandles:{"input-1":{dataType:"int"},"input-2":{dataType:"int"}},outputHandles:{out:{dataType:"int"}},type:"sumInt"},multInt:{inputHandles:{"input-1":{dataType:"int"},"input-2":{dataType:"int"}},outputHandles:{out:{dataType:"int"}},type:"multInt"},divInt:{inputHandles:{"input-1":{dataType:"int"},"input-2":{dataType:"int"}},outputHandles:{out:{dataType:"int"}},type:"divInt"},subInt:{inputHandles:{"input-1":{dataType:"int"},"input-2":{dataType:"int"}},outputHandles:{out:{dataType:"int"}},type:"subInt"},equalsInt:{inputHandles:{"input-1":{dataType:"int"},"input-2":{dataType:"int"}},outputHandles:{out:{dataType:"bool"}},type:"equalsInt"},lessInt:{inputHandles:{"input-1":{dataType:"int"},"input-2":{dataType:"int"}},outputHandles:{out:{dataType:"bool"}},type:"lessInt"},moreInt:{inputHandles:{"input-1":{dataType:"int"},"input-2":{dataType:"int"}},outputHandles:{out:{dataType:"bool"}},type:"moreInt"},timerInt:{inputHandles:{},outputHandles:{out:{dataType:"int"}},setpointDataType:"int",setpointValue:0,type:"timerInt",name:""},risEdgeTimerBool:{inputHandles:{"input-1":{dataType:"bool"}},outputHandles:{out:{dataType:"bool"}},type:"risEdgeTimerBool",digit:0,name:""},constInt:{inputHandles:{},outputHandles:{out:{dataType:"int"}},setpointDataType:"int",setpointValue:0,type:"constInt",name:""},constBoolean:{inputHandles:{},outputHandles:{out:{dataType:"bool"}},setpointDataType:"int",setpointValue:0,type:"constBoolean",name:""},fourierInt:{inputHandles:{"input-1":{dataType:"analog"}},outputHandles:{"out-1":{dataType:"int"},"out-2":{dataType:"int"}},type:"fourierInt",setpointDataType:"int",setpointValue:[0,0,0,0]},fifoByte:{type:"fifoByte",lengthMemory:1,inputHandles:{"input-1":{dataType:"bool"},"input-2":{dataType:"bool"}},outputHandles:{"out-1":{dataType:"bool"}}},fifoWord:{type:"fifoWord",lengthMemory:1,inputHandles:{"input-1":{dataType:"int"},"input-2":{dataType:"bool"}},outputHandles:{"out-1":{dataType:"int"}}},fifoByteWithoutEn:{type:"fifoByteWithoutEn",lengthMemory:1,inputHandles:{"input-1":{dataType:"bool"}},outputHandles:{"out-1":{dataType:"bool"}}},fifoWordWithoutEn:{type:"fifoWordWithoutEn",lengthMemory:1,inputHandles:{"input-1":{dataType:"int"}},outputHandles:{"out-1":{dataType:"int"}}},dtrigger:{inputHandles:{},outputHandles:{out:{dataType:"bool"}},type:"dtrigger"}},J={discreteInput:{0:{instruction:[34,12,131,199,5,0,35,0,245,0,130,128],lengthInBytes:12,in_type:33}},discreteOutput:{1:{instruction:[34,12,131,199,5,0,35,0,245,0,130,128],lengthInBytes:12,in_type:30}},analogInput:{0:{instruction:[34,12,131,199,5,0,35,0,245,0,130,128],lengthInBytes:12,in_type:33}},analogInputInt:{0:{instruction:[34,12,131,199,5,0,35,0,245,0,130,128],lengthInBytes:12,in_type:34}},analogOutput:{},dtrigger:{},multInt:{2:{instruction:[34,12,156,65,24,66,179,135,231,2,28,193,130,128],lengthInBytes:14,in_type:8}},divInt:{2:{instruction:[34,12,156,65,24,66,179,135,231,2,28,193,130,128],lengthInBytes:14,in_type:45}},subInt:{2:{instruction:[34,12,156,65,24,66,153,143,28,193,130,128],lengthInBytes:12,in_type:8}},sumInt:{2:{instruction:[34,12,156,65,24,66,186,151,28,193,130,128],lengthInBytes:12,in_type:8},3:{instruction:[130,128,24,66,156,65,186,151,152,66,186,151,28,193,130,128],lengthInBytes:16,in_type:9},4:{instruction:[130,128,156,65,16,66,148,66,24,67,178,151,182,151,186,151,28,193,130,128],lengthInBytes:20,in_type:10},5:{instruction:[130,128,140,65,16,66,148,66,24,67,156,67,178,149,182,149,186,149,190,149,12,193,130,128],lengthInBytes:24,in_type:11},6:{instruction:[130,128,140,65,16,66,148,66,24,67,156,67,178,149,182,149,186,149,190,149,131,39,8,0,190,149,12,193,130,128],lengthInBytes:30,in_type:12},7:{instruction:[130,128,140,65,16,66,148,66,24,67,156,67,178,149,182,149,186,149,190,149,131,39,8,0,190,149,131,167,8,0,190,149,12,193,130,128],lengthInBytes:36,in_type:13}},notOperation:{1:{instruction:[34,12,131,199,5,0,147,199,23,0,35,0,245,0,130,128],lengthInBytes:16,in_type:1}},and:{2:{instruction:[34,12,131,199,5,0,3,71,6,0,249,143,35,0,245,0,130,128],lengthInBytes:18,in_type:2},3:{instruction:[130,128,3,199,6,0,131,71,6,0,249,143,3,199,5,0,249,143,35,0,245,0,130,128],lengthInBytes:24,in_type:3},4:{instruction:[130,128,3,71,7,0,131,199,6,0,249,143,3,71,6,0,249,143,3,199,5,0,249,143,35,0,245,0,130,128],lengthInBytes:30,in_type:4},5:{instruction:[130,128,131,199,7,0,3,71,7,0,125,143,131,199,6,0,125,143,131,71,6,0,125,143,131,199,5,0,125,143,35,0,229,0,130,128],lengthInBytes:36,in_type:5},6:{instruction:[130,128,131,199,7,0,3,72,8,0,3,71,7,0,179,247,7,1,249,143,3,199,6,0,249,143,3,71,6,0,249,143,3,199,5,0,249,143,35,0,245,0,130,128],lengthInBytes:44,in_type:6},7:{instruction:[130,128,3,72,8,0,131,200,8,0,131,199,7,0,51,120,24,1,51,120,248,0,131,71,7,0,51,120,248,0,131,199,6,0,51,120,248,0,131,71,6,0,51,120,248,0,131,199,5,0,51,120,248,0,35,0,5,1,130,128],lengthInBytes:60,in_type:7}},nand:{2:{instruction:[34,12,131,199,5,0,3,71,6,0,249,143,147,199,23,0,35,0,245,0,130,128],lengthInBytes:22,in_type:2},3:{instruction:[130,128,3,199,6,0,131,71,6,0,249,143,3,199,5,0,249,143,147,199,23,0,35,0,245,0,130,128],lengthInBytes:28,in_type:3},4:{instruction:[130,128,3,71,7,0,131,199,6,0,249,143,3,71,6,0,249,143,3,199,5,0,249,143,147,199,23,0,35,0,245,0,130,128],lengthInBytes:34,in_type:4},5:{instruction:[130,128,131,199,7,0,3,71,7,0,125,143,131,199,6,0,125,143,131,71,6,0,125,143,131,199,5,0,125,143,19,71,23,0,35,0,229,0,130,128],lengthInBytes:40,in_type:5},6:{instruction:[130,128,131,199,7,0,3,72,8,0,3,71,7,0,179,247,7,1,249,143,3,199,6,0,249,143,3,71,6,0,249,143,3,199,5,0,249,143,147,199,23,0,35,0,245,0,130,128],lengthInBytes:48,in_type:6},7:{instruction:[130,128,3,72,8,0,131,200,8,0,131,199,7,0,51,120,24,1,51,120,248,0,131,71,7,0,51,120,248,0,131,199,6,0,51,120,248,0,131,71,6,0,51,120,248,0,131,199,5,0,51,120,248,0,19,72,24,0,35,0,5,1,130,128],lengthInBytes:64,in_type:7}},nor:{2:{instruction:[34,12,131,199,5,0,3,71,6,0,249,143,147,199,23,0,35,0,245,0,130,128],lengthInBytes:22,in_type:2},3:{instruction:[130,128,3,199,6,0,131,71,6,0,249,143,3,199,5,0,249,143,147,199,23,0,35,0,245,0,130,128],lengthInBytes:28,in_type:3},4:{instruction:[130,128,3,71,7,0,131,199,6,0,249,143,3,71,6,0,249,143,3,199,5,0,249,143,147,199,23,0,35,0,245,0,130,128],lengthInBytes:34,in_type:4},5:{instruction:[130,128,131,199,7,0,3,71,7,0,125,143,131,199,6,0,125,143,131,71,6,0,125,143,131,199,5,0,125,143,19,71,23,0,35,0,229,0,130,128],lengthInBytes:40,in_type:5},6:{instruction:[130,128,131,199,7,0,3,72,8,0,3,71,7,0,179,247,7,1,249,143,3,199,6,0,249,143,3,71,6,0,249,143,3,199,5,0,249,143,147,199,23,0,35,0,245,0,130,128],lengthInBytes:48,in_type:6},7:{instruction:[130,128,3,72,8,0,131,200,8,0,131,199,7,0,51,120,24,1,51,120,248,0,131,71,7,0,51,120,248,0,131,199,6,0,51,120,248,0,131,71,6,0,51,120,248,0,131,199,5,0,51,120,248,0,19,72,24,0,35,0,5,1,130,128],lengthInBytes:64,in_type:7}},or:{2:{instruction:[34,12,131,199,5,0,3,71,6,0,217,143,35,0,245,0,130,128],lengthInBytes:18,in_type:2},3:{instruction:[130,128,3,199,6,0,131,71,6,0,217,143,3,199,5,0,217,143,35,0,245,0,130,128],lengthInBytes:24,in_type:3},4:{instruction:[130,128,3,71,7,0,131,199,6,0,217,143,3,71,6,0,217,143,3,199,5,0,217,143,35,0,245,0,130,128],lengthInBytes:30,in_type:4},5:{instruction:[130,128,131,199,7,0,3,71,7,0,93,143,131,199,6,0,93,143,131,71,6,0,93,143,131,199,5,0,93,143,35,0,229,0,130,128],lengthInBytes:36,in_type:5},6:{instruction:[130,128,131,199,7,0,3,72,8,0,3,71,7,0,179,231,7,1,217,143,3,199,6,0,217,143,3,71,6,0,217,143,3,199,5,0,217,143,35,0,245,0,130,128],lengthInBytes:44,in_type:6},7:{instruction:[130,128,3,72,8,0,131,200,8,0,131,199,7,0,51,104,24,1,51,104,248,0,131,71,7,0,51,104,248,0,131,199,6,0,51,104,248,0,131,71,6,0,51,104,248,0,131,199,5,0,51,104,248,0,35,0,5,1,130,128],lengthInBytes:60,in_type:7}},xor:{2:{instruction:[34,12,131,199,5,0,3,71,6,0,185,143,35,0,245,0,130,128],lengthInBytes:18,in_type:2},3:{instruction:[130,128,3,199,6,0,131,71,6,0,185,143,3,199,5,0,185,143,35,0,245,0,130,128],lengthInBytes:24,in_type:3},4:{instruction:[130,128,3,71,7,0,131,199,6,0,185,143,3,71,6,0,185,143,3,199,5,0,185,143,35,0,245,0,130,128],lengthInBytes:30,in_type:4},5:{instruction:[130,128,131,199,7,0,3,71,7,0,61,143,131,199,6,0,61,143,131,71,6,0,61,143,131,199,5,0,61,143,35,0,229,0,130,128],lengthInBytes:36,in_type:5},6:{instruction:[130,128,131,199,7,0,3,72,8,0,3,71,7,0,179,199,7,1,185,143,3,199,6,0,185,143,3,71,6,0,185,143,3,199,5,0,185,143,35,0,245,0,130,128],lengthInBytes:44,in_type:6},7:{instruction:[130,128,3,72,8,0,131,200,8,0,131,199,7,0,51,72,24,1,51,72,248,0,131,71,7,0,51,72,248,0,131,199,6,0,51,72,248,0,131,71,6,0,51,72,248,0,131,199,5,0,51,72,248,0,35,0,5,1,130,128],lengthInBytes:60,in_type:7}},equalsInt:{2:{instruction:[34,12,152,65,28,66,35,0,5,0,99,21,247,0,133,71,35,0,245,0,130,128],lengthInBytes:22,in_type:26}},equalsFloat:{},moreInt:{2:{instruction:[34,12,152,65,28,66,35,0,5,0,99,213,231,0,133,71,35,0,245,0,130,128],lengthInBytes:22,in_type:26}},moreFloat:{},lessInt:{2:{instruction:[34,12,152,65,28,66,35,0,5,0,99,85,247,0,133,71,35,0,245,0,130,128],lengthInBytes:22,in_type:26}},lessFloat:{},constInt:{0:{instruction:[34,12,156,65,28,193,130,128],lengthInBytes:8,in_type:28}},constBoolean:{0:{instruction:[34,12,131,199,5,0,35,0,245,0,130,128],lengthInBytes:8,in_type:29}},timerInt:{0:{instruction:[34,12,28,65,133,7,28,193,152,65,99,84,247,0,35,32,5,0,130,128],lengthInBytes:20,in_type:27}},risEdgeTimerBool:{1:{instruction:[34,12,28,65,133,7,28,193,152,65,99,84,247,0,35,32,5,0,130,128],lengthInBytes:20,in_type:46}},fourierInt:{1:{instruction:[],lengthInBytes:0,in_type:36},2:{instruction:[],lengthInBytes:0,in_type:37},3:{instruction:[],lengthInBytes:0,in_type:38}},fifoByte:{2:{instruction:[3,71,7,0,13,195,152,67,99,100,183,0,35,160,7,0,131,198,6,0,152,67,42,151,35,0,215,0,152,67,5,7,99,122,183,0,152,195,156,67,62,149,131,71,5,0,35,0,246,0,130,128,35,160,7,0,253,183,130,128],lengthInBytes:60,in_type:41}},fifoWord:{2:{instruction:[3,71,7,0,5,195,152,67,99,100,183,0,35,160,7,0,148,66,152,67,51,71,167,32,20,195,152,67,5,7,99,121,183,0,152,195,156,67,51,197,167,32,28,65,28,194,130,128,35,160,7,0,197,191,130,128],lengthInBytes:56,in_type:42}},fifoByteWithoutEn:{1:{instruction:[28,67,99,228,183,0,35,32,7,0,148,66,28,67,179,199,167,32,148,195,20,67,147,135,22,0,179,181,183,0,179,5,176,64,237,143,28,195,179,199,167,32,156,67,28,194,130,128],lengthInBytes:48,in_type:43}},fifoWordWithoutEn:{1:{instruction:[28,67,99,228,183,0,35,32,7,0,131,198,6,0,28,67,170,151,35,128,215,0,28,67,133,7,179,181,183,0,179,5,176,64,237,143,28,195,62,149,131,71,5,0,35,0,246,0,130,128],lengthInBytes:50,in_type:44}}},lt={bool:{clr:"#00ff00",selectedClr:"#08d508"},int:{clr:"#368ff4",selectedClr:"#2b79d2"},float:{clr:"#ffe417",selectedClr:"#ead219"},analog:{clr:"#cd1fe8",selectedClr:"#ab2cbe"}},kn={bool:void 0,analog:void 0,int:"circle",float:"arrow-closed"},Ht={"button-edge__label":"_button-edge__label_t1jz9_1","button-txt":"_button-txt_t1jz9_55",delete:"_delete_t1jz9_81"},In=({id:t,source:e,sourceHandleId:a,sourceX:i,sourceY:n,targetX:o,targetY:s,selected:r,sourcePosition:l=L.Right,targetPosition:u=L.Left})=>{var p,C,T,D;const{getEdge:d,setEdges:g}=M(),y=he(S=>S.nodeLookup.get(e),rt),k=d(t);if(!y||!k||!a)return null;const v=a.split(" ")[1],f=y.data.outputHandles[v];if(!f)return null;const{dataType:m}=f,[h,x,E]=ge({sourceX:i,sourceY:n,targetX:o,targetY:s,sourcePosition:l,targetPosition:u,borderRadius:8,offset:17}),b=r?(p=lt[m])==null?void 0:p.selectedClr:(C=lt[m])==null?void 0:C.clr,I=kn[m],w=()=>{g(S=>S.filter(H=>H.id!==k.id))};return c.jsxs(c.Fragment,{children:[c.jsxs("defs",{children:[c.jsx("marker",{id:"circle",viewBox:"0 0 10 10",refX:9,refY:5,markerWidth:7,markerHeight:7,orient:"auto-start-reverse",children:c.jsx("circle",{cx:"6",cy:"5",r:"3",fill:(T=lt.int)==null?void 0:T.clr})}),c.jsx("marker",{id:"arrow-closed",viewBox:"0 0 10 10",refX:10,refY:5,markerWidth:8,markerHeight:8,orient:"auto-start-reverse",children:c.jsx("path",{d:"M 0 0 L 10 5 L 0 10 Z",fill:(D=lt.float)==null?void 0:D.clr})})]}),c.jsx(Ve,{id:t,path:h,style:{stroke:b,strokeWidth:3},markerEnd:I?`url(#${I})`:void 0}),r&&c.jsx(Re,{children:c.jsx("div",{className:V(Ht["button-edge__label"],"nodrag","nopan"),style:{transform:`translate(-50%, -140%) translate(${x}px,${E}px)`},children:c.jsx("button",{className:V(Ht["button-txt"],Ht.delete),onClick:w,children:"Удалить"})})})]})};function Ee(t){var e,a,i="";if(typeof t=="string"||typeof t=="number")i+=t;else if(typeof t=="object")if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(a=Ee(t[e]))&&(i&&(i+=" "),i+=a);else for(e in t)t[e]&&(i&&(i+=" "),i+=e);return i}function et(){for(var t,e,a=0,i="";a<arguments.length;)(t=arguments[a++])&&(e=Ee(t))&&(i&&(i+=" "),i+=e);return i}let wn={data:""},Cn=t=>typeof window=="object"?((t?t.querySelector("#_goober"):window._goober)||Object.assign((t||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:t||wn,Tn=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,Sn=/\/\*[^]*?\*\/|  +/g,Zt=/\n+/g,Q=(t,e)=>{let a="",i="",n="";for(let o in t){let s=t[o];o[0]=="@"?o[1]=="i"?a=o+" "+s+";":i+=o[1]=="f"?Q(s,o):o+"{"+Q(s,o[1]=="k"?"":e)+"}":typeof s=="object"?i+=Q(s,e?e.replace(/([^,])+/g,r=>o.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,l=>/&/.test(l)?l.replace(/&/g,r):r?r+" "+l:l)):o):s!=null&&(o=/^--/.test(o)?o:o.replace(/[A-Z]/g,"-$&").toLowerCase(),n+=Q.p?Q.p(o,s):o+":"+s+";")}return a+(e&&n?e+"{"+n+"}":n)+i},R={},_e=t=>{if(typeof t=="object"){let e="";for(let a in t)e+=a+_e(t[a]);return e}return t},Nn=(t,e,a,i,n)=>{let o=_e(t),s=R[o]||(R[o]=(l=>{let u=0,d=11;for(;u<l.length;)d=101*d+l.charCodeAt(u++)>>>0;return"go"+d})(o));if(!R[s]){let l=o!==t?t:(u=>{let d,g,y=[{}];for(;d=Tn.exec(u.replace(Sn,""));)d[4]?y.shift():d[3]?(g=d[3].replace(Zt," ").trim(),y.unshift(y[0][g]=y[0][g]||{})):y[0][d[1]]=d[2].replace(Zt," ").trim();return y[0]})(t);R[s]=Q(n?{["@keyframes "+s]:l}:l,a?"":"."+s)}let r=a&&R.g?R.g:null;return a&&(R.g=R[s]),((l,u,d,g)=>{g?u.data=u.data.replace(g,l):u.data.indexOf(l)===-1&&(u.data=d?l+u.data:u.data+l)})(R[s],e,i,r),s},jn=(t,e,a)=>t.reduce((i,n,o)=>{let s=e[o];if(s&&s.call){let r=s(a),l=r&&r.props&&r.props.className||/^go/.test(r)&&r;s=l?"."+l:r&&typeof r=="object"?r.props?"":Q(r,""):r===!1?"":r}return i+n+(s??"")},"");function Kt(t){let e=this||{},a=t.call?t(e.p):t;return Nn(a.unshift?a.raw?jn(a,[].slice.call(arguments,1),e.p):a.reduce((i,n)=>Object.assign(i,n&&n.call?n(e.p):n),{}):a,Cn(e.target),e.g,e.o,e.k)}Kt.bind({g:1});Kt.bind({k:1});function On(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function ke(t,e,a){return e&&On(t.prototype,e),t}function N(){return N=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(t[i]=a[i])}return t},N.apply(this,arguments)}function Ie(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function vt(t,e){if(t==null)return{};var a={},i=Object.keys(t),n,o;for(o=0;o<i.length;o++)n=i[o],!(e.indexOf(n)>=0)&&(a[n]=t[n]);return a}function Qt(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var Jt=function(){return""},we=j.createContext({enqueueSnackbar:Jt,closeSnackbar:Jt}),Z={downXs:"@media (max-width:599.95px)",upSm:"@media (min-width:600px)"},te=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},Ut=function(e){return""+te(e.vertical)+te(e.horizontal)},Et=function(e){return!!e||e===0},_t="unmounted",nt="exited",at="entering",pt="entered",ee="exiting",Xt=function(t){Ie(e,t);function e(i){var n;n=t.call(this,i)||this;var o=i.appear,s;return n.appearStatus=null,i.in?o?(s=nt,n.appearStatus=at):s=pt:i.unmountOnExit||i.mountOnEnter?s=_t:s=nt,n.state={status:s},n.nextCallback=null,n}e.getDerivedStateFromProps=function(n,o){var s=n.in;return s&&o.status===_t?{status:nt}:null};var a=e.prototype;return a.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},a.componentDidUpdate=function(n){var o=null;if(n!==this.props){var s=this.state.status;this.props.in?s!==at&&s!==pt&&(o=at):(s===at||s===pt)&&(o=ee)}this.updateStatus(!1,o)},a.componentWillUnmount=function(){this.cancelNextCallback()},a.getTimeouts=function(){var n=this.props.timeout,o=n,s=n;return n!=null&&typeof n!="number"&&typeof n!="string"&&(s=n.exit,o=n.enter),{exit:s,enter:o}},a.updateStatus=function(n,o){n===void 0&&(n=!1),o!==null?(this.cancelNextCallback(),o===at?this.performEnter(n):this.performExit()):this.props.unmountOnExit&&this.state.status===nt&&this.setState({status:_t})},a.performEnter=function(n){var o=this,s=this.props.enter,r=n,l=this.getTimeouts();if(!n&&!s){this.safeSetState({status:pt},function(){o.props.onEntered&&o.props.onEntered(o.node,r)});return}this.props.onEnter&&this.props.onEnter(this.node,r),this.safeSetState({status:at},function(){o.props.onEntering&&o.props.onEntering(o.node,r),o.onTransitionEnd(l.enter,function(){o.safeSetState({status:pt},function(){o.props.onEntered&&o.props.onEntered(o.node,r)})})})},a.performExit=function(){var n=this,o=this.props.exit,s=this.getTimeouts();if(!o){this.safeSetState({status:nt},function(){n.props.onExited&&n.props.onExited(n.node)});return}this.props.onExit&&this.props.onExit(this.node),this.safeSetState({status:ee},function(){n.props.onExiting&&n.props.onExiting(n.node),n.onTransitionEnd(s.exit,function(){n.safeSetState({status:nt},function(){n.props.onExited&&n.props.onExited(n.node)})})})},a.cancelNextCallback=function(){this.nextCallback!==null&&this.nextCallback.cancel&&(this.nextCallback.cancel(),this.nextCallback=null)},a.safeSetState=function(n,o){o=this.setNextCallback(o),this.setState(n,o)},a.setNextCallback=function(n){var o=this,s=!0;return this.nextCallback=function(){s&&(s=!1,o.nextCallback=null,n())},this.nextCallback.cancel=function(){s=!1},this.nextCallback},a.onTransitionEnd=function(n,o){this.setNextCallback(o);var s=n==null&&!this.props.addEndListener;if(!this.node||s){setTimeout(this.nextCallback,0);return}this.props.addEndListener&&this.props.addEndListener(this.node,this.nextCallback),n!=null&&setTimeout(this.nextCallback,n)},a.render=function(){var n=this.state.status;if(n===_t)return null;var o=this.props,s=o.children,r=vt(o,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return s(n,r)},ke(e,[{key:"node",get:function(){var n,o=(n=this.props.nodeRef)===null||n===void 0?void 0:n.current;if(!o)throw new Error("notistack - Custom snackbar is not refForwarding");return o}}]),e}(j.Component);function ot(){}Xt.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:ot,onEntering:ot,onEntered:ot,onExit:ot,onExiting:ot,onExited:ot};function ne(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function At(t,e){return _.useMemo(function(){return t==null&&e==null?null:function(a){ne(t,a),ne(e,a)}},[t,e])}function Nt(t){var e=t.timeout,a=t.style,i=a===void 0?{}:a,n=t.mode;return{duration:typeof e=="object"?e[n]||0:e,easing:i.transitionTimingFunction,delay:i.transitionDelay}}var zt={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},Ce=function(e){e.scrollTop=e.scrollTop},ae=function(e){return Math.round(e)+"ms"};function ut(t,e){t===void 0&&(t=["all"]);var a=e||{},i=a.duration,n=i===void 0?300:i,o=a.easing,s=o===void 0?zt.easeInOut:o,r=a.delay,l=r===void 0?0:r,u=Array.isArray(t)?t:[t];return u.map(function(d){var g=typeof n=="string"?n:ae(n),y=typeof l=="string"?l:ae(l);return d+" "+g+" "+s+" "+y}).join(",")}function Hn(t){return t&&t.ownerDocument||document}function Te(t){var e=Hn(t);return e.defaultView||window}function Dn(t,e){e===void 0&&(e=166);var a;function i(){for(var n=this,o=arguments.length,s=new Array(o),r=0;r<o;r++)s[r]=arguments[r];var l=function(){t.apply(n,s)};clearTimeout(a),a=setTimeout(l,e)}return i.clear=function(){clearTimeout(a)},i}function Bn(t,e){var a=e.getBoundingClientRect(),i=Te(e),n;if(e.fakeTransform)n=e.fakeTransform;else{var o=i.getComputedStyle(e);n=o.getPropertyValue("-webkit-transform")||o.getPropertyValue("transform")}var s=0,r=0;if(n&&n!=="none"&&typeof n=="string"){var l=n.split("(")[1].split(")")[0].split(",");s=parseInt(l[4],10),r=parseInt(l[5],10)}switch(t){case"left":return"translateX("+(i.innerWidth+s-a.left)+"px)";case"right":return"translateX(-"+(a.left+a.width-s)+"px)";case"up":return"translateY("+(i.innerHeight+r-a.top)+"px)";default:return"translateY(-"+(a.top+a.height-r)+"px)"}}function kt(t,e){if(e){var a=Bn(t,e);a&&(e.style.webkitTransform=a,e.style.transform=a)}}var Se=_.forwardRef(function(t,e){var a=t.children,i=t.direction,n=i===void 0?"down":i,o=t.in,s=t.style,r=t.timeout,l=r===void 0?0:r,u=t.onEnter,d=t.onEntered,g=t.onExit,y=t.onExited,k=vt(t,["children","direction","in","style","timeout","onEnter","onEntered","onExit","onExited"]),v=_.useRef(null),f=At(a.ref,v),m=At(f,e),h=function(p,C){kt(n,p),Ce(p),u&&u(p,C)},x=function(p){var C=(s==null?void 0:s.transitionTimingFunction)||zt.easeOut,T=Nt({timeout:l,mode:"enter",style:N({},s,{transitionTimingFunction:C})});p.style.webkitTransition=ut("-webkit-transform",T),p.style.transition=ut("transform",T),p.style.webkitTransform="none",p.style.transform="none"},E=function(p){var C=(s==null?void 0:s.transitionTimingFunction)||zt.sharp,T=Nt({timeout:l,mode:"exit",style:N({},s,{transitionTimingFunction:C})});p.style.webkitTransition=ut("-webkit-transform",T),p.style.transition=ut("transform",T),kt(n,p),g&&g(p)},b=function(p){p.style.webkitTransition="",p.style.transition="",y&&y(p)},I=_.useCallback(function(){v.current&&kt(n,v.current)},[n]);return _.useEffect(function(){if(!(o||n==="down"||n==="right")){var w=Dn(function(){v.current&&kt(n,v.current)}),p=Te(v.current);return p.addEventListener("resize",w),function(){w.clear(),p.removeEventListener("resize",w)}}},[n,o]),_.useEffect(function(){o||I()},[o,I]),_.createElement(Xt,Object.assign({appear:!0,nodeRef:v,onEnter:h,onEntered:d,onEntering:x,onExit:E,onExited:b,in:o,timeout:l},k),function(w,p){return _.cloneElement(a,N({ref:m,style:N({visibility:w==="exited"&&!o?"hidden":void 0},s,{},a.props.style)},p))})});Se.displayName="Slide";var jt=function(e){return j.createElement("svg",Object.assign({viewBox:"0 0 24 24",focusable:"false",style:{fontSize:20,marginInlineEnd:8,userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:"currentColor",flexShrink:0}},e))},Ln=function(){return j.createElement(jt,null,j.createElement("path",{d:`M12 2C6.5 2 2 6.5 2 12S6.5 22 12 22 22 17.5 22 12 17.5 2 12 2M10 17L5 12L6.41
        10.59L10 14.17L17.59 6.58L19 8L10 17Z`}))},Mn=function(){return j.createElement(jt,null,j.createElement("path",{d:"M13,14H11V10H13M13,18H11V16H13M1,21H23L12,2L1,21Z"}))},$n=function(){return j.createElement(jt,null,j.createElement("path",{d:`M12,2C17.53,2 22,6.47 22,12C22,17.53 17.53,22 12,22C6.47,22 2,17.53 2,12C2,
        6.47 6.47,2 12,2M15.59,7L12,10.59L8.41,7L7,8.41L10.59,12L7,15.59L8.41,17L12,
        13.41L15.59,17L17,15.59L13.41,12L17,8.41L15.59,7Z`}))},Vn=function(){return j.createElement(jt,null,j.createElement("path",{d:`M13,9H11V7H13M13,17H11V11H13M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,
        0 22,12A10,10 0 0,0 12,2Z`}))},Rn={default:void 0,success:j.createElement(Ln,null),warning:j.createElement(Mn,null),error:j.createElement($n,null),info:j.createElement(Vn,null)},tt={maxSnack:3,persist:!1,hideIconVariant:!1,disableWindowBlurListener:!1,variant:"default",autoHideDuration:5e3,iconVariant:Rn,anchorOrigin:{vertical:"bottom",horizontal:"left"},TransitionComponent:Se,transitionDuration:{enter:225,exit:195}},Pn=function(e,a){var i=function(o){return typeof o=="number"||o===null};return i(e)?e:i(a)?a:tt.autoHideDuration},Wn=function(e,a){var i=function(o,s){return s.some(function(r){return typeof o===r})};return i(e,["string","number"])?e:i(e,["object"])?N({},tt.transitionDuration,{},i(a,["object"])&&a,{},e):i(a,["string","number"])?a:i(a,["object"])?N({},tt.transitionDuration,{},a):tt.transitionDuration},Fn=function(e,a){return function(i,n){return n===void 0&&(n=!1),n?N({},tt[i],{},a[i],{},e[i]):i==="autoHideDuration"?Pn(e.autoHideDuration,a.autoHideDuration):i==="transitionDuration"?Wn(e.transitionDuration,a.transitionDuration):e[i]||a[i]||tt[i]}};function bt(t){return Object.entries(t).reduce(function(e,a){var i,n=a[0],o=a[1];return N({},e,(i={},i[n]=Kt(o),i))},{})}var ct={SnackbarContainer:"notistack-SnackbarContainer",Snackbar:"notistack-Snackbar",CollapseWrapper:"notistack-CollapseWrapper",MuiContent:"notistack-MuiContent",MuiContentVariant:function(e){return"notistack-MuiContent-"+e}},oe=bt({root:{height:0},entered:{height:"auto"}}),Dt="0px",Bt=175,Ne=_.forwardRef(function(t,e){var a=t.children,i=t.in,n=t.onExited,o=_.useRef(null),s=_.useRef(null),r=At(e,s),l=function(){return o.current?o.current.clientHeight:0},u=function(f){f.style.height=Dt},d=function(f){var m=l(),h=Nt({timeout:Bt,mode:"enter"}),x=h.duration,E=h.easing;f.style.transitionDuration=typeof x=="string"?x:x+"ms",f.style.height=m+"px",f.style.transitionTimingFunction=E||""},g=function(f){f.style.height="auto"},y=function(f){f.style.height=l()+"px"},k=function(f){Ce(f);var m=Nt({timeout:Bt,mode:"exit"}),h=m.duration,x=m.easing;f.style.transitionDuration=typeof h=="string"?h:h+"ms",f.style.height=Dt,f.style.transitionTimingFunction=x||""};return _.createElement(Xt,{in:i,unmountOnExit:!0,onEnter:u,onEntered:g,onEntering:d,onExit:y,onExited:n,onExiting:k,nodeRef:s,timeout:Bt},function(v,f){return _.createElement("div",Object.assign({ref:r,className:et(oe.root,v==="entered"&&oe.entered),style:N({pointerEvents:"all",overflow:"hidden",minHeight:Dt,transition:ut("height")},v==="entered"&&{overflow:"visible"},{},v==="exited"&&!i&&{visibility:"hidden"})},f),_.createElement("div",{ref:o,className:ct.CollapseWrapper,style:{display:"flex",width:"100%"}},a))})});Ne.displayName="Collapse";var ie={right:"left",left:"right",bottom:"up",top:"down"},An=function(e){return e.horizontal!=="center"?ie[e.horizontal]:ie[e.vertical]},zn=function(e){return"anchorOrigin"+Ut(e)},qn=function(e){e===void 0&&(e={});var a={containerRoot:!0,containerAnchorOriginTopCenter:!0,containerAnchorOriginBottomCenter:!0,containerAnchorOriginTopRight:!0,containerAnchorOriginBottomRight:!0,containerAnchorOriginTopLeft:!0,containerAnchorOriginBottomLeft:!0};return Object.keys(e).filter(function(i){return!a[i]}).reduce(function(i,n){var o;return N({},i,(o={},o[n]=e[n],o))},{})},Kn=function(){};function mt(t,e){return t.reduce(function(a,i){return i==null?a:function(){for(var o=arguments.length,s=new Array(o),r=0;r<o;r++)s[r]=arguments[r];var l=[].concat(s);e&&l.indexOf(e)===-1&&l.push(e),a.apply(this,l),i.apply(this,l)}},Kn)}var Un=typeof window<"u"?_.useLayoutEffect:_.useEffect;function se(t){var e=_.useRef(t);return Un(function(){e.current=t}),_.useCallback(function(){return e.current.apply(void 0,arguments)},[])}var je=_.forwardRef(function(t,e){var a=t.children,i=t.className,n=t.autoHideDuration,o=t.disableWindowBlurListener,s=o===void 0?!1:o,r=t.onClose,l=t.id,u=t.open,d=t.SnackbarProps,g=d===void 0?{}:d,y=_.useRef(),k=se(function(){r&&r.apply(void 0,arguments)}),v=se(function(E){!r||E==null||(y.current&&clearTimeout(y.current),y.current=setTimeout(function(){k(null,"timeout",l)},E))});_.useEffect(function(){return u&&v(n),function(){y.current&&clearTimeout(y.current)}},[u,n,v]);var f=function(){y.current&&clearTimeout(y.current)},m=_.useCallback(function(){n!=null&&v(n*.5)},[n,v]),h=function(b){g.onMouseEnter&&g.onMouseEnter(b),f()},x=function(b){g.onMouseLeave&&g.onMouseLeave(b),m()};return _.useEffect(function(){if(!s&&u)return window.addEventListener("focus",m),window.addEventListener("blur",f),function(){window.removeEventListener("focus",m),window.removeEventListener("blur",f)}},[s,m,u]),_.createElement("div",Object.assign({ref:e},g,{className:et(ct.Snackbar,i),onMouseEnter:h,onMouseLeave:x}),a)});je.displayName="Snackbar";var Lt,Xn=bt({root:(Lt={display:"flex",flexWrap:"wrap",flexGrow:1},Lt[Z.upSm]={flexGrow:"initial",minWidth:"288px"},Lt)}),Oe=_.forwardRef(function(t,e){var a=t.className,i=vt(t,["className"]);return j.createElement("div",Object.assign({ref:e,className:et(Xn.root,a)},i))});Oe.displayName="SnackbarContent";var ft=bt({root:{backgroundColor:"#313131",fontSize:"0.875rem",lineHeight:1.43,letterSpacing:"0.01071em",color:"#fff",alignItems:"center",padding:"6px 16px",borderRadius:"4px",boxShadow:"0px 3px 5px -1px rgba(0,0,0,0.2),0px 6px 10px 0px rgba(0,0,0,0.14),0px 1px 18px 0px rgba(0,0,0,0.12)"},lessPadding:{paddingLeft:8*2.5+"px"},default:{backgroundColor:"#313131"},success:{backgroundColor:"#43a047"},error:{backgroundColor:"#d32f2f"},warning:{backgroundColor:"#ff9800"},info:{backgroundColor:"#2196f3"},message:{display:"flex",alignItems:"center",padding:"8px 0"},action:{display:"flex",alignItems:"center",marginLeft:"auto",paddingLeft:"16px",marginRight:"-8px"}}),re="notistack-snackbar",He=_.forwardRef(function(t,e){var a=t.id,i=t.message,n=t.action,o=t.iconVariant,s=t.variant,r=t.hideIconVariant,l=t.style,u=t.className,d=o[s],g=n;return typeof g=="function"&&(g=g(a)),j.createElement(Oe,{ref:e,role:"alert","aria-describedby":re,style:l,className:et(ct.MuiContent,ct.MuiContentVariant(s),ft.root,ft[s],u,!r&&d&&ft.lessPadding)},j.createElement("div",{id:re,className:ft.message},r?null:d,i),g&&j.createElement("div",{className:ft.action},g))});He.displayName="MaterialDesignContent";var Gn=_.memo(He),Yn=bt({wrappedRoot:{width:"100%",position:"relative",transform:"translateX(0)",top:0,right:0,bottom:0,left:0,minWidth:"288px"}}),Zn=function(e){var a=_.useRef(),i=_.useState(!0),n=i[0],o=i[1],s=mt([e.snack.onClose,e.onClose]),r=function(){e.snack.requestClose&&s(null,"instructed",e.snack.id)},l=_.useCallback(function(){a.current=setTimeout(function(){o(function(T){return!T})},125)},[]);_.useEffect(function(){return function(){a.current&&clearTimeout(a.current)}},[]);var u=e.snack,d=e.classes,g=e.Component,y=g===void 0?Gn:g,k=_.useMemo(function(){return qn(d)},[d]),v=u.open,f=u.SnackbarProps,m=u.TransitionComponent,h=u.TransitionProps,x=u.transitionDuration,E=u.disableWindowBlurListener,b=u.content,I=vt(u,["open","SnackbarProps","TransitionComponent","TransitionProps","transitionDuration","disableWindowBlurListener","content","entered","requestClose","onEnter","onEntered","onExit","onExited"]),w=N({direction:An(I.anchorOrigin),timeout:x},h),p=b;typeof p=="function"&&(p=p(I.id,I.message));var C=["onEnter","onEntered","onExit","onExited"].reduce(function(T,D){var S;return N({},T,(S={},S[D]=mt([e.snack[D],e[D]],I.id),S))},{});return j.createElement(Ne,{in:n,onExited:C.onExited},j.createElement(je,{open:v,id:I.id,disableWindowBlurListener:E,autoHideDuration:I.autoHideDuration,className:et(Yn.wrappedRoot,k.root,k[zn(I.anchorOrigin)]),SnackbarProps:f,onClose:s},j.createElement(m,Object.assign({},w,{appear:!0,in:v,onExit:C.onExit,onExited:l,onEnter:C.onEnter,onEntered:mt([C.onEntered,r],I.id)}),p||j.createElement(y,Object.assign({},I)))))},ht,Mt,It,wt,$t,P={view:{default:20},snackbar:{default:6,dense:2}},le="."+ct.CollapseWrapper,Vt=16,Ct=bt({root:(ht={boxSizing:"border-box",display:"flex",maxHeight:"100%",position:"fixed",zIndex:1400,height:"auto",width:"auto",transition:ut(["top","right","bottom","left","max-width"],{duration:300,easing:"ease"}),pointerEvents:"none"},ht[le]={padding:P.snackbar.default+"px 0px",transition:"padding 300ms ease 0ms"},ht.maxWidth="calc(100% - "+P.view.default*2+"px)",ht[Z.downXs]={width:"100%",maxWidth:"calc(100% - "+Vt*2+"px)"},ht),rootDense:(Mt={},Mt[le]={padding:P.snackbar.dense+"px 0px"},Mt),top:{top:P.view.default-P.snackbar.default+"px",flexDirection:"column"},bottom:{bottom:P.view.default-P.snackbar.default+"px",flexDirection:"column-reverse"},left:(It={left:P.view.default+"px"},It[Z.upSm]={alignItems:"flex-start"},It[Z.downXs]={left:Vt+"px"},It),right:(wt={right:P.view.default+"px"},wt[Z.upSm]={alignItems:"flex-end"},wt[Z.downXs]={right:Vt+"px"},wt),center:($t={left:"50%",transform:"translateX(-50%)"},$t[Z.upSm]={alignItems:"center"},$t)}),Qn=function(e){var a=e.classes,i=a===void 0?{}:a,n=e.anchorOrigin,o=e.dense,s=e.children,r=et(ct.SnackbarContainer,Ct[n.vertical],Ct[n.horizontal],Ct.root,i.containerRoot,i["containerAnchorOrigin"+Ut(n)],o&&Ct.rootDense);return j.createElement("div",{className:r},s)},Jn=_.memo(Qn),ue=function(e){var a=typeof e=="string"||_.isValidElement(e);return!a},q,ko=function(t){Ie(e,t);function e(i){var n;return n=t.call(this,i)||this,n.enqueueSnackbar=function(o,s){if(s===void 0&&(s={}),o==null)throw new Error("enqueueSnackbar called with invalid argument");var r=ue(o)?o:s,l=ue(o)?o.message:o,u=r.key,d=r.preventDuplicate,g=vt(r,["key","preventDuplicate"]),y=Et(u),k=y?u:new Date().getTime()+Math.random(),v=Fn(g,n.props),f=N({id:k},g,{message:l,open:!0,entered:!1,requestClose:!1,persist:v("persist"),action:v("action"),content:v("content"),variant:v("variant"),anchorOrigin:v("anchorOrigin"),disableWindowBlurListener:v("disableWindowBlurListener"),autoHideDuration:v("autoHideDuration"),hideIconVariant:v("hideIconVariant"),TransitionComponent:v("TransitionComponent"),transitionDuration:v("transitionDuration"),TransitionProps:v("TransitionProps",!0),iconVariant:v("iconVariant",!0),style:v("style",!0),SnackbarProps:v("SnackbarProps",!0),className:et(n.props.className,g.className)});return f.persist&&(f.autoHideDuration=void 0),n.setState(function(m){if(d===void 0&&n.props.preventDuplicate||d){var h=function(I){return y?I.id===k:I.message===l},x=m.queue.findIndex(h)>-1,E=m.snacks.findIndex(h)>-1;if(x||E)return m}return n.handleDisplaySnack(N({},m,{queue:[].concat(m.queue,[f])}))}),k},n.handleDisplaySnack=function(o){var s=o.snacks;return s.length>=n.maxSnack?n.handleDismissOldest(o):n.processQueue(o)},n.processQueue=function(o){var s=o.queue,r=o.snacks;return s.length>0?N({},o,{snacks:[].concat(r,[s[0]]),queue:s.slice(1,s.length)}):o},n.handleDismissOldest=function(o){if(o.snacks.some(function(d){return!d.open||d.requestClose}))return o;var s=!1,r=!1,l=o.snacks.reduce(function(d,g){return d+(g.open&&g.persist?1:0)},0);l===n.maxSnack&&(r=!0);var u=o.snacks.map(function(d){return!s&&(!d.persist||r)?(s=!0,d.entered?(d.onClose&&d.onClose(null,"maxsnack",d.id),n.props.onClose&&n.props.onClose(null,"maxsnack",d.id),N({},d,{open:!1})):N({},d,{requestClose:!0})):N({},d)});return N({},o,{snacks:u})},n.handleEnteredSnack=function(o,s,r){if(!Et(r))throw new Error("handleEnteredSnack Cannot be called with undefined key");n.setState(function(l){var u=l.snacks;return{snacks:u.map(function(d){return d.id===r?N({},d,{entered:!0}):N({},d)})}})},n.handleCloseSnack=function(o,s,r){n.props.onClose&&n.props.onClose(o,s,r);var l=r===void 0;n.setState(function(u){var d=u.snacks,g=u.queue;return{snacks:d.map(function(y){return!l&&y.id!==r?N({},y):y.entered?N({},y,{open:!1}):N({},y,{requestClose:!0})}),queue:g.filter(function(y){return y.id!==r})}})},n.closeSnackbar=function(o){var s=n.state.snacks.find(function(r){return r.id===o});Et(o)&&s&&s.onClose&&s.onClose(null,"instructed",o),n.handleCloseSnack(null,"instructed",o)},n.handleExitedSnack=function(o,s){if(!Et(s))throw new Error("handleExitedSnack Cannot be called with undefined key");n.setState(function(r){var l=n.processQueue(N({},r,{snacks:r.snacks.filter(function(u){return u.id!==s})}));return l.queue.length===0?l:n.handleDismissOldest(l)})},q=n.enqueueSnackbar,n.closeSnackbar,n.state={snacks:[],queue:[],contextValue:{enqueueSnackbar:n.enqueueSnackbar.bind(Qt(n)),closeSnackbar:n.closeSnackbar.bind(Qt(n))}},n}var a=e.prototype;return a.render=function(){var n=this,o=this.state.contextValue,s=this.props,r=s.domRoot,l=s.children,u=s.dense,d=u===void 0?!1:u,g=s.Components,y=g===void 0?{}:g,k=s.classes,v=this.state.snacks.reduce(function(m,h){var x,E=Ut(h.anchorOrigin),b=m[E]||[];return N({},m,(x={},x[E]=[].concat(b,[h]),x))},{}),f=Object.keys(v).map(function(m){var h=v[m],x=h[0];return j.createElement(Jn,{key:m,dense:d,anchorOrigin:x.anchorOrigin,classes:k},h.map(function(E){return j.createElement(Zn,{key:E.id,snack:E,classes:k,Component:y[E.variant],onClose:n.handleCloseSnack,onEnter:n.props.onEnter,onExit:n.props.onExit,onExited:mt([n.handleExitedSnack,n.props.onExited],E.id),onEntered:mt([n.handleEnteredSnack,n.props.onEntered],E.id)})}))});return j.createElement(we.Provider,{value:o},l,r?$e.createPortal(f,r):f)},ke(e,[{key:"maxSnack",get:function(){return this.props.maxSnack||tt.maxSnack}}]),e}(_.Component),Io=function(){return _.useContext(we)};function De(){const t=_.useRef({x:0,y:0}),e=he(h=>h.domNode),{getNodes:a,setNodes:i,getEdges:n,setEdges:o,screenToFlowPosition:s}=M(),[r,l]=_.useState([]),[u,d]=_.useState([]);_.useEffect(()=>{if(!e)return;const h=b=>b.preventDefault(),x=b=>{t.current={x:b.clientX,y:b.clientY}},E=["cut","copy","paste"];return E.forEach(b=>e.addEventListener(b,h)),e.addEventListener("mousemove",x),()=>{E.forEach(b=>e.removeEventListener(b,h)),e.removeEventListener("mousemove",x)}},[e]);const g=_.useCallback(()=>{const h=a().filter(b=>b.selected),E=ye(h,n()).filter(b=>{const I=!h.some(p=>p.id===b.source),w=!h.some(p=>p.id===b.target);return!I&&!w});return{selectedNodes:h,selectedEdges:E}},[a,n]),y=_.useCallback(()=>{const{selectedNodes:h,selectedEdges:x}=g();l(h),d(x)},[g]),k=_.useCallback(()=>{try{const{selectedNodes:h,selectedEdges:x}=g();l(h),d(x),i(E=>E.filter(b=>!b.selected)),o(E=>E.filter(b=>!x.includes(b)))}catch(h){q("Ошибка при вырезании",{variant:"error"}),console.error("Paste error:",h)}},[g,i,o]),v=(h,x,E,b)=>{const I=Tt(),w=x.x+(h.position.x-E),p=x.y+(h.position.y-b);return{...h,id:I,position:{x:w,y:p},data:{...h.data}}},f=h=>{try{const x=Tt(),E=h.positionAbsoluteX+20,b=(h.height??140)+10,I=h.positionAbsoluteY+b;let w;w={...h,id:x,position:{x:E,y:I},data:{...h.data}},i(p=>[...p.map(C=>({...C,selected:!1})),w])}catch(x){q("Ошибка при копировании",{variant:"error"}),console.error("Paste error:",x)}},m=_.useCallback(async(h=s(t.current))=>{if(r.length)try{const x=Math.min(...r.map(p=>p.position.x)),E=Math.min(...r.map(p=>p.position.y)),b=await Promise.all(r.map(p=>v(p,h,x,E))),I=Object.fromEntries(r.map((p,C)=>[p.id,b[C].id])),w=u.map(p=>{var C,T;return{...p,id:Tt(),source:I[p.source],sourceHandle:`${I[p.source]} ${(C=p.sourceHandle)==null?void 0:C.split(" ")[1]}`,target:I[p.target],targetHandle:`${I[p.target]} ${(T=p.targetHandle)==null?void 0:T.split(" ")[1]}`}});i(p=>[...p.map(C=>({...C,selected:!1})),...b]),o(p=>[...p.map(C=>({...C,selected:!1})),...w])}catch(x){q("Ошибка при копировании",{variant:"error"}),console.error("Paste error:",x)}},[r,u,s,i,o]);return Rt(["Meta+x","Control+x"],k),Rt(["Meta+c","Control+c"],y),Rt(["Meta+v","Control+v"],m),{cut:k,copy:y,paste:m,bufferedNodes:r,bufferedEdges:u,createDublicate:f}}function Rt(t,e){const[a,i]=_.useState(!1),n=Pe(t);_.useEffect(()=>{n&&!a?(e(),i(!0)):!n&&a&&i(!1)},[n,a,e])}const ta=()=>{const{setNodes:t,setEdges:e}=M();return{handleDelete:(i,n)=>{t(o=>o.filter(s=>s.id!==i)),e(o=>o.filter(s=>s.target!==i&&s.source!==i))}}},ea="_row_1sy6z_1",na="_input_1sy6z_9",aa="_outputs_1sy6z_19",oa="_wraps_1sy6z_29",ia="_text_1sy6z_49",F={row:ea,input:na,outputs:aa,wraps:oa,"handle-wrap":"_handle-wrap_1sy6z_41",text:ia},sa="_handle_1orw5_1",ra="_action_1orw5_131",X={handle:sa,"handle-wrapper":"_handle-wrapper_1orw5_17","handle-container":"_handle-container_1orw5_29","oscillography-view":"_oscillography-view_1orw5_37","tooltip-visible":"_tooltip-visible_1orw5_93","context-menu":"_context-menu_1orw5_101",action:ra},St=({id:t,type:e,position:a,dataType:i,data:n})=>{var w;const[o,s]=_.useState(!1),r=_.useRef(null),{updateNodeData:l}=M(),u=We(),[d,g]=_.useMemo(()=>{const[p="",C=""]=String(t).split(" ");return[p,C]},[t]),y=_.useMemo(()=>u.filter(p=>e==="target"?p.targetHandle===`${t}`:p.sourceHandle===`${t}`),[u,t,e]),k=((w=n==null?void 0:n.outputHandles)==null?void 0:w[g])??{},{oscillography:v=!1,name:f=""}=k,m=p=>{l(d,{...n,outputHandles:{...n.outputHandles,[g]:{...k,...p}}})},h=()=>{m({oscillography:!v})},x=p=>{m({name:p.target.value})},E=p=>{p.stopPropagation(),!(!(n!=null&&n.outputHandles)||Object.keys(n.outputHandles).length===0)&&s(C=>!C)};_.useEffect(()=>{if(!o)return;const p=T=>{r.current&&!r.current.contains(T.target)&&s(!1)},C=T=>{T.key==="Escape"&&s(!1)};return document.addEventListener("click",p),document.addEventListener("touchstart",p),document.addEventListener("keydown",C),()=>{document.removeEventListener("click",p),document.removeEventListener("touchstart",p),document.removeEventListener("keydown",C)}},[o]);const b=p=>{p.stopPropagation(),p.key==="Enter"&&(p.target.blur(),s(!1))},I=_.useMemo(()=>{switch(a){case L.Left:return{transform:"translate(-150%, -50%)"};case L.Right:return{transform:"translate(50%, -50%)"};case L.Top:return{transform:"translate(-50%, -150%)"};case L.Bottom:return{transform:"translate(-50%, 50%)"};default:return{transform:"translate(-50%, -150%)"}}},[a]);return c.jsxs("div",{ref:r,onClick:e==="source"?E:void 0,onDoubleClick:p=>p.stopPropagation(),className:V(X["handle-wrapper"],"nodrag","nopan"),children:[e==="source"&&o&&c.jsxs("div",{className:X["context-menu"],role:"menu","aria-label":"Handle context menu",onClick:p=>p.stopPropagation(),children:[c.jsx("label",{children:c.jsx(it,{type:"text",style:{width:"300px"},value:f,onChange:x,placeholder:"Введите название",onKeyDown:b})}),c.jsx("button",{type:"button",className:X.action,onClick:h,children:v?"Выключить осциллографирование":"Осциллографировать"})]}),c.jsxs("div",{className:X["handle-container"],children:[c.jsx(Fe,{type:e,position:a,id:`${t}`,"data-tooltip":e==="source"?"Нажмите чтобы изменить настройки выхода":void 0,style:{backgroundColor:i?lt[i].clr:"gray",transform:a===L.Left?"translate(-100%, -50%)":a===L.Right?"translate(100%, -50%)":a===L.Top?"translate(-50%, -100%)":"translate(-50%, 100%)"},isConnectable:e==="source"?void 0:y.length<1,className:V(X.handle,{[X["tooltip-visible"]]:e==="source"})}),v&&c.jsx("div",{className:X["oscillography-view"],style:I})]})]})},ce={"handles-column":"_handles-column_gcrpe_1","handle-wrap":"_handle-wrap_gcrpe_11"},la=({nodeId:t,inputHandles:e,data:a})=>c.jsx("div",{className:ce["handles-column"],children:Object.keys(e).map(i=>c.jsx("div",{className:ce["handle-wrap"],children:c.jsx(St,{id:`${t} ${i}`,type:"target",position:L.Left,dataType:e[i].dataType,data:a})},i))}),ua={analogInput:["updateName","updateSetpointValue","delete","dublicate"],analogInputInt:["updateName","updateSetpointValue","delete","dublicate"],discreteInput:["updateName","delete","dublicate"],discreteOutput:["updateName","delete","dublicate"],constInt:["updateSetpointValue","updateName","delete","dublicate"],fourierInt:["updateName","changeFourierGarmonics","delete","dublicate"],xor:["delete","dublicate"],and:["invert","delete","dublicate"],or:["invert","delete","dublicate"],nand:["invert","delete","dublicate"],nor:["invert","delete","dublicate"],multInt:["delete","dublicate"],divInt:["delete","dublicate"],sumInt:["delete","dublicate"],subInt:["delete","dublicate"],timerInt:["updateSetpointValue","updateName","delete","dublicate"],risEdgeTimerBool:["updateDigit","delete","dublicate"],equalsInt:["delete","dublicate"],lessInt:["delete","dublicate"],moreInt:["delete","dublicate"],fifoByte:["updateLengthMemory","delete","dublicate"],fifoByteWithoutEn:["updateLengthMemory","delete","dublicate"],fifoWord:["updateLengthMemory","delete","dublicate"],fifoWordWithoutEn:["updateLengthMemory","delete","dublicate"]},ca=t=>"setpointDataType"in t,da={delete:{key:"deleteNode",label:"delete node",dependencies:["useDeleteNode"],createElement:({node:t,dependencies:e})=>{var s;const{id:a,data:i}=t,n=(s=e.useDeleteNode)==null?void 0:s.call(e);if(!n)return null;const{handleDelete:o}=n;return c.jsx(W,{text:"Удалить",onClick:()=>o(a,i)})}},dublicate:{key:"dublicate",label:"dublicate node",dependencies:["useCopyPaste"],createElement:({node:t,dependencies:e})=>{var n;const a=(n=e.useCopyPaste)==null?void 0:n.call(e);if(!a)return null;const{createDublicate:i}=a;return c.jsx(W,{text:"Дублировать",onClick:()=>i(t)})}},changeFourierGarmonics:{key:"invert",label:"Инвертировать",dependencies:["useUpdateFourierValue"],createElement:({node:t,dependencies:e})=>{const{data:a}=t;if(!("setpointDataType"in a))return;const{outputHandles:i}=a;if(!(e!=null&&e.useUpdateFourierValue))return null;const n=e.useUpdateFourierValue(t.id,t.data);if(!n)return;const{handleFourierGarmonicForOutput:o,inputsValue:s}=n,r=Object.values(i).reduce((l,u,d)=>(d%2===0?l.push([u]):l[l.length-1].push(u),l),[]);return c.jsx("div",{onDoubleClick:l=>{l.stopPropagation()},className:"nodrag nopan nowheel",style:{display:"flex",gap:"10px",width:"max-content"},children:r.map((l,u)=>c.jsx(it,{style:{width:"60px"},type:"number",min:0,value:s[u],onChange:d=>o(u,d.target.value)},u))})}},invert:{key:"invert",label:"Инвертировать",dependencies:["useInverseNode"],createElement:({node:t,dependencies:e})=>{var o;const{id:a,data:i}=t,n=(o=e.useInverseNode)==null?void 0:o.call(e,a,i.type);return c.jsx(W,{onClick:n,text:"Инвертировать",type:"button"})}},updateSetpointValue:{key:"updateSetpointValue",label:"Изменить значение",dependencies:["useUpdateSetpointValue"],createElement:({node:t,dependencies:e})=>{var s;const{data:a}=t;if(!ca(a))return null;const i=(s=e.useUpdateSetpointValue)==null?void 0:s.call(e,t.id,a);if(!i)return null;const{handleChange:n,inputValue:o}=i;return c.jsx("div",{className:"flex flex-col gap-2",children:c.jsx(it,{type:"text",value:o,onChange:n,placeholder:"Введите значение"})})}},updateName:{key:"updateName",label:"Изменить значение",dependencies:["useUpdateNameValue"],createElement:({node:t,dependencies:e})=>{var r;const{id:a,data:i}=t,n=(r=e.useUpdateNameValue)==null?void 0:r.call(e,a,i);if(!n)return null;const{name:o,handleChangeName:s}=n;return c.jsx("div",{className:"flex flex-col gap-2",children:c.jsx(it,{type:"text",value:o,onChange:s,placeholder:"Введите имя"})})}},updateDigit:{key:"updateDigit",label:"Изменить значение",dependencies:["useUpdateDigit"],createElement:({node:t,dependencies:e})=>{var r;const{id:a,data:i}=t,n=(r=e.useUpdateDigit)==null?void 0:r.call(e,a,i);if(!n)return null;const{digit:o,handleChangeDigit:s}=n;return c.jsx("div",{className:"nodrag nopan nowheel",onDoubleClick:l=>{l.stopPropagation()},children:c.jsx(it,{type:"number",min:0,max:6e3,value:o,onChange:s,placeholder:"Введите значение"})})}},updateLengthMemory:{key:"updateLengthMemory",label:"Изменить значение",dependencies:["useChangeLengthMemory"],createElement:({node:t,dependencies:e})=>{var r;const{id:a,data:i}=t,n=(r=e.useChangeLengthMemory)==null?void 0:r.call(e,a,i);if(!n)return null;const{lengthMemory:o,handleChangeLengthMemory:s}=n;return c.jsx("div",{className:"nodrag nopan nowheel",onDoubleClick:l=>{l.stopPropagation()},children:c.jsx(it,{type:"number",min:1,value:o,onChange:s,placeholder:"Введите глубину"})})}}},pa=t=>Object.values({0:"1",1:"2",2:"3",3:"4",4:"5",5:"6",6:"7",7:"8"}).slice(0,t).reduce((a,i)=>(a[i]=void 0,a),{}),fa=t=>{const{updateNodeData:e,getEdges:a,setEdges:i,getNode:n}=M(),o=qt(),s=[...new Array(10)].reduce((l,u,d)=>(l.push({value:d+1}),l),[]);return{changeHandles:_.useCallback(l=>{e(t,{inputHandlesCount:l}),o(t);const u=a(),d=Object.keys(pa(+l)).map(y=>`${t} ${y}`),g=u.filter(y=>y.target!==t||y.targetHandle&&d.includes(y.targetHandle));i(g)},[t,e,o,a,i,n]),items:s}},ha={or:"nor",and:"nand",nor:"or",nand:"and"},ga=(t,e)=>{const{updateNodeData:a}=M();return _.useCallback(()=>{a(t,{type:ha[e]})},[t,e,a])};function ya(t){const e=new Uint8Array(4);return e[3]=t>>24&255,e[2]=t>>16&255,e[1]=t>>8&255,e[0]=t&255,e}const ma=(t,e)=>{const{updateNodeData:a}=M();if(!("setpointDataType"in e)||e.type!=="fourierInt")return;const[i,n]=_.useState([...e.setpointValue]);return{inputsValue:i,handleFourierGarmonicForOutput:(s,r)=>{if(ve(r)){const l=Number(r);if(!Number.isNaN(l)&&l>=0&&l<=19){const u=[...i];u[s]=l,a(t,{setpointValue:[...u]}),n([...u])}}}}},va=(t,e)=>{const{updateNodeData:a}=M();if(!("setpointDataType"in e)||Array.isArray(e.setpointValue))return;const{setpointDataType:i}=e,[n,o]=_.useState(String(e.setpointValue)),s=(l,u)=>{if(l===""||l==="-"||l==="."||l==="-.")return l;u&&(l=l.replace(",","."));const d=Number(l);return Number.isNaN(d)?l:String(d)};return{handleChange:l=>{let u=l.target.value;switch(i){case"int":if(ve(u)){const y=s(u,!1);o(y);const k=Number(y);Number.isNaN(k)||a(t,{setpointValue:k})}break;case"float":if(nn(u)){const y=s(u,!0);o(y);const k=Number(y);Number.isNaN(k)||a(t,{setpointValue:k})}break;case"bool":const g=l.target.checked?1:0;a(t,{setpointValue:g}),o(String(g));break}},inputValue:n}},ba=(t,e)=>{const{updateNodeData:a}=M(),i=n=>{const o=n.target.value;a(t,{name:o})};return{name:e.name,handleChangeName:i}},xa=(t,e)=>{if(!("lengthMemory"in e))return null;const{updateNodeData:a}=M(),i=n=>{const o=n.target.value;a(t,{lengthMemory:+o})};return{lengthMemory:e.lengthMemory,handleChangeLengthMemory:i}},Ea=(t,e)=>{const{updateNodeData:a}=M();if(!("digit"in e))return;const i=n=>{const o=Number(n.target.value);o&&a(t,{digit:o})};return{digit:e.digit,handleChangeDigit:i}},_a=t=>{var n;const{type:e}=t.data,a={useChangeHandles:fa,useInverseNode:ga,useUpdateSetpointValue:va,useUpdateNameValue:ba,useDeleteNode:ta,useUpdateFourierValue:ma,useCopyPaste:De,useChangeLengthMemory:xa,useUpdateDigit:Ea};return{actions:(n=ua[e])==null?void 0:n.map(o=>{const s=da[o];if(!s)return null;const r=s.dependencies.reduce((l,u)=>(u in a&&(l[u]=a[u]),l),{});return{key:s.key,label:s.label,element:s.createElement({node:t,dependencies:r})}})}},de={"context-menu-block":"_context-menu-block_64p36_1","menu-item":"_menu-item_64p36_15"},ka=_.memo(({actions:t,visible:e,setVisible:a})=>{const i=_.useRef(null);return _.useEffect(()=>{const n=o=>{i.current&&!i.current.contains(o.target)&&a(!1)};return document.addEventListener("click",n),()=>document.removeEventListener("click",n)},[]),c.jsx(Ae,{isVisible:e,children:c.jsx("div",{ref:i,className:de["context-menu-block"],children:t.map((n,o)=>c.jsx("div",{className:de["menu-item"],children:n.element},o))})})}),O=({node:t,children:e})=>{const[a,i]=_.useState(!1),{actions:n}=_a(t);return c.jsxs("div",{style:{position:"relative"},onDoubleClick:()=>i(o=>!o),children:[e,c.jsx(ka,{actions:n,visible:a,setVisible:i})]})},Ia="_inc_1tbfq_1",wa="_dec_1tbfq_9",Ca="_disabled_1tbfq_47",gt={"inc-dec":"_inc-dec_1tbfq_1",inc:Ia,dec:wa,disabled:Ca},A=({node:t,children:e})=>{const{id:a,data:i}=t,{updateNodeData:n,setEdges:o}=M(),s=qt(),r=i.inputHandles||{},l=Object.keys(r),u=r[l[0]].dataType,d={min:2,max:10},g=()=>{const f=l.length;if(f>=d.max)return;const m=`input-${f+1}`,h={...r,[m]:{dataType:u}};n(a,{inputHandles:h}),s(a)},y=()=>{if(l.length<=d.min)return;const h=Object.keys(r).filter(b=>b.startsWith("input-")).sort((b,I)=>{const w=parseInt(b.replace("input-",""),10);return parseInt(I.replace("input-",""),10)-w})[0],{[h]:x,...E}=r;o(b=>b.filter(I=>I.targetHandle!==`${a} ${h}`)),n(a,{inputHandles:E}),s(a)},k=l.length>=d.max,v=l.length<=d.min;return c.jsxs("div",{className:gt["inc-dec"],children:[c.jsx("button",{className:V(gt.inc,"nodrag",{[gt.disabled]:k}),onClick:g,disabled:k,children:"+"}),e,c.jsx("button",{className:V(gt.dec,"nodrag",{[gt.disabled]:v}),onClick:y,disabled:v,children:"—"})]})},Ta="_btn_aosl1_9",Sa="_inc_aosl1_1",Na="_disabled_aosl1_41",ja="_dec_aosl1_47",z={"inc-dec":"_inc-dec_aosl1_1","btns-row":"_btns-row_aosl1_9",btn:Ta,inc:Sa,disabled:Na,dec:ja},Oa=({node:t,children:e})=>{const{id:a,data:i}=t,{updateNodeData:n,setEdges:o}=M(),s=i.outputHandles||{},r=Object.keys(s),l={min:2,max:6},u=qt(),d=()=>{const v=r.length,f=l.max-v,m=Math.min(2,f);if(m>0){const h={...s};for(let x=1;x<=m;x++){const E=`out-${v+x}`;h[E]={dataType:"int"}}n(a,{outputHandles:h}),u(a)}},g=()=>{const f=r.length-l.min,m=Math.min(2,f);if(m>0){const h={...s},x=Object.keys(h).filter(E=>E.startsWith("out-")).sort((E,b)=>{const I=parseInt(E.replace("out-",""),10);return parseInt(b.replace("out-",""),10)-I});for(let E=0;E<m;E++){const b=x[E];o(I=>I.filter(w=>w.sourceHandle!==`${a} ${b}`)),delete h[b]}n(a,{outputHandles:h}),u(a)}},y=r.length>=l.max,k=r.length<=l.min;return c.jsxs("div",{className:z["inc-dec"],children:[e,c.jsxs("div",{className:z["btns-row"],children:[c.jsx("button",{className:V(z.btn,z.inc,"nodrag",{[z.disabled]:y}),onClick:d,disabled:y,children:"+"}),c.jsx("button",{className:V(z.btn,z.dec,"nodrag",{[z.disabled]:k}),onClick:g,disabled:k,children:"—"})]})]})},Ha={analogInput:[O],analogInputInt:[O],discreteInput:[O],discreteOutput:[O],fourierInt:[O,Oa],constInt:[O],xor:[O,A],and:[O,A],or:[O,A],nand:[O,A],nor:[O,A],multInt:[O,A],divInt:[O,A],sumInt:[O,A],subInt:[O],timerInt:[O],risEdgeTimerBool:[O],equalsInt:[O],lessInt:[O],moreInt:[O],fifoByte:[O],fifoByteWithoutEn:[O],fifoWord:[O],fifoWordWithoutEn:[O]},Da=(t,e)=>(Ha[t.data.type]||[]).reduce((i,n,o)=>c.jsx(n,{node:t,children:i},`feature-${o}`),e),Ba=_.memo(t=>{const{type:e,inputHandles:a,outputHandles:i}=t.data,n=ze[e];if(!n)return null;const{view:o,...s}=n,r=c.jsxs("div",{className:F.row,children:[!!Object.keys(a).length&&c.jsx(la,{nodeId:t.id,inputHandles:a,data:t.data}),c.jsx(o,{...s}),!!Object.keys(i).length&&Object.keys(i).map(d=>c.jsx(St,{id:`${t.id} ${d}`,type:"source",position:L.Right,dataType:i[d].dataType,data:t.data},d))]}),u=e!=="fourierInt"?r:(()=>{const d=Object.keys(a).length,g=Object.keys(a)[0];return c.jsxs("div",{className:F.row,children:[!!d&&c.jsx("div",{className:F.input,children:c.jsx(St,{id:`${t.id} ${g}`,type:"target",position:L.Left,dataType:a[g].dataType,data:t.data},g)}),c.jsx(o,{...s}),!!Object.keys(i).length&&c.jsx("div",{className:F.outputs,children:Array.from({length:Math.ceil(Object.keys(i).length/2)},(y,k)=>Object.keys(i).slice(k*2,k*2+2)).map((y,k)=>c.jsx("div",{className:F.wraps,children:y.map((v,f)=>c.jsxs("div",{className:F["handle-wrap"],children:[f===0?c.jsx("div",{className:F.text,children:"Amp"}):c.jsx("div",{className:F.text,children:"Ph"}),c.jsx(St,{id:`${t.id} ${v}`,type:"source",position:L.Right,dataType:i[v].dataType,data:t.data},`${k}-${f}`)]},v))},k))})]})})();return Da(t,u)}),wo={account:"paid-pro",hideAttribution:!0};qe.SmoothStep;const Co={node:Ba},To={"custom-edge":In},So=({fromX:t,fromY:e,toX:a,toY:i,fromPosition:n,fromHandle:o,toPosition:s,fromNode:r})=>{var d,g,y,k;const[l]=ge({sourceX:t,sourceY:e,targetX:a,targetY:i,offset:15,sourcePosition:n,targetPosition:s});if(!r||!o||!o.id)return null;const u=((g=r.data.outputHandles[(d=o.id)==null?void 0:d.split(" ")[1]])==null?void 0:g.dataType)||((k=r.data.inputHandles[(y=o.id)==null?void 0:y.split(" ")[1]])==null?void 0:k.dataType);return u?c.jsx("g",{children:c.jsx("path",{fill:"none",stroke:lt[u].clr,strokeWidth:3,d:l})}):null},La="_panel__item_1tehr_15",Ma="_name_1tehr_41",Pt={"sidebar-item-drag-image":"_sidebar-item-drag-image_1tehr_1",panel__item:La,name:Ma},$a=({viewData:t,type:e})=>{const a=_.useRef(null),{view:i,name:n,...o}=t,s=r=>{var l;(l=r.dataTransfer)==null||l.setData("application/reactflow",e),a.current&&r.dataTransfer.setDragImage(a.current,0,0)};return c.jsxs("div",{className:Pt.panel__item,draggable:!0,onDragStart:s,children:[c.jsx(i,{...t}),c.jsx("div",{className:Pt.name,children:n}),c.jsx("div",{className:Pt["sidebar-item-drag-image"],ref:a,children:c.jsx(i,{...o})})]})},Va="_elements_15sbx_1",Ra={elements:Va},G=({views:t})=>c.jsx("div",{className:Ra.elements,children:Object.entries(t).map(e=>c.jsx($a,{viewData:e[1],type:e[0]},e[0]))}),Pa=()=>c.jsx("div",{children:c.jsxs(fn,{text:"Библиотека",position:"right",children:[c.jsx(U,{name:"Входы и выходы",children:c.jsx(G,{views:{...Ue,...Ke}})}),c.jsx(U,{name:"Логические элементы",children:c.jsx(G,{views:Xe})}),c.jsx(U,{name:"Алгебраические операции",children:c.jsx(G,{views:Ge})}),c.jsx(U,{name:"Операции сравнения",children:c.jsx(G,{views:Ye})}),c.jsx(U,{name:"Выдержки времени",children:c.jsx(G,{views:Ze})}),c.jsx(U,{name:"Фурье",children:c.jsx(G,{views:Qe})}),c.jsx(U,{name:"Fifo",children:c.jsx(G,{views:Je})})]})});function pe(t){return t.map(e=>{const a="digit"in e?[e.inType,e.instructionOffset,...e.resultOffsets,...e.sourcesOffsets,e.digit,e.workingSpace]:"lengthMemory"in e?[e.inType,e.instructionOffset,e.ptrBegin,e.lengthMemory,...e.resultOffsets,...e.sourcesOffsets,e.workingSpace]:"instructionOffset"in e?[e.inType,e.instructionOffset,...e.resultOffsets,...e.sourcesOffsets]:[e.inType,...e.sourcesOffsets,...e.resultOffsets];for(;a.length<10;)a.push(0);return a})}function Wa({scripts_1ms:t,scripts_250us:e,instructions:a,setpoints:i,indications:n,inputMatrixData:o,offsetsOsc:s,sms:r,smsWeb:l,phoneNumber:u,characteristics:d}){const g=pe(t),y=pe(e),k=Object.values(n).map(({led1:m,led2:h,led3:x,blOn:E,blOff:b,sms:I,smsWeb:w})=>[m,h,x,E,b,I,w]),v=Object.values(o).map(({I:m,U:h,HRM3:x})=>[m,h,x]);let f=[];return Object.entries(s).forEach(m=>{f.push({length:m[1].lengthMemory,offset:Number(m[0])})}),{scripts_1ms:g,scripts_250us:y,functions:a,setpoints:i,outputMatrix:k,inputMatrix:v,sms:r,smsWeb:l,phoneNumber:u,offsetsOsc:f,characteristics:d}}const Fa=(t,e,a)=>{if(!e.length)return{newPrimitiveData:{lengthInBytes:t.lengthInBytes,offset:1},newOffset:1,lastLength:t.lengthInBytes};const i=e.slice(-1)[0]+a,n={lengthInBytes:t.lengthInBytes,offset:i};return{newOffset:i,newPrimitiveData:n,lastLength:t.lengthInBytes}},Aa=()=>({lastLength:0,instructions:[],offsets:[],primitivesData:{}}),st={bool:1,int:4,float:4,analog:160},za=(t,e,a)=>{var o;const i=t.data.type;if(xe(J).includes(i)&&!((o=a.primitivesData[i])!=null&&o[e])){const s=J[i];if(s&&s[e]){a.instructions.push(...s[e].instruction);const{newOffset:r,newPrimitiveData:l,lastLength:u}=Fa(J[i][e],a.offsets,a.lastLength);a.primitivesData[i]={...a.primitivesData[i],[e]:l},a.offsets.push(r),a.lastLength=u}}},qa=(t,e)=>{try{const a=Object.keys(e.data.inputHandles);if(a.length===0)return!0;for(const i of a)if(!t.find(o=>o.targetHandle===`${e.id} ${i}`))throw new Error(`Не найдено исходное смещение для handle ${i} узла ${e.id}`)}catch(a){throw new Error(`Ошибка при создании scriptItem для узла ${e.id}: ${a instanceof Error?a.message:String(a)}`)}},Ka=(t,e,a,i,n,o,s,r)=>{var l,u,d,g,y,k,v,f,m,h,x,E,b,I;try{const{initOscillographicOffsets:w}=Ft.getState(),p=t.data.type,C=Object.keys(t.data.inputHandles).length;let T;p.includes("Output")?T=[s.get(t.id)]:(T=Object.entries(t.data.outputHandles).map(([S])=>o.get(`${t.id} ${S}`)),Object.entries(t.data.outputHandles).forEach(([S,H])=>{const B=o.get(`${t.id} ${S}`);if(B===void 0)throw new Error(`Не найдено смещение в мапе для handle ${S} узла ${t.id}`);H.oscillography&&w(B,H.name??"",st[H.dataType],H.dataType,H.dataType==="bool"?"line":"block")}));let D=Object.keys(t.data.inputHandles).reduce((S,H)=>{var xt;const B=(xt=e.find(Le=>`${t.id} ${H}`===Le.targetHandle))==null?void 0:xt.sourceHandle;if(!B)throw new Error(`Не найдено исходный handle для handle ${H} узла ${t.id}`);const $=o.get(B);if($===void 0)throw new Error(`Не найдено исходный узел для handle ${H} узла ${t.id}`);return S.push($),S},[]);if(t.data.type.includes("analogInput")&&(D=[r.analog.splice(0,st.analog)[0]]),"setpointDataType"in t.data){const{setpointsValues:S,setSetpoints:H}=be.getState(),B=[...S],$=n[t.data.setpointDataType].splice(0,t.data.setpointDataType==="bool"?1:4)[0];if(t.data.type==="fourierInt")Array.isArray(t.data.setpointValue)&&(B.splice($,4,...t.data.setpointValue),H([...B]),D.unshift($));else if(!Array.isArray(t.data.setpointValue))if(t.data.setpointDataType==="bool")B[$]=t.data.setpointValue,H([...B]),D.push($);else{const xt=ya(t.data.setpointValue);B.splice($,4,...xt),H([...B]),D.push($)}}if(p==="fourierInt")return{inType:(u=(l=J[p])==null?void 0:l[C])==null?void 0:u.in_type,sourcesOffsets:D,resultOffsets:T};if("digit"in t.data)return{inType:(g=(d=J[p])==null?void 0:d[C])==null?void 0:g.in_type,instructionOffset:(k=(y=a.primitivesData[p])==null?void 0:y[C])==null?void 0:k.offset,resultOffsets:T,sourcesOffsets:D,digit:t.data.digit,workingSpace:i.int.splice(0,st.int)[0]};if("lengthMemory"in t.data){const S=Object.values(t.data.outputHandles)[0].dataType,H=t.data.lengthMemory,B=i[S].splice(0,H*st[S])[0],$=i.int.splice(0,st.int)[0];return{inType:(f=(v=J[p])==null?void 0:v[C])==null?void 0:f.in_type,instructionOffset:(h=(m=a.primitivesData[p])==null?void 0:m[C])==null?void 0:h.offset,ptrBegin:B,lengthMemory:H,resultOffsets:T,sourcesOffsets:D,workingSpace:$}}return{inType:(E=(x=J[p])==null?void 0:x[C])==null?void 0:E.in_type,instructionOffset:(I=(b=a.primitivesData[p])==null?void 0:b[C])==null?void 0:I.offset,resultOffsets:T,sourcesOffsets:D}}catch(w){throw new Error(`Ошибка при создании scriptItem для узла ${t.id}: ${w instanceof Error?w.message:String(w)}`)}};function Be(t,e,a,i,n,o,s,r,l,u,d){if(e.has(t.id))return;e.add(t.id),t.data.type!=="fourierInt"&&za(t,Object.keys(t.data.inputHandles).length,i);const g=ye([t],d),{targets:y}=g.reduce((f,m)=>(m.source===t.id&&f.sources.push(m),m.target===t.id&&f.targets.push(m),f),{sources:[],targets:[]});qa(y,t);const k=tn(t,u,d),v=Ka(t,y,i,n,s,o,r,l);k.forEach(f=>Be(f,e,a,i,n,o,s,r,l,u,d)),a.push(v)}const Ua=(t,e,a)=>{const i=new Map,n=new Map;return t.forEach(o=>{if(o.data.type.toLocaleLowerCase().includes("out")){const r=Object.values(o.data.inputHandles)[0].dataType,l=a[r].shift();n.set(o.id,l)}Object.entries(o.data.outputHandles).forEach(([r,l])=>{const u=Object.values(o.data.outputHandles)[0].dataType,d=e[u].splice(0,st[u])[0];i.set(`${o.id} ${r}`,d)})}),{handleOffsetsMap:i,outputOffsetsMap:n}},yt=["bool","int","float","analog"],Wt=(t,e)=>e===1?t:Math.ceil(t/4)*4,Xa=(t,e)=>{const a=[];for(let i=t;i<t+e;i++)a.push(i);return a},Ga=(t,e,a,i)=>t<=i&&a<=e,Ya=(t,e)=>t.map(a=>a+e),Y=(t,e,a,i={bool:1,int:4,float:4,analog:160})=>{const n=i[t],o=yt.indexOf(t),s=u=>e[u].length?e[u][e[u].length-1]:null;let r=e[t].length?e[t][e[t].length-1]+1:0;if(e[t].length===0){for(let u=0;u<o;u++){const d=yt[u],g=s(d);g!==null&&(r=Math.max(r,Wt(g+1,n)))}r=Wt(r,n)}e[t].push(...Xa(r,a??n));const l=u=>{const d=yt[u],g=e[d];if(!g.length)return;const y=g[0],k=g[g.length-1];for(let v=u+1;v<yt.length;v++){const f=yt[v],m=e[f];if(!m.length)continue;const h=m[0],x=m[m.length-1];if(Ga(y,k,h,x)){const E=i[f],I=Wt(k+1,E)-h;e[f]=Ya(m,I),l(v);return}}};l(o)},Za={bool:1,int:4,float:4,analog:160};function Qa(t,e=512){const i=new TextEncoder().encode(t),n=[];let o=0;for(;o<i.length;){const s=i.slice(o,o+e),r=new TextDecoder().decode(s);n.push(r),o+=e}return n}const Ja=()=>{const[t,e]=me(f=>[f.nodes,f.edges],rt),[a,i]=en(f=>[f.nodes,f.edges],rt),[n,o]=on(f=>[f.sendConfig,f.addLog]),[s,r,l,u]=an(f=>[f.indications,f.smsText,f.smsWebText,f.phoneNumber],rt),[d]=Gt(f=>[f.datas,f.characteristicTypeData],rt),g=f=>{const m={bool:[],int:[],float:[],analog:[]},h={bool:[],int:[],float:[],analog:[]},x={bool:[],int:[],float:[],analog:[]},E={bool:[],int:[],float:[],analog:[]};return f.forEach(b=>{Object.values(b.data.outputHandles).forEach(I=>{if(Y(I.dataType,m),b.data.type.toLocaleLowerCase().includes("fifo")&&"lengthMemory"in b.data){const w=b.data.lengthMemory,p=Object.values(b.data.outputHandles)[0].dataType,C=w*Za[p];Y(I.dataType,m,C),Y("int",m)}}),"setpointDataType"in b.data&&Y(b.data.setpointDataType,h,void 0,{bool:1,int:4,float:4,analog:4}),b.data.type==="risEdgeTimerBool"&&Y("int",m),b.data.type.includes("analogInput")&&Y("analog",E,void 0,{bool:1,int:4,float:4,analog:160}),b.data.type.toLocaleLowerCase().includes("output")&&Y(b.data.inputHandles.input.dataType,x)}),{offsets:{bool:[...m.bool],int:[...m.int],float:[...m.float],analog:[...m.analog]},setpointOffsets:{bool:[...h.bool],int:[...h.int],float:[...h.float],analog:[...h.analog]},outputOffsetsStore:{bool:[...x.bool],int:[...x.int],float:[...x.float],analog:[...x.analog]},analogInputsOffsets:{bool:[...E.bool],int:[...E.int],float:[...E.float],analog:[...E.analog]}}},y=(f,m,h,x,E,b,I)=>{const w=[],p=new Set,C=f.filter(S=>{var H;return(H=S.data)==null?void 0:H.type.toLowerCase().includes("output")});if(!C.length)return console.warn("Нет выходных элементов в этом редакторе"),{scripts:[],instructions:I.instructions};const{handleOffsetsMap:T,outputOffsetsMap:D}=Ua(f,h,E);return C.forEach(S=>Be(S,p,w,I,h,T,x,D,b,f,m)),{scripts:w,instructions:I.instructions}};return{calculateConfig:async()=>{try{const{setConfig:f}=Yt.getState(),m=[...t,...a];console.log("Рассчет конфигурации:"),console.log(`  - Редактор 1: ${t.length} нод`),console.log(`  - Редактор 2: ${a.length} нод`);const{offsets:h,setpointOffsets:x,outputOffsetsStore:E,analogInputsOffsets:b}=g(m);Ft.getState().clearOscillographicOffsets();const I=Aa(),{scripts:w}=y(t,e,h,x,E,b,I);console.log(w);const{scripts:p,instructions:C}=y(a,i,h,x,E,b,I);console.log(p);const{oscillographicOffsetsFull:T}=Ft.getState(),D=Gt.getState().characteristicTypeData,S=Wa({scripts_1ms:w,scripts_250us:p,instructions:C,setpoints:be.getState().setpointsValues,indications:s,inputMatrixData:d,offsetsOsc:T,sms:r,smsWeb:l,phoneNumber:u,characteristics:D});console.log(S),f({...S}),q(`Конфигурация рассчитана! Редактор 1: ${w.length} скриптов, Редактор 2: ${p.length} скриптов`,{variant:"success"})}catch(f){throw q(f instanceof Error?f.message:"Ошибка сохранения",{variant:"error"}),f}},sendResConfig:()=>{const{config:f}=Yt.getState(),m=Qa(JSON.stringify(f),512);o("Отправка конфигурации..."),m.forEach((h,x)=>{console.log(h),setTimeout(()=>n(h),x*1e3)}),o("Конфигурация была отправлена!","in")}}},to=[{type:"analogInput",position:{x:0,y:0}},{type:"analogInput",position:{x:0,y:60}},{type:"analogInput",position:{x:0,y:120}},{type:"discreteOutput",position:{x:1500,y:0}},{type:"discreteOutput",position:{x:1500,y:60}},{type:"discreteOutput",position:{x:1500,y:120}},{type:"discreteOutput",position:{x:1500,y:180}},{type:"discreteOutput",position:{x:1500,y:240}}],eo=[{type:"analogInput",position:{x:0,y:0}},{type:"analogInput",position:{x:0,y:60}},{type:"analogInput",position:{x:0,y:120}},{type:"analogInput",position:{x:0,y:180}},{type:"analogInput",position:{x:0,y:240}},{type:"analogInput",position:{x:0,y:300}},{type:"discreteInput",position:{x:0,y:360}},{type:"discreteInput",position:{x:0,y:420}},{type:"discreteInput",position:{x:0,y:480}},{type:"discreteInput",position:{x:0,y:540}},{type:"discreteInput",position:{x:0,y:600}},{type:"discreteInput",position:{x:0,y:660}},{type:"discreteOutput",position:{x:1500,y:0}},{type:"discreteOutput",position:{x:1500,y:60}},{type:"discreteOutput",position:{x:1500,y:120}},{type:"discreteOutput",position:{x:1500,y:180}},{type:"discreteOutput",position:{x:1500,y:240}}],no=[{type:"analogInput",position:{x:0,y:0}},{type:"fifoWordWithoutEn",position:{x:530,y:-150}},{type:"fourierInt",position:{x:360,y:-5}},{type:"subInt",position:{x:750,y:-60}},{type:"constInt",position:{x:550,y:250}},{type:"constInt",position:{x:550,y:350}},{type:"moreInt",position:{x:970,y:-100}},{type:"lessInt",position:{x:970,y:100}},{type:"or",position:{x:1180,y:-50}},{type:"discreteOutput",position:{x:1400,y:0}}],fe={ikz:to,rza:eo,template1:no},ao=t=>{const e={type:t.type,inputHandles:t.inputHandles,outputHandles:t.outputHandles,...t.name&&{name:t.name}};return"lengthMemory"in t?{...e,lengthMemory:t.lengthMemory}:"digit"in t?{...e,digit:t.digit}:"setpointDataType"in t?{...e,setpointDataType:t.setpointDataType,setpointValue:t.setpointValue}:e},oo=(t,e)=>{const a=_n[t];if(!a)return q(`Неизвестный тип узла: ${t}`,{variant:"error"}),null;const i=ao(a);return i?{id:Tt(),type:"node",position:e,data:{...i}}:(q("Не удалось выделить память",{variant:"error"}),null)},io=()=>{const[t,e]=me(n=>[n.nodes,n.setNodes],rt);return{templatesKeys:xe(fe),addNodeByTemplate:n=>{const s=fe[n].reduce((r,l)=>{const u=oo(l.type,l.position);return u&&r.push(u),r},[]);e([...t,...s])}}},so=({})=>{const[t,e]=_.useState(""),{templatesKeys:a,addNodeByTemplate:i}=io(),n={ikz:"ИКЗ",rza:"РЗА",template1:"Шаблон икз2"};return c.jsx("div",{children:c.jsx(sn,{value:t,placeholder:"шаблоны",options:a.map(o=>({value:o,label:n[o]})),onChange:o=>{i(o),e(o)}})})},No=({nodes:t})=>{const{calculateConfig:e,sendResConfig:a}=Ja(),{cut:i,copy:n,paste:o,bufferedNodes:s}=De(),r=t.some(({selected:u})=>u),l=s.length>0;return c.jsxs(c.Fragment,{children:[c.jsx(Ot,{position:"top-left",children:c.jsx(so,{})}),c.jsxs(Ot,{position:"top-center",style:{display:"flex",gap:"10px"},children:[c.jsx(W,{text:"cut",type:"button",onClick:()=>i(),disabled:!r}),c.jsx(W,{text:"copy",type:"button",onClick:()=>n(),disabled:!r}),c.jsx(W,{text:"paste",type:"button",onClick:()=>o(),disabled:!l}),c.jsx(W,{text:"Рассчитать",type:"button",onClick:()=>e()}),c.jsx(W,{text:"Отправить",type:"button",onClick:()=>a()})]}),c.jsx(Ot,{position:"top-right",children:c.jsx(Pa,{})})]})};export{So as C,No as G,ko as S,To as a,_o as e,oo as g,Co as n,wo as p,Eo as s,Io as u};
