import{r as C,j as c,c as $,G as $e,R as O,a as Ve}from"./index-DLXaYNgL.js";import{u as L,a as ye,g as me,B as Re,E as Pe,P as W,b as be,c as We,d as Fe,H as Ae,e as Xt,N as ze,f as qe,C as Ke,o as Ue,i as Xe,l as Ge,h as Ye,j as Ze,t as Qe,F as Je,k as tn,m as en,n as Ot,p as Bt,q as nn,R as an,r as on,s as sn,v as rn}from"./index-BQ57Tzki.js";import{s as J}from"./shallow-96V0Rfcy.js";import{I as rt}from"./Input-C8sIWxw4.js";import{B as P}from"./Button-DAuiq6pN.js";import{i as ve,a as ln,u as xe}from"./store-pRvlggou.js";import{v as Nt,g as Ee}from"./helpers-fab74NUc.js";import{u as un}from"./store-zYwd_kOC.js";import{u as cn}from"./store-Dsl6ybKP.js";import{u as dn}from"./store-DWSq5v-B.js";import{u as qt}from"./store-CKDSzoYq.js";import{u as Jt}from"./store-RFtSGqxx.js";import{C as pn}from"./CustomSelect-DGEuSpA2.js";const fn="_popup_cjxb8_1",hn="_left_cjxb8_61",gn="_center_cjxb8_67",yn="_right_cjxb8_75",mn="_visible_cjxb8_81",bn="_popup__label_cjxb8_91",pt={popup:fn,"popup-content":"_popup-content_cjxb8_11",left:hn,center:gn,right:yn,visible:mn,popup__label:bn},vn=({text:t,children:e,position:a})=>{const[i,n]=C.useState(!1),o=C.useRef(null);C.useEffect(()=>{const r=l=>{o.current&&l.target instanceof Node&&!o.current.contains(l.target)&&n(!1)};return document.addEventListener("click",r),()=>{document.removeEventListener("click",r)}},[]);const s=r=>{r.stopPropagation(),n(l=>!l)};return c.jsxs("div",{className:pt.popup,ref:o,children:[c.jsx(P,{text:t,type:"button",onClick:s}),c.jsxs("div",{className:$(pt["popup-content"],pt[a],{[pt.visible]:i}),children:[c.jsx("div",{className:pt.popup__label,children:t}),c.jsx("div",{children:e})]})]})};function xn(t){return $e({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 294.1L383 167c9.4-9.4 24.6-9.4 33.9 0s9.3 24.6 0 34L273 345c-9.1 9.1-23.7 9.3-33.1.7L95 201.1c-4.7-4.7-7-10.9-7-17s2.3-12.3 7-17c9.4-9.4 24.6-9.4 33.9 0l127.1 127z"},child:[]}]})(t)}const En="_container_1y4rw_1",_n="_header_1y4rw_19",kn="_title_1y4rw_51",Cn="_arrow_1y4rw_63",In="_rotated_1y4rw_73",wn="_content_1y4rw_81",Tn="_innerContent_1y4rw_91",K={container:En,header:_n,title:kn,arrow:Cn,rotated:In,content:wn,innerContent:Tn},U=({name:t,children:e,defaultOpen:a=!1})=>{const[i,n]=C.useState(a),[o,s]=C.useState(0),r=C.useRef(null);C.useEffect(()=>{r.current&&s(r.current.scrollHeight)},[e]);const l=()=>{n(u=>!u)};return c.jsxs("div",{className:K.container,children:[c.jsxs("button",{className:K.header,onClick:l,"aria-expanded":i,children:[c.jsx("span",{className:K.title,children:t}),c.jsx(xn,{className:$(K.arrow,{[K.rotated]:i})})]}),c.jsx("div",{ref:r,className:K.content,style:{height:i?`${o}px`:"0px"},"aria-hidden":!i,children:c.jsx("div",{className:K.innerContent,children:e})})]})},Nn={"graph-editor":"_graph-editor_3h800_1"},Sn=t=>({nodes:t.nodes,edges:t.edges,onNodesChange:t.onNodesChange,onEdgesChange:t.onEdgesChange,addEdge:t.addEdge}),jn={discreteInput:{outputHandles:{out:{dataType:"bool"}},inputHandles:{},type:"discreteInput",name:""},discreteOutput:{inputHandles:{input:{dataType:"bool"}},outputHandles:{},type:"discreteOutput",name:""},analogInput:{outputHandles:{out:{dataType:"analog"}},inputHandles:{},type:"analogInput"},analogInputInt:{outputHandles:{out:{dataType:"int"}},inputHandles:{},type:"analogInputInt"},analogOutput:{inputHandles:{input:{dataType:"float"}},outputHandles:{},type:"analogOutput",name:""},xor:{inputHandles:{"input-1":{dataType:"bool"},"input-2":{dataType:"bool"}},outputHandles:{out:{dataType:"bool"}},type:"xor"},and:{inputHandles:{"input-1":{dataType:"bool"},"input-2":{dataType:"bool"}},outputHandles:{out:{dataType:"bool"}},type:"and"},or:{inputHandles:{"input-1":{dataType:"bool"},"input-2":{dataType:"bool"},"input-3":{dataType:"bool"}},outputHandles:{out:{dataType:"bool"}},type:"or"},nand:{inputHandles:{"input-1":{dataType:"bool"},"input-2":{dataType:"bool"},"input-3":{dataType:"bool"}},outputHandles:{out:{dataType:"bool"}},type:"nand"},nor:{inputHandles:{"input-1":{dataType:"bool"},"input-2":{dataType:"bool"},"input-3":{dataType:"bool"}},outputHandles:{out:{dataType:"bool"}},type:"nor"},notOperation:{inputHandles:{"input-1":{dataType:"bool"}},outputHandles:{out:{dataType:"bool"}},type:"notOperation"},sumInt:{inputHandles:{"input-1":{dataType:"int"},"input-2":{dataType:"int"}},outputHandles:{out:{dataType:"int"}},type:"sumInt"},multInt:{inputHandles:{"input-1":{dataType:"int"},"input-2":{dataType:"int"}},outputHandles:{out:{dataType:"int"}},type:"multInt"},divInt:{inputHandles:{"input-1":{dataType:"int"},"input-2":{dataType:"int"}},outputHandles:{out:{dataType:"int"}},type:"divInt"},subInt:{inputHandles:{"input-1":{dataType:"int"},"input-2":{dataType:"int"}},outputHandles:{out:{dataType:"int"}},type:"subInt"},equalsInt:{inputHandles:{"input-1":{dataType:"int"},"input-2":{dataType:"int"}},outputHandles:{out:{dataType:"bool"}},type:"equalsInt"},lessInt:{inputHandles:{"input-1":{dataType:"int"},"input-2":{dataType:"int"}},outputHandles:{out:{dataType:"bool"}},type:"lessInt"},moreInt:{inputHandles:{"input-1":{dataType:"int"},"input-2":{dataType:"int"}},outputHandles:{out:{dataType:"bool"}},type:"moreInt"},timerInt:{inputHandles:{},outputHandles:{out:{dataType:"int"}},setpointDataType:"int",setpointValue:0,type:"timerInt",name:""},risEdgeTimerBool:{inputHandles:{"input-1":{dataType:"bool"}},outputHandles:{out:{dataType:"bool"}},type:"risEdgeTimerBool",digit:0,name:""},constInt:{inputHandles:{},outputHandles:{out:{dataType:"int"}},setpointDataType:"int",setpointValue:0,type:"constInt",name:""},constBoolean:{inputHandles:{},outputHandles:{out:{dataType:"bool"}},setpointDataType:"int",setpointValue:0,type:"constBoolean",name:""},fourierInt:{inputHandles:{"input-1":{dataType:"analog"}},outputHandles:{"out-1":{dataType:"int"},"out-2":{dataType:"int"}},type:"fourierInt",setpointDataType:"int",setpointValue:[0,0,0,0]},fifoByte:{type:"fifoByte",lengthMemory:1,inputHandles:{"input-1":{dataType:"bool"},"input-2":{dataType:"bool"}},outputHandles:{"out-1":{dataType:"bool"}}},fifoWord:{type:"fifoWord",lengthMemory:1,inputHandles:{"input-1":{dataType:"int"},"input-2":{dataType:"bool"}},outputHandles:{"out-1":{dataType:"int"}}},fifoByteWithoutEn:{type:"fifoByteWithoutEn",lengthMemory:1,inputHandles:{"input-1":{dataType:"bool"}},outputHandles:{"out-1":{dataType:"bool"}}},fifoWordWithoutEn:{type:"fifoWordWithoutEn",lengthMemory:1,inputHandles:{"input-1":{dataType:"int"}},outputHandles:{"out-1":{dataType:"int"}}},dtrigger:{inputHandles:{},outputHandles:{out:{dataType:"bool"}},type:"dtrigger"}},Q={discreteInput:{0:{instruction:[34,12,131,199,5,0,35,0,245,0,130,128],lengthInBytes:12,in_type:33}},discreteOutput:{1:{instruction:[34,12,131,199,5,0,35,0,245,0,130,128],lengthInBytes:12,in_type:30}},analogInput:{0:{instruction:[34,12,131,199,5,0,35,0,245,0,130,128],lengthInBytes:12,in_type:33}},analogInputInt:{0:{instruction:[34,12,131,199,5,0,35,0,245,0,130,128],lengthInBytes:12,in_type:34}},analogOutput:{},dtrigger:{},multInt:{2:{instruction:[34,12,156,65,24,66,179,135,231,2,28,193,130,128],lengthInBytes:14,in_type:8}},divInt:{2:{instruction:[34,12,156,65,24,66,179,135,231,2,28,193,130,128],lengthInBytes:14,in_type:45}},subInt:{2:{instruction:[34,12,156,65,24,66,153,143,28,193,130,128],lengthInBytes:12,in_type:8}},sumInt:{2:{instruction:[34,12,156,65,24,66,186,151,28,193,130,128],lengthInBytes:12,in_type:8},3:{instruction:[130,128,24,66,156,65,186,151,152,66,186,151,28,193,130,128],lengthInBytes:16,in_type:9},4:{instruction:[130,128,156,65,16,66,148,66,24,67,178,151,182,151,186,151,28,193,130,128],lengthInBytes:20,in_type:10},5:{instruction:[130,128,140,65,16,66,148,66,24,67,156,67,178,149,182,149,186,149,190,149,12,193,130,128],lengthInBytes:24,in_type:11},6:{instruction:[130,128,140,65,16,66,148,66,24,67,156,67,178,149,182,149,186,149,190,149,131,39,8,0,190,149,12,193,130,128],lengthInBytes:30,in_type:12},7:{instruction:[130,128,140,65,16,66,148,66,24,67,156,67,178,149,182,149,186,149,190,149,131,39,8,0,190,149,131,167,8,0,190,149,12,193,130,128],lengthInBytes:36,in_type:13}},notOperation:{1:{instruction:[34,12,131,199,5,0,147,199,23,0,35,0,245,0,130,128],lengthInBytes:16,in_type:1}},and:{2:{instruction:[34,12,131,199,5,0,3,71,6,0,249,143,35,0,245,0,130,128],lengthInBytes:18,in_type:2},3:{instruction:[130,128,3,199,6,0,131,71,6,0,249,143,3,199,5,0,249,143,35,0,245,0,130,128],lengthInBytes:24,in_type:3},4:{instruction:[130,128,3,71,7,0,131,199,6,0,249,143,3,71,6,0,249,143,3,199,5,0,249,143,35,0,245,0,130,128],lengthInBytes:30,in_type:4},5:{instruction:[130,128,131,199,7,0,3,71,7,0,125,143,131,199,6,0,125,143,131,71,6,0,125,143,131,199,5,0,125,143,35,0,229,0,130,128],lengthInBytes:36,in_type:5},6:{instruction:[130,128,131,199,7,0,3,72,8,0,3,71,7,0,179,247,7,1,249,143,3,199,6,0,249,143,3,71,6,0,249,143,3,199,5,0,249,143,35,0,245,0,130,128],lengthInBytes:44,in_type:6},7:{instruction:[130,128,3,72,8,0,131,200,8,0,131,199,7,0,51,120,24,1,51,120,248,0,131,71,7,0,51,120,248,0,131,199,6,0,51,120,248,0,131,71,6,0,51,120,248,0,131,199,5,0,51,120,248,0,35,0,5,1,130,128],lengthInBytes:60,in_type:7}},nand:{2:{instruction:[34,12,131,199,5,0,3,71,6,0,249,143,147,199,23,0,35,0,245,0,130,128],lengthInBytes:22,in_type:2},3:{instruction:[130,128,3,199,6,0,131,71,6,0,249,143,3,199,5,0,249,143,147,199,23,0,35,0,245,0,130,128],lengthInBytes:28,in_type:3},4:{instruction:[130,128,3,71,7,0,131,199,6,0,249,143,3,71,6,0,249,143,3,199,5,0,249,143,147,199,23,0,35,0,245,0,130,128],lengthInBytes:34,in_type:4},5:{instruction:[130,128,131,199,7,0,3,71,7,0,125,143,131,199,6,0,125,143,131,71,6,0,125,143,131,199,5,0,125,143,19,71,23,0,35,0,229,0,130,128],lengthInBytes:40,in_type:5},6:{instruction:[130,128,131,199,7,0,3,72,8,0,3,71,7,0,179,247,7,1,249,143,3,199,6,0,249,143,3,71,6,0,249,143,3,199,5,0,249,143,147,199,23,0,35,0,245,0,130,128],lengthInBytes:48,in_type:6},7:{instruction:[130,128,3,72,8,0,131,200,8,0,131,199,7,0,51,120,24,1,51,120,248,0,131,71,7,0,51,120,248,0,131,199,6,0,51,120,248,0,131,71,6,0,51,120,248,0,131,199,5,0,51,120,248,0,19,72,24,0,35,0,5,1,130,128],lengthInBytes:64,in_type:7}},nor:{2:{instruction:[34,12,131,199,5,0,3,71,6,0,249,143,147,199,23,0,35,0,245,0,130,128],lengthInBytes:22,in_type:2},3:{instruction:[130,128,3,199,6,0,131,71,6,0,249,143,3,199,5,0,249,143,147,199,23,0,35,0,245,0,130,128],lengthInBytes:28,in_type:3},4:{instruction:[130,128,3,71,7,0,131,199,6,0,249,143,3,71,6,0,249,143,3,199,5,0,249,143,147,199,23,0,35,0,245,0,130,128],lengthInBytes:34,in_type:4},5:{instruction:[130,128,131,199,7,0,3,71,7,0,125,143,131,199,6,0,125,143,131,71,6,0,125,143,131,199,5,0,125,143,19,71,23,0,35,0,229,0,130,128],lengthInBytes:40,in_type:5},6:{instruction:[130,128,131,199,7,0,3,72,8,0,3,71,7,0,179,247,7,1,249,143,3,199,6,0,249,143,3,71,6,0,249,143,3,199,5,0,249,143,147,199,23,0,35,0,245,0,130,128],lengthInBytes:48,in_type:6},7:{instruction:[130,128,3,72,8,0,131,200,8,0,131,199,7,0,51,120,24,1,51,120,248,0,131,71,7,0,51,120,248,0,131,199,6,0,51,120,248,0,131,71,6,0,51,120,248,0,131,199,5,0,51,120,248,0,19,72,24,0,35,0,5,1,130,128],lengthInBytes:64,in_type:7}},or:{2:{instruction:[34,12,131,199,5,0,3,71,6,0,217,143,35,0,245,0,130,128],lengthInBytes:18,in_type:2},3:{instruction:[130,128,3,199,6,0,131,71,6,0,217,143,3,199,5,0,217,143,35,0,245,0,130,128],lengthInBytes:24,in_type:3},4:{instruction:[130,128,3,71,7,0,131,199,6,0,217,143,3,71,6,0,217,143,3,199,5,0,217,143,35,0,245,0,130,128],lengthInBytes:30,in_type:4},5:{instruction:[130,128,131,199,7,0,3,71,7,0,93,143,131,199,6,0,93,143,131,71,6,0,93,143,131,199,5,0,93,143,35,0,229,0,130,128],lengthInBytes:36,in_type:5},6:{instruction:[130,128,131,199,7,0,3,72,8,0,3,71,7,0,179,231,7,1,217,143,3,199,6,0,217,143,3,71,6,0,217,143,3,199,5,0,217,143,35,0,245,0,130,128],lengthInBytes:44,in_type:6},7:{instruction:[130,128,3,72,8,0,131,200,8,0,131,199,7,0,51,104,24,1,51,104,248,0,131,71,7,0,51,104,248,0,131,199,6,0,51,104,248,0,131,71,6,0,51,104,248,0,131,199,5,0,51,104,248,0,35,0,5,1,130,128],lengthInBytes:60,in_type:7}},xor:{2:{instruction:[34,12,131,199,5,0,3,71,6,0,185,143,35,0,245,0,130,128],lengthInBytes:18,in_type:2},3:{instruction:[130,128,3,199,6,0,131,71,6,0,185,143,3,199,5,0,185,143,35,0,245,0,130,128],lengthInBytes:24,in_type:3},4:{instruction:[130,128,3,71,7,0,131,199,6,0,185,143,3,71,6,0,185,143,3,199,5,0,185,143,35,0,245,0,130,128],lengthInBytes:30,in_type:4},5:{instruction:[130,128,131,199,7,0,3,71,7,0,61,143,131,199,6,0,61,143,131,71,6,0,61,143,131,199,5,0,61,143,35,0,229,0,130,128],lengthInBytes:36,in_type:5},6:{instruction:[130,128,131,199,7,0,3,72,8,0,3,71,7,0,179,199,7,1,185,143,3,199,6,0,185,143,3,71,6,0,185,143,3,199,5,0,185,143,35,0,245,0,130,128],lengthInBytes:44,in_type:6},7:{instruction:[130,128,3,72,8,0,131,200,8,0,131,199,7,0,51,72,24,1,51,72,248,0,131,71,7,0,51,72,248,0,131,199,6,0,51,72,248,0,131,71,6,0,51,72,248,0,131,199,5,0,51,72,248,0,35,0,5,1,130,128],lengthInBytes:60,in_type:7}},equalsInt:{2:{instruction:[34,12,152,65,28,66,35,0,5,0,99,21,247,0,133,71,35,0,245,0,130,128],lengthInBytes:22,in_type:26}},equalsFloat:{},moreInt:{2:{instruction:[34,12,152,65,28,66,35,0,5,0,99,213,231,0,133,71,35,0,245,0,130,128],lengthInBytes:22,in_type:26}},moreFloat:{},lessInt:{2:{instruction:[34,12,152,65,28,66,35,0,5,0,99,85,247,0,133,71,35,0,245,0,130,128],lengthInBytes:22,in_type:26}},lessFloat:{},constInt:{0:{instruction:[34,12,156,65,28,193,130,128],lengthInBytes:8,in_type:28}},constBoolean:{0:{instruction:[34,12,131,199,5,0,35,0,245,0,130,128],lengthInBytes:8,in_type:29}},timerInt:{0:{instruction:[34,12,28,65,133,7,28,193,152,65,99,84,247,0,35,32,5,0,130,128],lengthInBytes:20,in_type:27}},risEdgeTimerBool:{1:{instruction:[34,12,28,65,133,7,28,193,152,65,99,84,247,0,35,32,5,0,130,128],lengthInBytes:20,in_type:46}},fourierInt:{1:{instruction:[],lengthInBytes:0,in_type:36},2:{instruction:[],lengthInBytes:0,in_type:37},3:{instruction:[],lengthInBytes:0,in_type:38}},fifoByte:{2:{instruction:[3,71,7,0,13,195,152,67,99,100,183,0,35,160,7,0,131,198,6,0,152,67,42,151,35,0,215,0,152,67,5,7,99,122,183,0,152,195,156,67,62,149,131,71,5,0,35,0,246,0,130,128,35,160,7,0,253,183,130,128],lengthInBytes:60,in_type:41}},fifoWord:{2:{instruction:[3,71,7,0,5,195,152,67,99,100,183,0,35,160,7,0,148,66,152,67,51,71,167,32,20,195,152,67,5,7,99,121,183,0,152,195,156,67,51,197,167,32,28,65,28,194,130,128,35,160,7,0,197,191,130,128],lengthInBytes:56,in_type:42}},fifoByteWithoutEn:{1:{instruction:[28,67,99,228,183,0,35,32,7,0,148,66,28,67,179,199,167,32,148,195,20,67,147,135,22,0,179,181,183,0,179,5,176,64,237,143,28,195,179,199,167,32,156,67,28,194,130,128],lengthInBytes:48,in_type:43}},fifoWordWithoutEn:{1:{instruction:[28,67,99,228,183,0,35,32,7,0,131,198,6,0,28,67,170,151,35,128,215,0,28,67,133,7,179,181,183,0,179,5,176,64,237,143,28,195,62,149,131,71,5,0,35,0,246,0,130,128],lengthInBytes:50,in_type:44}}},ut={bool:{clr:"#00ff00",selectedClr:"#08d508"},int:{clr:"#368ff4",selectedClr:"#2b79d2"},float:{clr:"#ffe417",selectedClr:"#ead219"},analog:{clr:"#cd1fe8",selectedClr:"#ab2cbe"}},On={bool:void 0,analog:void 0,int:"circle",float:"arrow-closed"},Lt={"button-edge__label":"_button-edge__label_t1jz9_1","button-txt":"_button-txt_t1jz9_55",delete:"_delete_t1jz9_81"},Dn=({id:t,source:e,sourceHandleId:a,sourceX:i,sourceY:n,targetX:o,targetY:s,selected:r,sourcePosition:l=W.Right,targetPosition:u=W.Left})=>{var b,w,N,B;const{getEdge:d,setEdges:m}=L(),y=ye(j=>j.nodeLookup.get(e),J),f=d(t);if(!y||!f||!a)return null;const h=a.split(" ")[1],g=y.data.outputHandles[h];if(!g)return null;const{dataType:v}=g,[p,E,_]=me({sourceX:i,sourceY:n,targetX:o,targetY:s,sourcePosition:l,targetPosition:u,borderRadius:8,offset:17}),k=r?(b=ut[v])==null?void 0:b.selectedClr:(w=ut[v])==null?void 0:w.clr,x=On[v],I=()=>{m(j=>j.filter(T=>T.id!==f.id))};return c.jsxs(c.Fragment,{children:[c.jsxs("defs",{children:[c.jsx("marker",{id:"circle",viewBox:"0 0 10 10",refX:9,refY:5,markerWidth:7,markerHeight:7,orient:"auto-start-reverse",children:c.jsx("circle",{cx:"6",cy:"5",r:"3",fill:(N=ut.int)==null?void 0:N.clr})}),c.jsx("marker",{id:"arrow-closed",viewBox:"0 0 10 10",refX:10,refY:5,markerWidth:8,markerHeight:8,orient:"auto-start-reverse",children:c.jsx("path",{d:"M 0 0 L 10 5 L 0 10 Z",fill:(B=ut.float)==null?void 0:B.clr})})]}),c.jsx(Re,{id:t,path:p,style:{stroke:k,strokeWidth:3},markerEnd:x?`url(#${x})`:void 0}),r&&c.jsx(Pe,{children:c.jsx("div",{className:$(Lt["button-edge__label"],"nodrag","nopan"),style:{transform:`translate(-50%, -140%) translate(${E}px,${_}px)`},children:c.jsx("button",{className:$(Lt["button-txt"],Lt.delete),onClick:I,children:"Удалить"})})})]})};function _e(t){var e,a,i="";if(typeof t=="string"||typeof t=="number")i+=t;else if(typeof t=="object")if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(a=_e(t[e]))&&(i&&(i+=" "),i+=a);else for(e in t)t[e]&&(i&&(i+=" "),i+=e);return i}function nt(){for(var t,e,a=0,i="";a<arguments.length;)(t=arguments[a++])&&(e=_e(t))&&(i&&(i+=" "),i+=e);return i}let Hn={data:""},Bn=t=>typeof window=="object"?((t?t.querySelector("#_goober"):window._goober)||Object.assign((t||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:t||Hn,Ln=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,Mn=/\/\*[^]*?\*\/|  +/g,te=/\n+/g,Z=(t,e)=>{let a="",i="",n="";for(let o in t){let s=t[o];o[0]=="@"?o[1]=="i"?a=o+" "+s+";":i+=o[1]=="f"?Z(s,o):o+"{"+Z(s,o[1]=="k"?"":e)+"}":typeof s=="object"?i+=Z(s,e?e.replace(/([^,])+/g,r=>o.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,l=>/&/.test(l)?l.replace(/&/g,r):r?r+" "+l:l)):o):s!=null&&(o=/^--/.test(o)?o:o.replace(/[A-Z]/g,"-$&").toLowerCase(),n+=Z.p?Z.p(o,s):o+":"+s+";")}return a+(e&&n?e+"{"+n+"}":n)+i},V={},ke=t=>{if(typeof t=="object"){let e="";for(let a in t)e+=a+ke(t[a]);return e}return t},$n=(t,e,a,i,n)=>{let o=ke(t),s=V[o]||(V[o]=(l=>{let u=0,d=11;for(;u<l.length;)d=101*d+l.charCodeAt(u++)>>>0;return"go"+d})(o));if(!V[s]){let l=o!==t?t:(u=>{let d,m,y=[{}];for(;d=Ln.exec(u.replace(Mn,""));)d[4]?y.shift():d[3]?(m=d[3].replace(te," ").trim(),y.unshift(y[0][m]=y[0][m]||{})):y[0][d[1]]=d[2].replace(te," ").trim();return y[0]})(t);V[s]=Z(n?{["@keyframes "+s]:l}:l,a?"":"."+s)}let r=a&&V.g?V.g:null;return a&&(V.g=V[s]),((l,u,d,m)=>{m?u.data=u.data.replace(m,l):u.data.indexOf(l)===-1&&(u.data=d?l+u.data:u.data+l)})(V[s],e,i,r),s},Vn=(t,e,a)=>t.reduce((i,n,o)=>{let s=e[o];if(s&&s.call){let r=s(a),l=r&&r.props&&r.props.className||/^go/.test(r)&&r;s=l?"."+l:r&&typeof r=="object"?r.props?"":Z(r,""):r===!1?"":r}return i+n+(s??"")},"");function Gt(t){let e=this||{},a=t.call?t(e.p):t;return $n(a.unshift?a.raw?Vn(a,[].slice.call(arguments,1),e.p):a.reduce((i,n)=>Object.assign(i,n&&n.call?n(e.p):n),{}):a,Bn(e.target),e.g,e.o,e.k)}Gt.bind({g:1});Gt.bind({k:1});function Rn(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Ce(t,e,a){return e&&Rn(t.prototype,e),t}function S(){return S=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(t[i]=a[i])}return t},S.apply(this,arguments)}function Ie(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function vt(t,e){if(t==null)return{};var a={},i=Object.keys(t),n,o;for(o=0;o<i.length;o++)n=i[o],!(e.indexOf(n)>=0)&&(a[n]=t[n]);return a}function ee(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var ne=function(){return""},we=O.createContext({enqueueSnackbar:ne,closeSnackbar:ne}),Y={downXs:"@media (max-width:599.95px)",upSm:"@media (min-width:600px)"},ae=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},Yt=function(e){return""+ae(e.vertical)+ae(e.horizontal)},_t=function(e){return!!e||e===0},kt="unmounted",at="exited",ot="entering",ft="entered",oe="exiting",Zt=function(t){Ie(e,t);function e(i){var n;n=t.call(this,i)||this;var o=i.appear,s;return n.appearStatus=null,i.in?o?(s=at,n.appearStatus=ot):s=ft:i.unmountOnExit||i.mountOnEnter?s=kt:s=at,n.state={status:s},n.nextCallback=null,n}e.getDerivedStateFromProps=function(n,o){var s=n.in;return s&&o.status===kt?{status:at}:null};var a=e.prototype;return a.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},a.componentDidUpdate=function(n){var o=null;if(n!==this.props){var s=this.state.status;this.props.in?s!==ot&&s!==ft&&(o=ot):(s===ot||s===ft)&&(o=oe)}this.updateStatus(!1,o)},a.componentWillUnmount=function(){this.cancelNextCallback()},a.getTimeouts=function(){var n=this.props.timeout,o=n,s=n;return n!=null&&typeof n!="number"&&typeof n!="string"&&(s=n.exit,o=n.enter),{exit:s,enter:o}},a.updateStatus=function(n,o){n===void 0&&(n=!1),o!==null?(this.cancelNextCallback(),o===ot?this.performEnter(n):this.performExit()):this.props.unmountOnExit&&this.state.status===at&&this.setState({status:kt})},a.performEnter=function(n){var o=this,s=this.props.enter,r=n,l=this.getTimeouts();if(!n&&!s){this.safeSetState({status:ft},function(){o.props.onEntered&&o.props.onEntered(o.node,r)});return}this.props.onEnter&&this.props.onEnter(this.node,r),this.safeSetState({status:ot},function(){o.props.onEntering&&o.props.onEntering(o.node,r),o.onTransitionEnd(l.enter,function(){o.safeSetState({status:ft},function(){o.props.onEntered&&o.props.onEntered(o.node,r)})})})},a.performExit=function(){var n=this,o=this.props.exit,s=this.getTimeouts();if(!o){this.safeSetState({status:at},function(){n.props.onExited&&n.props.onExited(n.node)});return}this.props.onExit&&this.props.onExit(this.node),this.safeSetState({status:oe},function(){n.props.onExiting&&n.props.onExiting(n.node),n.onTransitionEnd(s.exit,function(){n.safeSetState({status:at},function(){n.props.onExited&&n.props.onExited(n.node)})})})},a.cancelNextCallback=function(){this.nextCallback!==null&&this.nextCallback.cancel&&(this.nextCallback.cancel(),this.nextCallback=null)},a.safeSetState=function(n,o){o=this.setNextCallback(o),this.setState(n,o)},a.setNextCallback=function(n){var o=this,s=!0;return this.nextCallback=function(){s&&(s=!1,o.nextCallback=null,n())},this.nextCallback.cancel=function(){s=!1},this.nextCallback},a.onTransitionEnd=function(n,o){this.setNextCallback(o);var s=n==null&&!this.props.addEndListener;if(!this.node||s){setTimeout(this.nextCallback,0);return}this.props.addEndListener&&this.props.addEndListener(this.node,this.nextCallback),n!=null&&setTimeout(this.nextCallback,n)},a.render=function(){var n=this.state.status;if(n===kt)return null;var o=this.props,s=o.children,r=vt(o,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return s(n,r)},Ce(e,[{key:"node",get:function(){var n,o=(n=this.props.nodeRef)===null||n===void 0?void 0:n.current;if(!o)throw new Error("notistack - Custom snackbar is not refForwarding");return o}}]),e}(O.Component);function it(){}Zt.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:it,onEntering:it,onEntered:it,onExit:it,onExiting:it,onExited:it};function ie(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function Kt(t,e){return C.useMemo(function(){return t==null&&e==null?null:function(a){ie(t,a),ie(e,a)}},[t,e])}function jt(t){var e=t.timeout,a=t.style,i=a===void 0?{}:a,n=t.mode;return{duration:typeof e=="object"?e[n]||0:e,easing:i.transitionTimingFunction,delay:i.transitionDelay}}var Ut={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},Te=function(e){e.scrollTop=e.scrollTop},se=function(e){return Math.round(e)+"ms"};function ct(t,e){t===void 0&&(t=["all"]);var a=e||{},i=a.duration,n=i===void 0?300:i,o=a.easing,s=o===void 0?Ut.easeInOut:o,r=a.delay,l=r===void 0?0:r,u=Array.isArray(t)?t:[t];return u.map(function(d){var m=typeof n=="string"?n:se(n),y=typeof l=="string"?l:se(l);return d+" "+m+" "+s+" "+y}).join(",")}function Pn(t){return t&&t.ownerDocument||document}function Ne(t){var e=Pn(t);return e.defaultView||window}function Wn(t,e){e===void 0&&(e=166);var a;function i(){for(var n=this,o=arguments.length,s=new Array(o),r=0;r<o;r++)s[r]=arguments[r];var l=function(){t.apply(n,s)};clearTimeout(a),a=setTimeout(l,e)}return i.clear=function(){clearTimeout(a)},i}function Fn(t,e){var a=e.getBoundingClientRect(),i=Ne(e),n;if(e.fakeTransform)n=e.fakeTransform;else{var o=i.getComputedStyle(e);n=o.getPropertyValue("-webkit-transform")||o.getPropertyValue("transform")}var s=0,r=0;if(n&&n!=="none"&&typeof n=="string"){var l=n.split("(")[1].split(")")[0].split(",");s=parseInt(l[4],10),r=parseInt(l[5],10)}switch(t){case"left":return"translateX("+(i.innerWidth+s-a.left)+"px)";case"right":return"translateX(-"+(a.left+a.width-s)+"px)";case"up":return"translateY("+(i.innerHeight+r-a.top)+"px)";default:return"translateY(-"+(a.top+a.height-r)+"px)"}}function Ct(t,e){if(e){var a=Fn(t,e);a&&(e.style.webkitTransform=a,e.style.transform=a)}}var Se=C.forwardRef(function(t,e){var a=t.children,i=t.direction,n=i===void 0?"down":i,o=t.in,s=t.style,r=t.timeout,l=r===void 0?0:r,u=t.onEnter,d=t.onEntered,m=t.onExit,y=t.onExited,f=vt(t,["children","direction","in","style","timeout","onEnter","onEntered","onExit","onExited"]),h=C.useRef(null),g=Kt(a.ref,h),v=Kt(g,e),p=function(b,w){Ct(n,b),Te(b),u&&u(b,w)},E=function(b){var w=(s==null?void 0:s.transitionTimingFunction)||Ut.easeOut,N=jt({timeout:l,mode:"enter",style:S({},s,{transitionTimingFunction:w})});b.style.webkitTransition=ct("-webkit-transform",N),b.style.transition=ct("transform",N),b.style.webkitTransform="none",b.style.transform="none"},_=function(b){var w=(s==null?void 0:s.transitionTimingFunction)||Ut.sharp,N=jt({timeout:l,mode:"exit",style:S({},s,{transitionTimingFunction:w})});b.style.webkitTransition=ct("-webkit-transform",N),b.style.transition=ct("transform",N),Ct(n,b),m&&m(b)},k=function(b){b.style.webkitTransition="",b.style.transition="",y&&y(b)},x=C.useCallback(function(){h.current&&Ct(n,h.current)},[n]);return C.useEffect(function(){if(!(o||n==="down"||n==="right")){var I=Wn(function(){h.current&&Ct(n,h.current)}),b=Ne(h.current);return b.addEventListener("resize",I),function(){I.clear(),b.removeEventListener("resize",I)}}},[n,o]),C.useEffect(function(){o||x()},[o,x]),C.createElement(Zt,Object.assign({appear:!0,nodeRef:h,onEnter:p,onEntered:d,onEntering:E,onExit:_,onExited:k,in:o,timeout:l},f),function(I,b){return C.cloneElement(a,S({ref:v,style:S({visibility:I==="exited"&&!o?"hidden":void 0},s,{},a.props.style)},b))})});Se.displayName="Slide";var Dt=function(e){return O.createElement("svg",Object.assign({viewBox:"0 0 24 24",focusable:"false",style:{fontSize:20,marginInlineEnd:8,userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:"currentColor",flexShrink:0}},e))},An=function(){return O.createElement(Dt,null,O.createElement("path",{d:`M12 2C6.5 2 2 6.5 2 12S6.5 22 12 22 22 17.5 22 12 17.5 2 12 2M10 17L5 12L6.41
        10.59L10 14.17L17.59 6.58L19 8L10 17Z`}))},zn=function(){return O.createElement(Dt,null,O.createElement("path",{d:"M13,14H11V10H13M13,18H11V16H13M1,21H23L12,2L1,21Z"}))},qn=function(){return O.createElement(Dt,null,O.createElement("path",{d:`M12,2C17.53,2 22,6.47 22,12C22,17.53 17.53,22 12,22C6.47,22 2,17.53 2,12C2,
        6.47 6.47,2 12,2M15.59,7L12,10.59L8.41,7L7,8.41L10.59,12L7,15.59L8.41,17L12,
        13.41L15.59,17L17,15.59L13.41,12L17,8.41L15.59,7Z`}))},Kn=function(){return O.createElement(Dt,null,O.createElement("path",{d:`M13,9H11V7H13M13,17H11V11H13M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,
        0 22,12A10,10 0 0,0 12,2Z`}))},Un={default:void 0,success:O.createElement(An,null),warning:O.createElement(zn,null),error:O.createElement(qn,null),info:O.createElement(Kn,null)},tt={maxSnack:3,persist:!1,hideIconVariant:!1,disableWindowBlurListener:!1,variant:"default",autoHideDuration:5e3,iconVariant:Un,anchorOrigin:{vertical:"bottom",horizontal:"left"},TransitionComponent:Se,transitionDuration:{enter:225,exit:195}},Xn=function(e,a){var i=function(o){return typeof o=="number"||o===null};return i(e)?e:i(a)?a:tt.autoHideDuration},Gn=function(e,a){var i=function(o,s){return s.some(function(r){return typeof o===r})};return i(e,["string","number"])?e:i(e,["object"])?S({},tt.transitionDuration,{},i(a,["object"])&&a,{},e):i(a,["string","number"])?a:i(a,["object"])?S({},tt.transitionDuration,{},a):tt.transitionDuration},Yn=function(e,a){return function(i,n){return n===void 0&&(n=!1),n?S({},tt[i],{},a[i],{},e[i]):i==="autoHideDuration"?Xn(e.autoHideDuration,a.autoHideDuration):i==="transitionDuration"?Gn(e.transitionDuration,a.transitionDuration):e[i]||a[i]||tt[i]}};function xt(t){return Object.entries(t).reduce(function(e,a){var i,n=a[0],o=a[1];return S({},e,(i={},i[n]=Gt(o),i))},{})}var dt={SnackbarContainer:"notistack-SnackbarContainer",Snackbar:"notistack-Snackbar",CollapseWrapper:"notistack-CollapseWrapper",MuiContent:"notistack-MuiContent",MuiContentVariant:function(e){return"notistack-MuiContent-"+e}},re=xt({root:{height:0},entered:{height:"auto"}}),Mt="0px",$t=175,je=C.forwardRef(function(t,e){var a=t.children,i=t.in,n=t.onExited,o=C.useRef(null),s=C.useRef(null),r=Kt(e,s),l=function(){return o.current?o.current.clientHeight:0},u=function(g){g.style.height=Mt},d=function(g){var v=l(),p=jt({timeout:$t,mode:"enter"}),E=p.duration,_=p.easing;g.style.transitionDuration=typeof E=="string"?E:E+"ms",g.style.height=v+"px",g.style.transitionTimingFunction=_||""},m=function(g){g.style.height="auto"},y=function(g){g.style.height=l()+"px"},f=function(g){Te(g);var v=jt({timeout:$t,mode:"exit"}),p=v.duration,E=v.easing;g.style.transitionDuration=typeof p=="string"?p:p+"ms",g.style.height=Mt,g.style.transitionTimingFunction=E||""};return C.createElement(Zt,{in:i,unmountOnExit:!0,onEnter:u,onEntered:m,onEntering:d,onExit:y,onExited:n,onExiting:f,nodeRef:s,timeout:$t},function(h,g){return C.createElement("div",Object.assign({ref:r,className:nt(re.root,h==="entered"&&re.entered),style:S({pointerEvents:"all",overflow:"hidden",minHeight:Mt,transition:ct("height")},h==="entered"&&{overflow:"visible"},{},h==="exited"&&!i&&{visibility:"hidden"})},g),C.createElement("div",{ref:o,className:dt.CollapseWrapper,style:{display:"flex",width:"100%"}},a))})});je.displayName="Collapse";var le={right:"left",left:"right",bottom:"up",top:"down"},Zn=function(e){return e.horizontal!=="center"?le[e.horizontal]:le[e.vertical]},Qn=function(e){return"anchorOrigin"+Yt(e)},Jn=function(e){e===void 0&&(e={});var a={containerRoot:!0,containerAnchorOriginTopCenter:!0,containerAnchorOriginBottomCenter:!0,containerAnchorOriginTopRight:!0,containerAnchorOriginBottomRight:!0,containerAnchorOriginTopLeft:!0,containerAnchorOriginBottomLeft:!0};return Object.keys(e).filter(function(i){return!a[i]}).reduce(function(i,n){var o;return S({},i,(o={},o[n]=e[n],o))},{})},ta=function(){};function bt(t,e){return t.reduce(function(a,i){return i==null?a:function(){for(var o=arguments.length,s=new Array(o),r=0;r<o;r++)s[r]=arguments[r];var l=[].concat(s);e&&l.indexOf(e)===-1&&l.push(e),a.apply(this,l),i.apply(this,l)}},ta)}var ea=typeof window<"u"?C.useLayoutEffect:C.useEffect;function ue(t){var e=C.useRef(t);return ea(function(){e.current=t}),C.useCallback(function(){return e.current.apply(void 0,arguments)},[])}var Oe=C.forwardRef(function(t,e){var a=t.children,i=t.className,n=t.autoHideDuration,o=t.disableWindowBlurListener,s=o===void 0?!1:o,r=t.onClose,l=t.id,u=t.open,d=t.SnackbarProps,m=d===void 0?{}:d,y=C.useRef(),f=ue(function(){r&&r.apply(void 0,arguments)}),h=ue(function(_){!r||_==null||(y.current&&clearTimeout(y.current),y.current=setTimeout(function(){f(null,"timeout",l)},_))});C.useEffect(function(){return u&&h(n),function(){y.current&&clearTimeout(y.current)}},[u,n,h]);var g=function(){y.current&&clearTimeout(y.current)},v=C.useCallback(function(){n!=null&&h(n*.5)},[n,h]),p=function(k){m.onMouseEnter&&m.onMouseEnter(k),g()},E=function(k){m.onMouseLeave&&m.onMouseLeave(k),v()};return C.useEffect(function(){if(!s&&u)return window.addEventListener("focus",v),window.addEventListener("blur",g),function(){window.removeEventListener("focus",v),window.removeEventListener("blur",g)}},[s,v,u]),C.createElement("div",Object.assign({ref:e},m,{className:nt(dt.Snackbar,i),onMouseEnter:p,onMouseLeave:E}),a)});Oe.displayName="Snackbar";var Vt,na=xt({root:(Vt={display:"flex",flexWrap:"wrap",flexGrow:1},Vt[Y.upSm]={flexGrow:"initial",minWidth:"288px"},Vt)}),De=C.forwardRef(function(t,e){var a=t.className,i=vt(t,["className"]);return O.createElement("div",Object.assign({ref:e,className:nt(na.root,a)},i))});De.displayName="SnackbarContent";var ht=xt({root:{backgroundColor:"#313131",fontSize:"0.875rem",lineHeight:1.43,letterSpacing:"0.01071em",color:"#fff",alignItems:"center",padding:"6px 16px",borderRadius:"4px",boxShadow:"0px 3px 5px -1px rgba(0,0,0,0.2),0px 6px 10px 0px rgba(0,0,0,0.14),0px 1px 18px 0px rgba(0,0,0,0.12)"},lessPadding:{paddingLeft:8*2.5+"px"},default:{backgroundColor:"#313131"},success:{backgroundColor:"#43a047"},error:{backgroundColor:"#d32f2f"},warning:{backgroundColor:"#ff9800"},info:{backgroundColor:"#2196f3"},message:{display:"flex",alignItems:"center",padding:"8px 0"},action:{display:"flex",alignItems:"center",marginLeft:"auto",paddingLeft:"16px",marginRight:"-8px"}}),ce="notistack-snackbar",He=C.forwardRef(function(t,e){var a=t.id,i=t.message,n=t.action,o=t.iconVariant,s=t.variant,r=t.hideIconVariant,l=t.style,u=t.className,d=o[s],m=n;return typeof m=="function"&&(m=m(a)),O.createElement(De,{ref:e,role:"alert","aria-describedby":ce,style:l,className:nt(dt.MuiContent,dt.MuiContentVariant(s),ht.root,ht[s],u,!r&&d&&ht.lessPadding)},O.createElement("div",{id:ce,className:ht.message},r?null:d,i),m&&O.createElement("div",{className:ht.action},m))});He.displayName="MaterialDesignContent";var aa=C.memo(He),oa=xt({wrappedRoot:{width:"100%",position:"relative",transform:"translateX(0)",top:0,right:0,bottom:0,left:0,minWidth:"288px"}}),ia=function(e){var a=C.useRef(),i=C.useState(!0),n=i[0],o=i[1],s=bt([e.snack.onClose,e.onClose]),r=function(){e.snack.requestClose&&s(null,"instructed",e.snack.id)},l=C.useCallback(function(){a.current=setTimeout(function(){o(function(N){return!N})},125)},[]);C.useEffect(function(){return function(){a.current&&clearTimeout(a.current)}},[]);var u=e.snack,d=e.classes,m=e.Component,y=m===void 0?aa:m,f=C.useMemo(function(){return Jn(d)},[d]),h=u.open,g=u.SnackbarProps,v=u.TransitionComponent,p=u.TransitionProps,E=u.transitionDuration,_=u.disableWindowBlurListener,k=u.content,x=vt(u,["open","SnackbarProps","TransitionComponent","TransitionProps","transitionDuration","disableWindowBlurListener","content","entered","requestClose","onEnter","onEntered","onExit","onExited"]),I=S({direction:Zn(x.anchorOrigin),timeout:E},p),b=k;typeof b=="function"&&(b=b(x.id,x.message));var w=["onEnter","onEntered","onExit","onExited"].reduce(function(N,B){var j;return S({},N,(j={},j[B]=bt([e.snack[B],e[B]],x.id),j))},{});return O.createElement(je,{in:n,onExited:w.onExited},O.createElement(Oe,{open:h,id:x.id,disableWindowBlurListener:_,autoHideDuration:x.autoHideDuration,className:nt(oa.wrappedRoot,f.root,f[Qn(x.anchorOrigin)]),SnackbarProps:g,onClose:s},O.createElement(v,Object.assign({},I,{appear:!0,in:h,onExit:w.onExit,onExited:l,onEnter:w.onEnter,onEntered:bt([w.onEntered,r],x.id)}),b||O.createElement(y,Object.assign({},x)))))},gt,Rt,It,wt,Pt,R={view:{default:20},snackbar:{default:6,dense:2}},de="."+dt.CollapseWrapper,Wt=16,Tt=xt({root:(gt={boxSizing:"border-box",display:"flex",maxHeight:"100%",position:"fixed",zIndex:1400,height:"auto",width:"auto",transition:ct(["top","right","bottom","left","max-width"],{duration:300,easing:"ease"}),pointerEvents:"none"},gt[de]={padding:R.snackbar.default+"px 0px",transition:"padding 300ms ease 0ms"},gt.maxWidth="calc(100% - "+R.view.default*2+"px)",gt[Y.downXs]={width:"100%",maxWidth:"calc(100% - "+Wt*2+"px)"},gt),rootDense:(Rt={},Rt[de]={padding:R.snackbar.dense+"px 0px"},Rt),top:{top:R.view.default-R.snackbar.default+"px",flexDirection:"column"},bottom:{bottom:R.view.default-R.snackbar.default+"px",flexDirection:"column-reverse"},left:(It={left:R.view.default+"px"},It[Y.upSm]={alignItems:"flex-start"},It[Y.downXs]={left:Wt+"px"},It),right:(wt={right:R.view.default+"px"},wt[Y.upSm]={alignItems:"flex-end"},wt[Y.downXs]={right:Wt+"px"},wt),center:(Pt={left:"50%",transform:"translateX(-50%)"},Pt[Y.upSm]={alignItems:"center"},Pt)}),sa=function(e){var a=e.classes,i=a===void 0?{}:a,n=e.anchorOrigin,o=e.dense,s=e.children,r=nt(dt.SnackbarContainer,Tt[n.vertical],Tt[n.horizontal],Tt.root,i.containerRoot,i["containerAnchorOrigin"+Yt(n)],o&&Tt.rootDense);return O.createElement("div",{className:r},s)},ra=C.memo(sa),pe=function(e){var a=typeof e=="string"||C.isValidElement(e);return!a},et,la=function(t){Ie(e,t);function e(i){var n;return n=t.call(this,i)||this,n.enqueueSnackbar=function(o,s){if(s===void 0&&(s={}),o==null)throw new Error("enqueueSnackbar called with invalid argument");var r=pe(o)?o:s,l=pe(o)?o.message:o,u=r.key,d=r.preventDuplicate,m=vt(r,["key","preventDuplicate"]),y=_t(u),f=y?u:new Date().getTime()+Math.random(),h=Yn(m,n.props),g=S({id:f},m,{message:l,open:!0,entered:!1,requestClose:!1,persist:h("persist"),action:h("action"),content:h("content"),variant:h("variant"),anchorOrigin:h("anchorOrigin"),disableWindowBlurListener:h("disableWindowBlurListener"),autoHideDuration:h("autoHideDuration"),hideIconVariant:h("hideIconVariant"),TransitionComponent:h("TransitionComponent"),transitionDuration:h("transitionDuration"),TransitionProps:h("TransitionProps",!0),iconVariant:h("iconVariant",!0),style:h("style",!0),SnackbarProps:h("SnackbarProps",!0),className:nt(n.props.className,m.className)});return g.persist&&(g.autoHideDuration=void 0),n.setState(function(v){if(d===void 0&&n.props.preventDuplicate||d){var p=function(x){return y?x.id===f:x.message===l},E=v.queue.findIndex(p)>-1,_=v.snacks.findIndex(p)>-1;if(E||_)return v}return n.handleDisplaySnack(S({},v,{queue:[].concat(v.queue,[g])}))}),f},n.handleDisplaySnack=function(o){var s=o.snacks;return s.length>=n.maxSnack?n.handleDismissOldest(o):n.processQueue(o)},n.processQueue=function(o){var s=o.queue,r=o.snacks;return s.length>0?S({},o,{snacks:[].concat(r,[s[0]]),queue:s.slice(1,s.length)}):o},n.handleDismissOldest=function(o){if(o.snacks.some(function(d){return!d.open||d.requestClose}))return o;var s=!1,r=!1,l=o.snacks.reduce(function(d,m){return d+(m.open&&m.persist?1:0)},0);l===n.maxSnack&&(r=!0);var u=o.snacks.map(function(d){return!s&&(!d.persist||r)?(s=!0,d.entered?(d.onClose&&d.onClose(null,"maxsnack",d.id),n.props.onClose&&n.props.onClose(null,"maxsnack",d.id),S({},d,{open:!1})):S({},d,{requestClose:!0})):S({},d)});return S({},o,{snacks:u})},n.handleEnteredSnack=function(o,s,r){if(!_t(r))throw new Error("handleEnteredSnack Cannot be called with undefined key");n.setState(function(l){var u=l.snacks;return{snacks:u.map(function(d){return d.id===r?S({},d,{entered:!0}):S({},d)})}})},n.handleCloseSnack=function(o,s,r){n.props.onClose&&n.props.onClose(o,s,r);var l=r===void 0;n.setState(function(u){var d=u.snacks,m=u.queue;return{snacks:d.map(function(y){return!l&&y.id!==r?S({},y):y.entered?S({},y,{open:!1}):S({},y,{requestClose:!0})}),queue:m.filter(function(y){return y.id!==r})}})},n.closeSnackbar=function(o){var s=n.state.snacks.find(function(r){return r.id===o});_t(o)&&s&&s.onClose&&s.onClose(null,"instructed",o),n.handleCloseSnack(null,"instructed",o)},n.handleExitedSnack=function(o,s){if(!_t(s))throw new Error("handleExitedSnack Cannot be called with undefined key");n.setState(function(r){var l=n.processQueue(S({},r,{snacks:r.snacks.filter(function(u){return u.id!==s})}));return l.queue.length===0?l:n.handleDismissOldest(l)})},et=n.enqueueSnackbar,n.closeSnackbar,n.state={snacks:[],queue:[],contextValue:{enqueueSnackbar:n.enqueueSnackbar.bind(ee(n)),closeSnackbar:n.closeSnackbar.bind(ee(n))}},n}var a=e.prototype;return a.render=function(){var n=this,o=this.state.contextValue,s=this.props,r=s.domRoot,l=s.children,u=s.dense,d=u===void 0?!1:u,m=s.Components,y=m===void 0?{}:m,f=s.classes,h=this.state.snacks.reduce(function(v,p){var E,_=Yt(p.anchorOrigin),k=v[_]||[];return S({},v,(E={},E[_]=[].concat(k,[p]),E))},{}),g=Object.keys(h).map(function(v){var p=h[v],E=p[0];return O.createElement(ra,{key:v,dense:d,anchorOrigin:E.anchorOrigin,classes:f},p.map(function(_){return O.createElement(ia,{key:_.id,snack:_,classes:f,Component:y[_.variant],onClose:n.handleCloseSnack,onEnter:n.props.onEnter,onExit:n.props.onExit,onExited:bt([n.handleExitedSnack,n.props.onExited],_.id),onEntered:bt([n.handleEnteredSnack,n.props.onEntered],_.id)})}))});return O.createElement(we.Provider,{value:o},l,r?Ve.createPortal(g,r):g)},Ce(e,[{key:"maxSnack",get:function(){return this.props.maxSnack||tt.maxSnack}}]),e}(C.Component),ua=function(){return C.useContext(we)};function Be(){const t=C.useRef({x:0,y:0}),e=ye(p=>p.domNode),{getNodes:a,setNodes:i,getEdges:n,setEdges:o,screenToFlowPosition:s}=L(),[r,l]=C.useState([]),[u,d]=C.useState([]);C.useEffect(()=>{if(!e)return;const p=k=>k.preventDefault(),E=k=>{t.current={x:k.clientX,y:k.clientY}},_=["cut","copy","paste"];return _.forEach(k=>e.addEventListener(k,p)),e.addEventListener("mousemove",E),()=>{_.forEach(k=>e.removeEventListener(k,p)),e.removeEventListener("mousemove",E)}},[e]);const m=C.useCallback(()=>{const p=a().filter(k=>k.selected),_=be(p,n()).filter(k=>{const x=!p.some(b=>b.id===k.source),I=!p.some(b=>b.id===k.target);return!x&&!I});return{selectedNodes:p,selectedEdges:_}},[a,n]),y=C.useCallback(()=>{const{selectedNodes:p,selectedEdges:E}=m();l(p),d(E)},[m]),f=C.useCallback(()=>{try{const{selectedNodes:p,selectedEdges:E}=m();l(p),d(E),i(_=>_.filter(k=>!k.selected)),o(_=>_.filter(k=>!E.includes(k)))}catch(p){et("Ошибка при вырезании",{variant:"error"}),console.error("Paste error:",p)}},[m,i,o]),h=(p,E,_,k)=>{const x=Nt(),I=E.x+(p.position.x-_),b=E.y+(p.position.y-k);return{...p,id:x,position:{x:I,y:b},data:{...p.data}}},g=p=>{try{const E=Nt(),_=p.positionAbsoluteX+20,k=(p.height??140)+10,x=p.positionAbsoluteY+k;let I;I={...p,id:E,position:{x:_,y:x},data:{...p.data}},i(b=>[...b.map(w=>({...w,selected:!1})),I])}catch(E){et("Ошибка при копировании",{variant:"error"}),console.error("Paste error:",E)}},v=C.useCallback(async(p=s(t.current))=>{if(r.length)try{const E=Math.min(...r.map(b=>b.position.x)),_=Math.min(...r.map(b=>b.position.y)),k=await Promise.all(r.map(b=>h(b,p,E,_))),x=Object.fromEntries(r.map((b,w)=>[b.id,k[w].id])),I=u.map(b=>{var w,N;return{...b,id:Nt(),source:x[b.source],sourceHandle:`${x[b.source]} ${(w=b.sourceHandle)==null?void 0:w.split(" ")[1]}`,target:x[b.target],targetHandle:`${x[b.target]} ${(N=b.targetHandle)==null?void 0:N.split(" ")[1]}`}});i(b=>[...b.map(w=>({...w,selected:!1})),...k]),o(b=>[...b.map(w=>({...w,selected:!1})),...I])}catch(E){et("Ошибка при копировании",{variant:"error"}),console.error("Paste error:",E)}},[r,u,s,i,o]);return Ft(["Meta+x","Control+x"],f),Ft(["Meta+c","Control+c"],y),Ft(["Meta+v","Control+v"],v),{cut:f,copy:y,paste:v,bufferedNodes:r,bufferedEdges:u,createDublicate:g}}function Ft(t,e){const[a,i]=C.useState(!1),n=We(t);C.useEffect(()=>{n&&!a?(e(),i(!0)):!n&&a&&i(!1)},[n,a,e])}const ca=()=>{const{setNodes:t,setEdges:e}=L();return{handleDelete:(i,n)=>{t(o=>o.filter(s=>s.id!==i)),e(o=>o.filter(s=>s.target!==i&&s.source!==i))}}},da="_row_1sy6z_1",pa="_input_1sy6z_9",fa="_outputs_1sy6z_19",ha="_wraps_1sy6z_29",ga="_text_1sy6z_49",F={row:da,input:pa,outputs:fa,wraps:ha,"handle-wrap":"_handle-wrap_1sy6z_41",text:ga},ya="_handle_p0w04_1",ma="_action_p0w04_119",st={handle:ya,"handle-wrapper":"_handle-wrapper_p0w04_17","oscillography-view":"_oscillography-view_p0w04_25","tooltip-visible":"_tooltip-visible_p0w04_77","context-menu":"_context-menu_p0w04_85",action:ma},St=({id:t,type:e,position:a,dataType:i,data:n})=>{var k;const[o,s]=C.useState(!1),r=C.useRef(null),{updateNodeData:l}=L(),u=Fe(),[d,m]=C.useMemo(()=>{const[x="",I=""]=String(t).split(" ");return[x,I]},[t]),y=C.useMemo(()=>u.filter(x=>e==="target"&&x.targetHandle===`${t}`),[u,t,e]),f=((k=n==null?void 0:n.outputHandles)==null?void 0:k[m])??{},{oscillography:h=!1,name:g=""}=f,v=()=>{l(d,{...n,outputHandles:{...n.outputHandles,[m]:{...f,oscillography:!h}}})},p=x=>{const I=x.target.value;l(d,{...n,outputHandles:{...n.outputHandles,[m]:{...f,name:I}}})},E=x=>{x.stopPropagation(),!(!(n!=null&&n.outputHandles)||Object.keys(n.outputHandles).length===0)&&s(I=>!I)};C.useEffect(()=>{if(!o)return;const x=b=>{r.current&&!r.current.contains(b.target)&&s(!1)},I=b=>{b.key==="Escape"&&s(!1)};return document.addEventListener("click",x),document.addEventListener("touchstart",x),document.addEventListener("keydown",I),()=>{document.removeEventListener("click",x),document.removeEventListener("touchstart",x),document.removeEventListener("keydown",I)}},[o]);const _=x=>{x.stopPropagation(),x.key==="Enter"&&(x.target.blur(),s(!1))};return c.jsxs("div",{ref:r,onClick:e==="source"?E:void 0,onDoubleClick:x=>x.stopPropagation(),className:$(st["handle-wrapper"],"nodrag","nopan"),children:[h&&c.jsx("div",{className:st["oscillography-view"]}),e==="source"&&o&&c.jsxs("div",{className:st["context-menu"],role:"menu","aria-label":"Handle context menu",onClick:x=>x.stopPropagation(),children:[c.jsx("label",{children:c.jsx(rt,{type:"text",style:{width:"300px"},value:g,onChange:p,placeholder:"Введите название",onKeyDown:_})}),c.jsx("button",{type:"button",className:st.action,onClick:v,children:h?"Выключить осциллографирование":"Осциллографировать"})]}),c.jsx(Ae,{type:e,position:a,id:`${t}`,"data-tooltip":e==="source"?"Нажмите чтобы изменить настройки выхода":void 0,style:{backgroundColor:i?ut[i].clr:"gray",transform:a===W.Left?"translate(-100%, -50%)":a===W.Right?"translate(100%, -50%)":a===W.Top?"translate(-50%, -100%)":"translate(-50%, 100%)"},isConnectable:y.length<1,className:$(st.handle,{[st["tooltip-visible"]]:e==="source"})})]})},fe={"handles-column":"_handles-column_gcrpe_1","handle-wrap":"_handle-wrap_gcrpe_11"},ba=({nodeId:t,inputHandles:e,data:a})=>c.jsx("div",{className:fe["handles-column"],children:Object.keys(e).map(i=>c.jsx("div",{className:fe["handle-wrap"],children:c.jsx(St,{id:`${t} ${i}`,type:"target",position:W.Left,dataType:e[i].dataType,data:a})},i))}),va={analogInput:["updateName","updateSetpointValue","delete","dublicate"],analogInputInt:["updateName","updateSetpointValue","delete","dublicate"],discreteInput:["updateName","delete","dublicate"],discreteOutput:["updateName","delete","dublicate"],constInt:["updateSetpointValue","updateName","delete","dublicate"],fourierInt:["updateName","changeFourierGarmonics","delete","dublicate"],xor:["delete","dublicate"],and:["invert","delete","dublicate"],or:["invert","delete","dublicate"],nand:["invert","delete","dublicate"],nor:["invert","delete","dublicate"],multInt:["delete","dublicate"],divInt:["delete","dublicate"],sumInt:["delete","dublicate"],subInt:["delete","dublicate"],timerInt:["updateSetpointValue","updateName","delete","dublicate"],risEdgeTimerBool:["updateDigit","delete","dublicate"],equalsInt:["delete","dublicate"],lessInt:["delete","dublicate"],moreInt:["delete","dublicate"],fifoByte:["updateLengthMemory","delete","dublicate"],fifoByteWithoutEn:["updateLengthMemory","delete","dublicate"],fifoWord:["updateLengthMemory","delete","dublicate"],fifoWordWithoutEn:["updateLengthMemory","delete","dublicate"]},xa=t=>"setpointDataType"in t,Ea={delete:{key:"deleteNode",label:"delete node",dependencies:["useDeleteNode"],createElement:({node:t,dependencies:e})=>{var s;const{id:a,data:i}=t,n=(s=e.useDeleteNode)==null?void 0:s.call(e);if(!n)return null;const{handleDelete:o}=n;return c.jsx(P,{text:"Удалить",onClick:()=>o(a,i)})}},dublicate:{key:"dublicate",label:"dublicate node",dependencies:["useCopyPaste"],createElement:({node:t,dependencies:e})=>{var n;const a=(n=e.useCopyPaste)==null?void 0:n.call(e);if(!a)return null;const{createDublicate:i}=a;return c.jsx(P,{text:"Дублировать",onClick:()=>i(t)})}},changeFourierGarmonics:{key:"invert",label:"Инвертировать",dependencies:["useUpdateFourierValue"],createElement:({node:t,dependencies:e})=>{const{data:a}=t;if(!("setpointDataType"in a))return;const{outputHandles:i}=a;if(!(e!=null&&e.useUpdateFourierValue))return null;const n=e.useUpdateFourierValue(t.id,t.data);if(!n)return;const{handleFourierGarmonicForOutput:o,inputsValue:s}=n,r=Object.values(i).reduce((l,u,d)=>(d%2===0?l.push([u]):l[l.length-1].push(u),l),[]);return c.jsx("div",{onDoubleClick:l=>{l.stopPropagation()},className:"nodrag nopan nowheel",style:{display:"flex",gap:"10px",width:"max-content"},children:r.map((l,u)=>c.jsx(rt,{style:{width:"60px"},type:"number",min:0,value:s[u],onChange:d=>o(u,d.target.value)},u))})}},invert:{key:"invert",label:"Инвертировать",dependencies:["useInverseNode"],createElement:({node:t,dependencies:e})=>{var o;const{id:a,data:i}=t,n=(o=e.useInverseNode)==null?void 0:o.call(e,a,i.type);return c.jsx(P,{onClick:n,text:"Инвертировать",type:"button"})}},updateSetpointValue:{key:"updateSetpointValue",label:"Изменить значение",dependencies:["useUpdateSetpointValue"],createElement:({node:t,dependencies:e})=>{var s;const{data:a}=t;if(!xa(a))return null;const i=(s=e.useUpdateSetpointValue)==null?void 0:s.call(e,t.id,a);if(!i)return null;const{handleChange:n,inputValue:o}=i;return c.jsx("div",{className:"flex flex-col gap-2",children:c.jsx(rt,{type:"text",value:o,onChange:n,placeholder:"Введите значение"})})}},updateName:{key:"updateName",label:"Изменить значение",dependencies:["useUpdateNameValue"],createElement:({node:t,dependencies:e})=>{var r;const{id:a,data:i}=t,n=(r=e.useUpdateNameValue)==null?void 0:r.call(e,a,i);if(!n)return null;const{name:o,handleChangeName:s}=n;return c.jsx("div",{className:"flex flex-col gap-2",children:c.jsx(rt,{type:"text",value:o,onChange:s,placeholder:"Введите имя"})})}},updateDigit:{key:"updateDigit",label:"Изменить значение",dependencies:["useUpdateDigit"],createElement:({node:t,dependencies:e})=>{var r;const{id:a,data:i}=t,n=(r=e.useUpdateDigit)==null?void 0:r.call(e,a,i);if(!n)return null;const{digit:o,handleChangeDigit:s}=n;return c.jsx("div",{className:"nodrag nopan nowheel",onDoubleClick:l=>{l.stopPropagation()},children:c.jsx(rt,{type:"number",min:0,max:6e3,value:o,onChange:s,placeholder:"Введите значение"})})}},updateLengthMemory:{key:"updateLengthMemory",label:"Изменить значение",dependencies:["useChangeLengthMemory"],createElement:({node:t,dependencies:e})=>{var r;const{id:a,data:i}=t,n=(r=e.useChangeLengthMemory)==null?void 0:r.call(e,a,i);if(!n)return null;const{lengthMemory:o,handleChangeLengthMemory:s}=n;return c.jsx("div",{className:"nodrag nopan nowheel",onDoubleClick:l=>{l.stopPropagation()},children:c.jsx(rt,{type:"number",min:1,value:o,onChange:s,placeholder:"Введите глубину"})})}}},_a=t=>Object.values({0:"1",1:"2",2:"3",3:"4",4:"5",5:"6",6:"7",7:"8"}).slice(0,t).reduce((a,i)=>(a[i]=void 0,a),{}),ka=t=>{const{updateNodeData:e,getEdges:a,setEdges:i,getNode:n}=L(),o=Xt(),s=[...new Array(10)].reduce((l,u,d)=>(l.push({value:d+1}),l),[]);return{changeHandles:C.useCallback(l=>{e(t,{inputHandlesCount:l}),o(t);const u=a(),d=Object.keys(_a(+l)).map(y=>`${t} ${y}`),m=u.filter(y=>y.target!==t||y.targetHandle&&d.includes(y.targetHandle));i(m)},[t,e,o,a,i,n]),items:s}},Ca={or:"nor",and:"nand",nor:"or",nand:"and"},Ia=(t,e)=>{const{updateNodeData:a}=L();return C.useCallback(()=>{a(t,{type:Ca[e]})},[t,e,a])};function wa(t){const e=new Uint8Array(4);return e[3]=t>>24&255,e[2]=t>>16&255,e[1]=t>>8&255,e[0]=t&255,e}const Ta=(t,e)=>{const{updateNodeData:a}=L();if(!("setpointDataType"in e)||e.type!=="fourierInt")return;const[i,n]=C.useState([...e.setpointValue]);return{inputsValue:i,handleFourierGarmonicForOutput:(s,r)=>{if(ve(r)){const l=Number(r);if(!Number.isNaN(l)&&l>=0&&l<=19){const u=[...i];u[s]=l,a(t,{setpointValue:[...u]}),n([...u])}}}}},Na=(t,e)=>{const{updateNodeData:a}=L();if(!("setpointDataType"in e)||Array.isArray(e.setpointValue))return;const{setpointDataType:i}=e,[n,o]=C.useState(String(e.setpointValue)),s=(l,u)=>{if(l===""||l==="-"||l==="."||l==="-.")return l;u&&(l=l.replace(",","."));const d=Number(l);return Number.isNaN(d)?l:String(d)};return{handleChange:l=>{let u=l.target.value;switch(i){case"int":if(ve(u)){const y=s(u,!1);o(y);const f=Number(y);Number.isNaN(f)||a(t,{setpointValue:f})}break;case"float":if(ln(u)){const y=s(u,!0);o(y);const f=Number(y);Number.isNaN(f)||a(t,{setpointValue:f})}break;case"bool":const m=l.target.checked?1:0;a(t,{setpointValue:m}),o(String(m));break}},inputValue:n}},Sa=(t,e)=>{const{updateNodeData:a}=L(),i=n=>{const o=n.target.value;a(t,{name:o})};return{name:e.name,handleChangeName:i}},ja=(t,e)=>{if(!("lengthMemory"in e))return null;const{updateNodeData:a}=L(),i=n=>{const o=n.target.value;a(t,{lengthMemory:+o})};return{lengthMemory:e.lengthMemory,handleChangeLengthMemory:i}},Oa=(t,e)=>{const{updateNodeData:a}=L();if(!("digit"in e))return;const i=n=>{const o=Number(n.target.value);o&&a(t,{digit:o})};return{digit:e.digit,handleChangeDigit:i}},Da=t=>{var n;const{type:e}=t.data,a={useChangeHandles:ka,useInverseNode:Ia,useUpdateSetpointValue:Na,useUpdateNameValue:Sa,useDeleteNode:ca,useUpdateFourierValue:Ta,useCopyPaste:Be,useChangeLengthMemory:ja,useUpdateDigit:Oa};return{actions:(n=va[e])==null?void 0:n.map(o=>{const s=Ea[o];if(!s)return null;const r=s.dependencies.reduce((l,u)=>(u in a&&(l[u]=a[u]),l),{});return{key:s.key,label:s.label,element:s.createElement({node:t,dependencies:r})}})}},he={"context-menu-block":"_context-menu-block_64p36_1","menu-item":"_menu-item_64p36_15"},Ha=C.memo(({actions:t,visible:e,setVisible:a})=>{const i=C.useRef(null);return C.useEffect(()=>{const n=o=>{i.current&&!i.current.contains(o.target)&&a(!1)};return document.addEventListener("click",n),()=>document.removeEventListener("click",n)},[]),c.jsx(ze,{isVisible:e,children:c.jsx("div",{ref:i,className:he["context-menu-block"],children:t.map((n,o)=>c.jsx("div",{className:he["menu-item"],children:n.element},o))})})}),D=({node:t,children:e})=>{const[a,i]=C.useState(!1),{actions:n}=Da(t);return c.jsxs("div",{style:{position:"relative"},onDoubleClick:()=>i(o=>!o),children:[e,c.jsx(Ha,{actions:n,visible:a,setVisible:i})]})},Ba="_inc_1tbfq_1",La="_dec_1tbfq_9",Ma="_disabled_1tbfq_47",yt={"inc-dec":"_inc-dec_1tbfq_1",inc:Ba,dec:La,disabled:Ma},A=({node:t,children:e})=>{const{id:a,data:i}=t,{updateNodeData:n,setEdges:o}=L(),s=Xt(),r=i.inputHandles||{},l=Object.keys(r),u=r[l[0]].dataType,d={min:2,max:10},m=()=>{const g=l.length;if(g>=d.max)return;const v=`input-${g+1}`,p={...r,[v]:{dataType:u}};n(a,{inputHandles:p}),s(a)},y=()=>{if(l.length<=d.min)return;const p=Object.keys(r).filter(k=>k.startsWith("input-")).sort((k,x)=>{const I=parseInt(k.replace("input-",""),10);return parseInt(x.replace("input-",""),10)-I})[0],{[p]:E,..._}=r;o(k=>k.filter(x=>x.targetHandle!==`${a} ${p}`)),n(a,{inputHandles:_}),s(a)},f=l.length>=d.max,h=l.length<=d.min;return c.jsxs("div",{className:yt["inc-dec"],children:[c.jsx("button",{className:$(yt.inc,"nodrag",{[yt.disabled]:f}),onClick:m,disabled:f,children:"+"}),e,c.jsx("button",{className:$(yt.dec,"nodrag",{[yt.disabled]:h}),onClick:y,disabled:h,children:"—"})]})},$a="_btn_aosl1_9",Va="_inc_aosl1_1",Ra="_disabled_aosl1_41",Pa="_dec_aosl1_47",z={"inc-dec":"_inc-dec_aosl1_1","btns-row":"_btns-row_aosl1_9",btn:$a,inc:Va,disabled:Ra,dec:Pa},Wa=({node:t,children:e})=>{const{id:a,data:i}=t,{updateNodeData:n,setEdges:o}=L(),s=i.outputHandles||{},r=Object.keys(s),l={min:2,max:6},u=Xt(),d=()=>{const h=r.length,g=l.max-h,v=Math.min(2,g);if(v>0){const p={...s};for(let E=1;E<=v;E++){const _=`out-${h+E}`;p[_]={dataType:"int"}}n(a,{outputHandles:p}),u(a)}},m=()=>{const g=r.length-l.min,v=Math.min(2,g);if(v>0){const p={...s},E=Object.keys(p).filter(_=>_.startsWith("out-")).sort((_,k)=>{const x=parseInt(_.replace("out-",""),10);return parseInt(k.replace("out-",""),10)-x});for(let _=0;_<v;_++){const k=E[_];o(x=>x.filter(I=>I.sourceHandle!==`${a} ${k}`)),delete p[k]}n(a,{outputHandles:p}),u(a)}},y=r.length>=l.max,f=r.length<=l.min;return c.jsxs("div",{className:z["inc-dec"],children:[e,c.jsxs("div",{className:z["btns-row"],children:[c.jsx("button",{className:$(z.btn,z.inc,"nodrag",{[z.disabled]:y}),onClick:d,disabled:y,children:"+"}),c.jsx("button",{className:$(z.btn,z.dec,"nodrag",{[z.disabled]:f}),onClick:m,disabled:f,children:"—"})]})]})},Fa={analogInput:[D],analogInputInt:[D],discreteInput:[D],discreteOutput:[D],fourierInt:[D,Wa],constInt:[D],xor:[D,A],and:[D,A],or:[D,A],nand:[D,A],nor:[D,A],multInt:[D,A],divInt:[D,A],sumInt:[D,A],subInt:[D],timerInt:[D],risEdgeTimerBool:[D],equalsInt:[D],lessInt:[D],moreInt:[D],fifoByte:[D],fifoByteWithoutEn:[D],fifoWord:[D],fifoWordWithoutEn:[D]},Aa=(t,e)=>(Fa[t.data.type]||[]).reduce((i,n,o)=>c.jsx(n,{node:t,children:i},`feature-${o}`),e),za=C.memo(t=>{const{type:e,inputHandles:a,outputHandles:i}=t.data,n=qe[e];if(!n)return null;const{view:o,...s}=n,r=c.jsxs("div",{className:F.row,children:[!!Object.keys(a).length&&c.jsx(ba,{nodeId:t.id,inputHandles:a,data:t.data}),c.jsx(o,{...s}),!!Object.keys(i).length&&Object.keys(i).map(d=>c.jsx(St,{id:`${t.id} ${d}`,type:"source",position:W.Right,dataType:i[d].dataType,data:t.data},d))]}),u=e!=="fourierInt"?r:(()=>{const d=Object.keys(a).length,m=Object.keys(a)[0];return c.jsxs("div",{className:F.row,children:[!!d&&c.jsx("div",{className:F.input,children:c.jsx(St,{id:`${t.id} ${m}`,type:"target",position:W.Left,dataType:a[m].dataType,data:t.data},m)}),c.jsx(o,{...s}),!!Object.keys(i).length&&c.jsx("div",{className:F.outputs,children:Array.from({length:Math.ceil(Object.keys(i).length/2)},(y,f)=>Object.keys(i).slice(f*2,f*2+2)).map((y,f)=>c.jsx("div",{className:F.wraps,children:y.map((h,g)=>c.jsxs("div",{className:F["handle-wrap"],children:[g===0?c.jsx("div",{className:F.text,children:"Amp"}):c.jsx("div",{className:F.text,children:"Ph"}),c.jsx(St,{id:`${t.id} ${h}`,type:"source",position:W.Right,dataType:i[h].dataType,data:t.data},`${f}-${g}`)]},h))},f))})]})})();return Aa(t,u)}),qa={account:"paid-pro",hideAttribution:!0};Ke.SmoothStep;const Ka={node:za},Ua={"custom-edge":Dn},Xa=({fromX:t,fromY:e,toX:a,toY:i,fromPosition:n,fromHandle:o,toPosition:s,fromNode:r})=>{var d,m,y,f;const[l]=me({sourceX:t,sourceY:e,targetX:a,targetY:i,offset:15,sourcePosition:n,targetPosition:s});if(!r||!o||!o.id)return null;const u=((m=r.data.outputHandles[(d=o.id)==null?void 0:d.split(" ")[1]])==null?void 0:m.dataType)||((f=r.data.inputHandles[(y=o.id)==null?void 0:y.split(" ")[1]])==null?void 0:f.dataType);return u?c.jsx("g",{children:c.jsx("path",{fill:"none",stroke:ut[u].clr,strokeWidth:3,d:l})}):null},Ga="_panel__item_1tehr_15",Ya="_name_1tehr_41",At={"sidebar-item-drag-image":"_sidebar-item-drag-image_1tehr_1",panel__item:Ga,name:Ya},Za=({viewData:t,type:e})=>{const a=C.useRef(null),{view:i,name:n,...o}=t,s=r=>{var l;(l=r.dataTransfer)==null||l.setData("application/reactflow",e),a.current&&r.dataTransfer.setDragImage(a.current,0,0)};return c.jsxs("div",{className:At.panel__item,draggable:!0,onDragStart:s,children:[c.jsx(i,{...t}),c.jsx("div",{className:At.name,children:n}),c.jsx("div",{className:At["sidebar-item-drag-image"],ref:a,children:c.jsx(i,{...o})})]})},Qa="_elements_15sbx_1",Ja={elements:Qa},X=({views:t})=>c.jsx("div",{className:Ja.elements,children:Object.entries(t).map(e=>c.jsx(Za,{viewData:e[1],type:e[0]},e[0]))}),to=()=>c.jsx("div",{children:c.jsxs(vn,{text:"Библиотека",position:"right",children:[c.jsx(U,{name:"Входы и выходы",children:c.jsx(X,{views:{...Xe,...Ue}})}),c.jsx(U,{name:"Логические элементы",children:c.jsx(X,{views:Ge})}),c.jsx(U,{name:"Алгебраические операции",children:c.jsx(X,{views:Ye})}),c.jsx(U,{name:"Операции сравнения",children:c.jsx(X,{views:Ze})}),c.jsx(U,{name:"Выдержки времени",children:c.jsx(X,{views:Qe})}),c.jsx(U,{name:"Фурье",children:c.jsx(X,{views:Je})}),c.jsx(U,{name:"Fifo",children:c.jsx(X,{views:tn})})]})});function eo(t){return t.map(e=>{const a="digit"in e?[e.inType,e.instructionOffset,...e.resultOffsets,...e.sourcesOffsets,e.digit,e.workingSpace]:"lengthMemory"in e?[e.inType,e.instructionOffset,e.ptrBegin,e.lengthMemory,...e.resultOffsets,...e.sourcesOffsets,e.workingSpace]:"instructionOffset"in e?[e.inType,e.instructionOffset,...e.resultOffsets,...e.sourcesOffsets]:[e.inType,...e.sourcesOffsets,...e.resultOffsets];for(;a.length<10;)a.push(0);return a})}function no({scripts:t,instructions:e,setpoints:a,indications:i,inputMatrixData:n,offsetsOsc:o,sms:s,smsWeb:r,phoneNumber:l}){const u=eo(t),d=Object.values(i).map(({led1:f,led2:h,led3:g,blOn:v,blOff:p,sms:E,smsWeb:_})=>[f,h,g,v,p,E,_]),m=Object.values(n).map(({I:f,U:h,HRM3:g})=>[f,h,g]);let y=[];return Object.entries(o).forEach(f=>{y.push({length:f[1].lengthMemory,offset:Number(f[0])})}),{scripts:u,functions:e,setpoints:a,outputMatrix:d,inputMatrix:m,sms:s,smsWeb:r,phoneNumber:l,offsetsOsc:y}}const ao=(t,e,a)=>{if(!e.length)return{newPrimitiveData:{lengthInBytes:t.lengthInBytes,offset:1},newOffset:1,lastLength:t.lengthInBytes};const i=e.slice(-1)[0]+a,n={lengthInBytes:t.lengthInBytes,offset:i};return{newOffset:i,newPrimitiveData:n,lastLength:t.lengthInBytes}},oo=()=>({lastLength:0,instructions:[],offsets:[],primitivesData:{}}),lt={bool:1,int:4,float:4,analog:160},io=(t,e,a)=>{var o;const i=t.data.type;if(Ee(Q).includes(i)&&!((o=a.primitivesData[i])!=null&&o[e])){const s=Q[i];if(s&&s[e]){a.instructions.push(...s[e].instruction);const{newOffset:r,newPrimitiveData:l,lastLength:u}=ao(Q[i][e],a.offsets,a.lastLength);a.primitivesData[i]={...a.primitivesData[i],[e]:l},a.offsets.push(r),a.lastLength=u}}},so=(t,e)=>{try{const a=Object.keys(e.data.inputHandles);if(a.length===0)return!0;for(const i of a)if(!t.find(o=>o.targetHandle===`${e.id} ${i}`))throw new Error(`Не найдено исходное смещение для handle ${i} узла ${e.id}`)}catch(a){throw new Error(`Ошибка при создании scriptItem для узла ${e.id}: ${a instanceof Error?a.message:String(a)}`)}},ro=(t,e,a,i,n,o,s,r)=>{var l,u,d,m,y,f,h,g,v,p,E,_,k,x;try{const{initOscillographicOffsets:I}=qt.getState(),b=t.data.type,w=Object.keys(t.data.inputHandles).length;let N;b.includes("Output")?N=[s.get(t.id)]:(N=Object.entries(t.data.outputHandles).map(([j])=>o.get(`${t.id} ${j}`)),Object.entries(t.data.outputHandles).forEach(([j,T])=>{const H=o.get(`${t.id} ${j}`);if(H===void 0)throw new Error(`Не найдено смещение в мапе для handle ${j} узла ${t.id}`);T.oscillography&&I(H,T.name??"",lt[T.dataType],T.dataType,T.dataType==="bool"?"line":"block")}));let B=Object.keys(t.data.inputHandles).reduce((j,T)=>{var q;const H=(q=e.find(Et=>`${t.id} ${T}`===Et.targetHandle))==null?void 0:q.sourceHandle;if(!H)throw new Error(`Не найдено исходный handle для handle ${T} узла ${t.id}`);const M=o.get(H);if(M===void 0)throw new Error(`Не найдено исходный узел для handle ${T} узла ${t.id}`);return j.push(M),j},[]);if(t.data.type.includes("analogInput")&&(B=[r.analog.splice(0,lt.analog)[0]]),"setpointDataType"in t.data){const{setpointsValues:j,setSetpoints:T}=xe.getState(),H=[...j],M=n[t.data.setpointDataType].splice(0,t.data.setpointDataType==="bool"?1:4)[0];if(t.data.type==="fourierInt")Array.isArray(t.data.setpointValue)&&(H.splice(M,4,...t.data.setpointValue),T([...H]));else if(!Array.isArray(t.data.setpointValue))if(t.data.setpointDataType==="bool")H[M]=t.data.setpointValue,T([...H]);else{const q=wa(t.data.setpointValue);H.splice(M,4,...q),T([...H])}}if(b==="fourierInt")return{inType:(u=(l=Q[b])==null?void 0:l[w])==null?void 0:u.in_type,sourcesOffsets:B,resultOffsets:N};if("digit"in t.data)return{inType:(m=(d=Q[b])==null?void 0:d[w])==null?void 0:m.in_type,instructionOffset:(f=(y=a.primitivesData[b])==null?void 0:y[w])==null?void 0:f.offset,resultOffsets:N,sourcesOffsets:B,digit:t.data.digit,workingSpace:i.int.splice(0,lt.int)[0]};if("lengthMemory"in t.data){const j=Object.values(t.data.outputHandles)[0].dataType,T=t.data.lengthMemory,H=i[j].splice(0,T*lt[j])[0],M=i.int.splice(0,lt.int)[0];return{inType:(g=(h=Q[b])==null?void 0:h[w])==null?void 0:g.in_type,instructionOffset:(p=(v=a.primitivesData[b])==null?void 0:v[w])==null?void 0:p.offset,ptrBegin:H,lengthMemory:T,resultOffsets:N,sourcesOffsets:B,workingSpace:M}}return{inType:(_=(E=Q[b])==null?void 0:E[w])==null?void 0:_.in_type,instructionOffset:(x=(k=a.primitivesData[b])==null?void 0:k[w])==null?void 0:x.offset,resultOffsets:N,sourcesOffsets:B}}catch(I){throw new Error(`Ошибка при создании scriptItem для узла ${t.id}: ${I instanceof Error?I.message:String(I)}`)}};function Le(t,e,a,i,n,o,s,r,l,u,d){if(e.has(t.id))return;e.add(t.id),t.data.type!=="fourierInt"&&io(t,Object.keys(t.data.inputHandles).length,i);const m=be([t],d),{targets:y}=m.reduce((g,v)=>(v.source===t.id&&g.sources.push(v),v.target===t.id&&g.targets.push(v),g),{sources:[],targets:[]});so(y,t);const f=en(t,u,d),h=ro(t,y,i,n,s,o,r,l);f.forEach(g=>Le(g,e,a,i,n,o,s,r,l,u,d)),a.push(h)}const lo=(t,e,a)=>{const i=new Map,n=new Map;return t.forEach(o=>{if(o.data.type.toLocaleLowerCase().includes("out")){const r=Object.values(o.data.inputHandles)[0].dataType,l=a[r].shift();n.set(o.id,l)}Object.entries(o.data.outputHandles).forEach(([r,l])=>{const u=Object.values(o.data.outputHandles)[0].dataType,d=e[u].splice(0,lt[u])[0];i.set(`${o.id} ${r}`,d)})}),{handleOffsetsMap:i,outputOffsetsMap:n}},mt=["bool","int","float","analog"],zt=(t,e)=>e===1?t:Math.ceil(t/4)*4,uo=(t,e)=>{const a=[];for(let i=t;i<t+e;i++)a.push(i);return a},co=(t,e,a,i)=>t<=i&&a<=e,po=(t,e)=>t.map(a=>a+e),G=(t,e,a,i={bool:1,int:4,float:4,analog:160})=>{const n=i[t],o=mt.indexOf(t),s=u=>e[u].length?e[u][e[u].length-1]:null;let r=e[t].length?e[t][e[t].length-1]+1:0;if(e[t].length===0){for(let u=0;u<o;u++){const d=mt[u],m=s(d);m!==null&&(r=Math.max(r,zt(m+1,n)))}r=zt(r,n)}e[t].push(...uo(r,a??n));const l=u=>{const d=mt[u],m=e[d];if(!m.length)return;const y=m[0],f=m[m.length-1];for(let h=u+1;h<mt.length;h++){const g=mt[h],v=e[g];if(!v.length)continue;const p=v[0],E=v[v.length-1];if(co(y,f,p,E)){const _=i[g],x=zt(f+1,_)-p;e[g]=po(v,x),l(h);return}}};l(o)},fo={bool:1,int:4,float:4,analog:160};function ho(t,e=512){const i=new TextEncoder().encode(t),n=[];let o=0;for(;o<i.length;){const s=i.slice(o,o+e),r=new TextDecoder().decode(s);n.push(r),o+=e}return n}const go=()=>{const[t,e]=Ot(f=>[f.nodes,f.edges],J),[a,i]=dn(f=>[f.sendConfig,f.addLog]),[n,o,s,r]=un(f=>[f.indications,f.smsText,f.smsWebText,f.phoneNumber],J),[l]=cn(f=>[f.datas,f.characteristicTypeData],J),u=()=>{const f={bool:[],int:[],float:[],analog:[]},h={bool:[],int:[],float:[],analog:[]},g={bool:[],int:[],float:[],analog:[]},v={bool:[],int:[],float:[],analog:[]};return t.forEach(p=>{Object.values(p.data.outputHandles).forEach(E=>{if(G(E.dataType,f),p.data.type.toLocaleLowerCase().includes("fifo")&&"lengthMemory"in p.data){const _=p.data.lengthMemory,k=Object.values(p.data.outputHandles)[0].dataType,x=_*fo[k];G(E.dataType,f,x),G("int",f)}}),"setpointDataType"in p.data&&G(p.data.setpointDataType,h,void 0,{bool:1,int:4,float:4,analog:4}),p.data.type==="risEdgeTimerBool"&&G("int",f),p.data.type.includes("analogInput")&&G("analog",v,void 0,{bool:1,int:4,float:4,analog:160}),p.data.type.toLocaleLowerCase().includes("output")&&G(p.data.inputHandles.input.dataType,g)}),{offsets:{bool:[...f.bool],int:[...f.int],float:[...f.float],analog:[...f.analog]},setpointOffsets:{bool:[...h.bool],int:[...h.int],float:[...h.float],analog:[...h.analog]},outputOffsetsStore:{bool:[...g.bool],int:[...g.int],float:[...g.float],analog:[...g.analog]},analogInputsOffsets:{bool:[...v.bool],int:[...v.int],float:[...v.float],analog:[...v.analog]}}},d=(f,h,g,v)=>{const p=[],E=new Set,_=oo(),k=t.filter(b=>{var w;return(w=b.data)==null?void 0:w.type.toLowerCase().includes("output")});if(!k.length)throw new Error("Нет выходных элементов");const{handleOffsetsMap:x,outputOffsetsMap:I}=lo(t,f,g);return qt.getState().clearOscillographicOffsets(),k.forEach(b=>Le(b,E,p,_,f,x,h,I,v,t,e)),{scripts:p,instructions:_.instructions}};return{calculateConfig:async()=>{try{const{setConfig:f}=Jt.getState(),{offsets:h,setpointOffsets:g,outputOffsetsStore:v,analogInputsOffsets:p}=u(),{scripts:E,instructions:_}=d(h,g,v,p),{oscillographicOffsets:k}=qt.getState(),x=no({scripts:E,instructions:_,setpoints:xe.getState().setpointsValues,indications:n,inputMatrixData:l,offsetsOsc:k,sms:o,smsWeb:s,phoneNumber:r});console.log(x),f({...x})}catch(f){throw et(f instanceof Error?f.message:"Ошибка сохранения",{variant:"error"}),f}},sendResConfig:()=>{const{config:f}=Jt.getState(),h=ho(JSON.stringify(f),512);i("Отправка конфигурации..."),h.forEach((g,v)=>{console.log(g),setTimeout(()=>a(g),v*1e3)}),i("Конфигурация была отправлена!")}}},yo=[{type:"analogInput",position:{x:0,y:0}},{type:"analogInput",position:{x:0,y:60}},{type:"analogInput",position:{x:0,y:120}},{type:"discreteOutput",position:{x:1500,y:0}},{type:"discreteOutput",position:{x:1500,y:60}},{type:"discreteOutput",position:{x:1500,y:120}},{type:"discreteOutput",position:{x:1500,y:180}},{type:"discreteOutput",position:{x:1500,y:240}}],mo=[{type:"analogInput",position:{x:0,y:0}},{type:"analogInput",position:{x:0,y:60}},{type:"analogInput",position:{x:0,y:120}},{type:"analogInput",position:{x:0,y:180}},{type:"analogInput",position:{x:0,y:240}},{type:"analogInput",position:{x:0,y:300}},{type:"discreteInput",position:{x:0,y:360}},{type:"discreteInput",position:{x:0,y:420}},{type:"discreteInput",position:{x:0,y:480}},{type:"discreteInput",position:{x:0,y:540}},{type:"discreteInput",position:{x:0,y:600}},{type:"discreteInput",position:{x:0,y:660}},{type:"discreteOutput",position:{x:1500,y:0}},{type:"discreteOutput",position:{x:1500,y:60}},{type:"discreteOutput",position:{x:1500,y:120}},{type:"discreteOutput",position:{x:1500,y:180}},{type:"discreteOutput",position:{x:1500,y:240}}],bo=[{type:"analogInput",position:{x:0,y:0}},{type:"fifoWordWithoutEn",position:{x:530,y:-150}},{type:"fourierInt",position:{x:360,y:-5}},{type:"subInt",position:{x:750,y:-60}},{type:"constInt",position:{x:550,y:250}},{type:"constInt",position:{x:550,y:350}},{type:"moreInt",position:{x:970,y:-100}},{type:"lessInt",position:{x:970,y:100}},{type:"or",position:{x:1180,y:-50}},{type:"discreteOutput",position:{x:1400,y:0}}],ge={ikz:yo,rza:mo,template1:bo},vo=t=>{const e={type:t.type,inputHandles:t.inputHandles,outputHandles:t.outputHandles,...t.name&&{name:t.name}};return"lengthMemory"in t?{...e,lengthMemory:t.lengthMemory}:"digit"in t?{...e,digit:t.digit}:"setpointDataType"in t?{...e,setpointDataType:t.setpointDataType,setpointValue:t.setpointValue}:e},Me=(t,e)=>{const a=jn[t];if(!a)return et(`Неизвестный тип узла: ${t}`,{variant:"error"}),null;const i=vo(a);return i?{id:Nt(),type:"node",position:e,data:{...i}}:(et("Не удалось выделить память",{variant:"error"}),null)},xo=()=>{const t=Ot(n=>n.addNode,J),{screenToFlowPosition:e}=L();return{onDragOver:C.useCallback(n=>{n.preventDefault(),n.dataTransfer.dropEffect="move"},[]),onDrop:n=>{n.preventDefault();const o=n.dataTransfer.getData("application/reactflow"),s=e({x:n.clientX,y:n.clientY}),r=Me(o,s);r&&t(r)}}},Eo=()=>{const[t,e]=Ot(n=>[n.nodes,n.setNodes],J);return{templatesKeys:Ee(ge),addNodeByTemplate:n=>{const s=ge[n].reduce((r,l)=>{const u=Me(l.type,l.position);return u&&r.push(u),r},[]);e([...t,...s])}}},_o=({})=>{const[t,e]=C.useState(""),{templatesKeys:a,addNodeByTemplate:i}=Eo(),n={ikz:"ИКЗ",rza:"РЗА",template1:"Шаблон икз2"};return c.jsx("div",{children:c.jsx(pn,{value:t,placeholder:"шаблоны",options:a.map(o=>({value:o,label:n[o]})),onChange:o=>{i(o),e(o)}})})},ko=({nodes:t})=>{const{calculateConfig:e,sendResConfig:a}=go(),{cut:i,copy:n,paste:o,bufferedNodes:s}=Be(),r=t.some(({selected:u})=>u),l=s.length>0;return c.jsxs(c.Fragment,{children:[c.jsx(Bt,{position:"top-left",children:c.jsx(_o,{})}),c.jsxs(Bt,{position:"top-center",style:{display:"flex",gap:"10px"},children:[c.jsx(P,{text:"cut",type:"button",onClick:()=>i(),disabled:!r}),c.jsx(P,{text:"copy",type:"button",onClick:()=>n(),disabled:!r}),c.jsx(P,{text:"paste",type:"button",onClick:()=>o(),disabled:!l}),c.jsx(P,{text:"Рассчитать",type:"button",onClick:()=>e()}),c.jsx(P,{text:"Отправить",type:"button",onClick:()=>a()})]}),c.jsx(Bt,{position:"top-right",children:c.jsx(to,{})})]})},Co=()=>{const{nodes:t,edges:e,onNodesChange:a,onEdgesChange:i,addEdge:n}=Ot(Sn,J),{onDragOver:o,onDrop:s}=xo(),{getNodes:r,getEdges:l}=L(),{enqueueSnackbar:u}=ua();return{nodes:t,edges:e,onNodesChange:a,onEdgesChange:i,addEdge:n,onDragOver:o,onDrop:s,isValidConnection:y=>{var w,N,B,j;const f=r(),h=l(),g=y.source??"",v=y.target??"",p=y.sourceHandle,E=y.targetHandle,_=f.find(T=>T.id===g),k=f.find(T=>T.id===v);if(!_||!k||!p||!E)return!1;const x=((w=_.data.outputHandles[p==null?void 0:p.split(" ")[1]])==null?void 0:w.dataType)||((N=_.data.inputHandles[p==null?void 0:p.split(" ")[1]])==null?void 0:N.dataType),I=((B=k.data.inputHandles[E==null?void 0:E.split(" ")[1]])==null?void 0:B.dataType)||((j=k.data.outputHandles[E==null?void 0:E.split(" ")[1]])==null?void 0:j.dataType);if(x!==I)return!1;const b=(T,H=new Set)=>{if(H.has(T.id))return!1;H.add(T.id);for(const M of nn(T,f,h))if(M.id===g||b(M,H))return!0;return!1};return g===v?!1:!b(k)},onConnectEnd:(y,f)=>{var B,j,T,H,M,q,Et,Qt;const{fromNode:h,fromHandle:g,toNode:v,toHandle:p,isValid:E}=f,_=Ht=>Ht==null?void 0:Ht.data;if(!h||!v||!(g!=null&&g.id)||!(p!=null&&p.id))return;const k=g.id.split(" ")[1],x=p.id.split(" ")[1],I=_(h),b=_(v),w=((j=(B=I.outputHandles)==null?void 0:B[k])==null?void 0:j.dataType)??((H=(T=I.inputHandles)==null?void 0:T[k])==null?void 0:H.dataType),N=((q=(M=b.inputHandles)==null?void 0:M[x])==null?void 0:q.dataType)??((Qt=(Et=b.outputHandles)==null?void 0:Et[x])==null?void 0:Qt.dataType);w!==N&&E===!1&&u("Нерроектное соединение",{variant:"error"})}}},Io=()=>{const{nodes:t,edges:e,onNodesChange:a,onEdgesChange:i,onDragOver:n,onDrop:o,isValidConnection:s,onConnectEnd:r,addEdge:l}=Co();return console.log(t),c.jsx("div",{className:Nn["graph-editor"],children:c.jsxs(on,{deleteKeyCode:null,proOptions:qa,nodeTypes:Ka,edgeTypes:Ua,nodes:t,edges:e,onNodesChange:a,onEdgesChange:i,onConnect:l,onDragOver:n,onDrop:o,connectionLineComponent:Xa,isValidConnection:s,onConnectEnd:r,fitView:!0,children:[c.jsx(ko,{nodes:t}),c.jsx(sn,{}),c.jsx(rn,{})]})})},wo=()=>c.jsx(an,{children:c.jsx(la,{maxSnack:3,children:c.jsx(Io,{})})}),Po=()=>c.jsx(wo,{});export{Po as default};
