import{a5 as g,d as i,aa as v,j as t,e as r,r as u}from"./index-DSBvIpo4.js";import{a as x,b as _}from"./index-D7eOBIdZ.js";import{s as m}from"./shallow-BHpKla55.js";import{I as j}from"./Input-CspveY7l.js";function p(n){return g({attr:{t:"1569683368540",viewBox:"0 0 1024 1024",version:"1.1"},child:[{tag:"path",attr:{d:"M899.1 869.6l-53-305.6H864c14.4 0 26-11.6 26-26V346c0-14.4-11.6-26-26-26H618V138c0-14.4-11.6-26-26-26H432c-14.4 0-26 11.6-26 26v182H160c-14.4 0-26 11.6-26 26v192c0 14.4 11.6 26 26 26h17.9l-53 305.6c-0.3 1.5-0.4 3-0.4 4.4 0 14.4 11.6 26 26 26h723c1.5 0 3-0.1 4.4-0.4 14.2-2.4 23.7-15.9 21.2-30zM204 390h272V182h72v208h272v104H204V390z m468 440V674c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v156H416V674c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v156H202.8l45.1-260H776l45.1 260H672z"},child:[]}]})(n)}const b="_btn_bicqi_13",a={"terminal-panel":"_terminal-panel_bicqi_1",btn:b},f=()=>{const n=()=>{const{addLog:e,device:s,boundHandleDisconnection:l}=i.getState();if(s){if(s.removeEventListener("gattserverdisconnected",l),e(`Disconnecting from "${s.name}" bluetooth device...`),!s.gatt.connected){e(`"${s.name}" bluetooth device is already disconnected`);return}s.gatt.disconnect(),e(`"${s.name}" bluetooth device disconnected`)}};return{disconnect:()=>{const{characteristics:{chartCharacteristic:e,modemCharacteristic:s},handleModemParametrsChanged:l}=i.getState(),{handleChartChanged:o}=v.getState();n(),s&&s.removeEventListener("characteristicvaluechanged",l),e&&e.removeEventListener("characteristicvaluechanged",o),i.setState({device:null,characteristics:{}})}}},L=({})=>{const[n,c]=i(s=>[s.clearLogs,s.connect],m),{disconnect:e}=f();return t.jsxs("div",{className:a["terminal-panel"],children:[t.jsx("div",{className:a.btn,children:t.jsx(p,{onClick:n,className:r(a.button,a.clear)})}),t.jsx("div",{className:a.btn,children:t.jsx(x,{onClick:()=>c(),className:r(a.button,a.connect),"data-title":"Подключение"})}),t.jsx("div",{className:a.btn,children:t.jsx(_,{onClick:()=>e(),className:r(a.button,a.disconnect),"data-title":"Отключение"})})]})},C="_logs_uid5e_1",N={logs:C},H="_err_wjxol_17",y="_out_wjxol_29",h={"log-text":"_log-text_wjxol_1",err:H,in:"_in_wjxol_23",out:y},V=({log:n})=>{const{message:c,type:e}=n;return t.jsx("div",{className:r(h["log-text"],{[h[e]]:!!e}),children:c})},w=()=>{const[n]=i(e=>[e.logs],m),c=u.useRef(null);return u.useEffect(()=>{c.current&&(c.current.scrollTop=c.current.scrollHeight)},[n]),t.jsx("div",{ref:c,className:N.logs,children:n.map(e=>t.jsx(V,{log:e},e.id))})},d={"send-input":"_send-input_1ad3g_1","send-btn":"_send-btn_1ad3g_13"};function S(n){return g({attr:{viewBox:"0 0 16 16",fill:"currentColor"},child:[{tag:"path",attr:{d:"M1 1.91L1.78 1.5L15 7.44899V8.3999L1.78 14.33L1 13.91L2.58311 8L1 1.91ZM3.6118 8.5L2.33037 13.1295L13.5 7.8999L2.33037 2.83859L3.6118 7.43874L9 7.5V8.5H3.6118Z"},child:[]}]})(n)}const k=({})=>{const[n,c]=u.useState(""),[e]=i(o=>[o.send],m),s=o=>{o.key==="Enter"&&(e(n),c(""))},l=()=>{e(n),c("")};return t.jsxs("div",{className:d["send-input"],children:[t.jsx(j,{className:d["send-input"],onKeyDown:s,value:n,onChange:o=>c(o.target.value)}),t.jsx("div",{className:d["send-btn"],onClick:l,children:t.jsx(S,{})})]})},D="_terminal_10hkc_1",E={terminal:D},T=()=>t.jsxs("div",{className:E.terminal,children:[t.jsx(L,{}),t.jsx(w,{}),t.jsx(k,{})]});export{T as default};
