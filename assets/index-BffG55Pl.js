import{G as d,j as n,c as r,r as u}from"./index-C_4yp_nz.js";import{u as l}from"./store-BCoin98i.js";import{u as g}from"./store-3IfZCzQu.js";import{s as m}from"./shallow-CDFTM4LJ.js";import{I as x}from"./Input-C16kTWuA.js";import"./helpers-fab74NUc.js";function _(t){return d({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"m7 12-2-2-2 2 2 2 2-2zm10.71-4.29L12 2h-1v7.59L6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 11 14.41V22h1l5.71-5.71-4.3-4.29 4.3-4.29zM13 5.83l1.88 1.88L13 9.59V5.83zm1.88 10.46L13 18.17v-3.76l1.88 1.88zM19 10l-2 2 2 2 2-2-2-2z"},child:[]}]})(t)}function p(t){return d({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"m13 5.83 1.88 1.88-1.6 1.6 1.41 1.41 3.02-3.02L12 2h-1v5.03l2 2v-3.2zM5.41 4 4 5.41 10.59 12 5 17.59 6.41 19 11 14.41V22h1l4.29-4.29 2.3 2.29L20 18.59 5.41 4zM13 18.17v-3.76l1.88 1.88L13 18.17z"},child:[]}]})(t)}function j(t){return d({attr:{t:"1569683368540",viewBox:"0 0 1024 1024",version:"1.1"},child:[{tag:"path",attr:{d:"M899.1 869.6l-53-305.6H864c14.4 0 26-11.6 26-26V346c0-14.4-11.6-26-26-26H618V138c0-14.4-11.6-26-26-26H432c-14.4 0-26 11.6-26 26v182H160c-14.4 0-26 11.6-26 26v192c0 14.4 11.6 26 26 26h17.9l-53 305.6c-0.3 1.5-0.4 3-0.4 4.4 0 14.4 11.6 26 26 26h723c1.5 0 3-0.1 4.4-0.4 14.2-2.4 23.7-15.9 21.2-30zM204 390h272V182h72v208h272v104H204V390z m468 440V674c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v156H416V674c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v156H202.8l45.1-260H776l45.1 260H672z"},child:[]}]})(t)}const L="_btn_bicqi_13",a={"terminal-panel":"_terminal-panel_bicqi_1",btn:L},f=()=>{const t=()=>{const{addLog:e,device:s,boundHandleDisconnection:i}=l.getState();if(s){if(s.removeEventListener("gattserverdisconnected",i),e(`Disconnecting from "${s.name}" bluetooth device...`),!s.gatt.connected){e(`"${s.name}" bluetooth device is already disconnected`);return}s.gatt.disconnect(),e(`"${s.name}" bluetooth device disconnected`)}};return{disconnect:()=>{const{characteristics:{chartCharacteristic:e,modemCharacteristic:s},handleModemParametrsChanged:i}=l.getState(),{handleChartChanged:o}=g.getState();t(),s&&s.removeEventListener("characteristicvaluechanged",i),e&&e.removeEventListener("characteristicvaluechanged",o),l.setState({device:null,characteristics:{}})}}},b=({})=>{const[t,c]=l(s=>[s.clearLogs,s.connect],m),{disconnect:e}=f();return n.jsxs("div",{className:a["terminal-panel"],children:[n.jsx("div",{className:a.btn,children:n.jsx(j,{onClick:t,className:r(a.button,a.clear)})}),n.jsx("div",{className:a.btn,children:n.jsx(_,{onClick:()=>c(),className:r(a.button,a.connect),"data-title":"Подключение"})}),n.jsx("div",{className:a.btn,children:n.jsx(p,{onClick:()=>e(),className:r(a.button,a.disconnect),"data-title":"Отключение"})})]})},V="_logs_j6wej_1",C={logs:V},H="_err_wjxol_17",z="_out_wjxol_29",v={"log-text":"_log-text_wjxol_1",err:H,in:"_in_wjxol_23",out:z},M=({log:t})=>{const{message:c,type:e}=t;return n.jsx("div",{className:r(v["log-text"],{[v[e]]:!!e}),children:c})},N=()=>{const[t]=l(e=>[e.logs],m),c=u.useRef(null);return u.useEffect(()=>{c.current&&(c.current.scrollTop=c.current.scrollHeight)},[t]),n.jsx("div",{ref:c,className:C.logs,children:t.map(e=>n.jsx(M,{log:e},e.id))})},h={"send-input":"_send-input_1ad3g_1","send-btn":"_send-btn_1ad3g_13"};function w(t){return d({attr:{viewBox:"0 0 16 16",fill:"currentColor"},child:[{tag:"path",attr:{d:"M1 1.91L1.78 1.5L15 7.44899V8.3999L1.78 14.33L1 13.91L2.58311 8L1 1.91ZM3.6118 8.5L2.33037 13.1295L13.5 7.8999L2.33037 2.83859L3.6118 7.43874L9 7.5V8.5H3.6118Z"},child:[]}]})(t)}const y=({})=>{const[t,c]=u.useState(""),[e]=l(o=>[o.send],m),s=o=>{o.key==="Enter"&&(e(t),c(""))},i=()=>{e(t),c("")};return n.jsxs("div",{className:h["send-input"],children:[n.jsx(x,{className:h["send-input"],onKeyDown:s,value:t,onChange:o=>c(o.target.value)}),n.jsx("div",{className:h["send-btn"],onClick:i,children:n.jsx(w,{})})]})},B="_terminal_x6e0x_1",S={terminal:B},O=()=>n.jsxs("div",{className:S.terminal,children:[n.jsx(b,{}),n.jsx(N,{}),n.jsx(y,{})]});export{O as default};
