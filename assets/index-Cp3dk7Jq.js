import{r as k,j as c,c as K,G as Re,R as S,a as Pe}from"./index-Cl_3Smb9.js";import{u as B,a as me,g as ve,B as We,E as Ve,P,b as xe,c as Fe,d as Ae,H as qe,e as Yt,N as ze,f as Ke,C as Xe,o as Ue,i as Ye,l as Ge,h as Ze,j as Qe,t as Je,F as tn,k as en,m as nn,n as Ht,p as Lt,q as an,R as on,r as sn,s as rn,v as ln}from"./index-CTcrSIgt.js";import{I as gt}from"./Input-Ct795oB5.js";import{s as q,c as un}from"./shallow-1hw2PWpb.js";import{u as Gt,a as cn,b as dn}from"./useUpdateSetpointValue-tJ71ti2U.js";import{B as R}from"./Button-rIerj3K-.js";import{v as St}from"./v4-C6aID195.js";import{u as pn,a as fn}from"./useBleStore-CYKWYSH2.js";import{u as hn}from"./store-CsRSOMGR.js";import{u as yn}from"./store-C2k1J5Yc.js";import{g as be}from"./helpers-C0jkC3_s.js";import{u as Ee}from"./store-CLaN9TPo.js";import{C as gn}from"./CustomSelect-BxHE7bcd.js";const mn="_popup_cjxb8_1",vn="_left_cjxb8_61",xn="_center_cjxb8_67",bn="_right_cjxb8_75",En="_visible_cjxb8_81",_n="_popup__label_cjxb8_91",ut={popup:mn,"popup-content":"_popup-content_cjxb8_11",left:vn,center:xn,right:bn,visible:En,popup__label:_n},Cn=({text:t,children:e,position:a})=>{const[o,n]=k.useState(!1),s=k.useRef(null);k.useEffect(()=>{const i=l=>{s.current&&l.target instanceof Node&&!s.current.contains(l.target)&&n(!1)};return document.addEventListener("click",i),()=>{document.removeEventListener("click",i)}},[]);const r=i=>{i.stopPropagation(),n(l=>!l)};return c.jsxs("div",{className:ut.popup,ref:s,children:[c.jsx(R,{text:t,type:"button",onClick:r}),c.jsxs("div",{className:K(ut["popup-content"],ut[a],{[ut.visible]:o}),children:[c.jsx("div",{className:ut.popup__label,children:t}),c.jsx("div",{children:e})]})]})};function kn(t){return Re({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 294.1L383 167c9.4-9.4 24.6-9.4 33.9 0s9.3 24.6 0 34L273 345c-9.1 9.1-23.7 9.3-33.1.7L95 201.1c-4.7-4.7-7-10.9-7-17s2.3-12.3 7-17c9.4-9.4 24.6-9.4 33.9 0l127.1 127z"},child:[]}]})(t)}const wn="_container_1y4rw_1",Tn="_header_1y4rw_19",In="_title_1y4rw_51",On="_arrow_1y4rw_63",Sn="_rotated_1y4rw_73",jn="_content_1y4rw_81",Nn="_innerContent_1y4rw_91",X={container:wn,header:Tn,title:In,arrow:On,rotated:Sn,content:jn,innerContent:Nn},U=({name:t,children:e,defaultOpen:a=!1})=>{const[o,n]=k.useState(a),[s,r]=k.useState(0),i=k.useRef(null);k.useEffect(()=>{i.current&&r(i.current.scrollHeight)},[e]);const l=()=>{n(d=>!d)};return c.jsxs("div",{className:X.container,children:[c.jsxs("button",{className:X.header,onClick:l,"aria-expanded":o,children:[c.jsx("span",{className:X.title,children:t}),c.jsx(kn,{className:K(X.arrow,{[X.rotated]:o})})]}),c.jsx("div",{ref:i,className:X.content,style:{height:o?`${s}px`:"0px"},"aria-hidden":!o,children:c.jsx("div",{className:X.innerContent,children:e})})]})},Hn={"graph-editor":"_graph-editor_3h800_1"},Dn=t=>({nodes:t.nodes,edges:t.edges,onNodesChange:t.onNodesChange,onEdgesChange:t.onEdgesChange,addEdge:t.addEdge}),Bn={discreteInput:{outputHandles:{out:{dataType:"bool"}},inputHandles:{},type:"discreteInput"},discreteOutput:{inputHandles:{input:{dataType:"bool"}},outputHandles:{},type:"discreteOutput",name:""},analogInput:{outputHandles:{out:{dataType:"analog"}},inputHandles:{},type:"analogInput"},analogOutput:{inputHandles:{input:{dataType:"float"}},outputHandles:{},type:"analogOutput",name:""},xor:{inputHandles:{"input-1":{dataType:"bool"},"input-2":{dataType:"bool"}},outputHandles:{out:{dataType:"bool"}},type:"xor"},and:{inputHandles:{"input-1":{dataType:"bool"},"input-2":{dataType:"bool"}},outputHandles:{out:{dataType:"bool"}},type:"and"},or:{inputHandles:{"input-1":{dataType:"bool"},"input-2":{dataType:"bool"},"input-3":{dataType:"bool"}},outputHandles:{out:{dataType:"bool"}},type:"or"},nand:{inputHandles:{"input-1":{dataType:"bool"},"input-2":{dataType:"bool"},"input-3":{dataType:"bool"}},outputHandles:{out:{dataType:"bool"}},type:"nand"},nor:{inputHandles:{"input-1":{dataType:"bool"},"input-2":{dataType:"bool"},"input-3":{dataType:"bool"}},outputHandles:{out:{dataType:"bool"}},type:"nor"},notOperation:{inputHandles:{"input-1":{dataType:"bool"}},outputHandles:{out:{dataType:"bool"}},type:"notOperation"},sumInt:{inputHandles:{"input-1":{dataType:"int"},"input-2":{dataType:"int"}},outputHandles:{out:{dataType:"int"}},type:"sumInt"},multInt:{inputHandles:{"input-1":{dataType:"int"},"input-2":{dataType:"int"}},outputHandles:{out:{dataType:"int"}},type:"multInt"},subInt:{inputHandles:{"input-1":{dataType:"int"},"input-2":{dataType:"int"}},outputHandles:{out:{dataType:"int"}},type:"subInt"},equalsInt:{inputHandles:{"input-1":{dataType:"int"},"input-2":{dataType:"int"}},outputHandles:{out:{dataType:"bool"}},type:"equalsInt"},lessInt:{inputHandles:{"input-1":{dataType:"int"},"input-2":{dataType:"int"}},outputHandles:{out:{dataType:"bool"}},type:"lessInt"},moreInt:{inputHandles:{"input-1":{dataType:"int"},"input-2":{dataType:"int"}},outputHandles:{out:{dataType:"bool"}},type:"moreInt"},timerInt:{inputHandles:{},outputHandles:{out:{dataType:"int"}},setpointDataType:"int",setpointOffset:null,type:"timerInt",name:""},constInt:{inputHandles:{},outputHandles:{out:{dataType:"int"}},setpointDataType:"int",setpointOffset:null,type:"constInt",name:""},constBoolean:{inputHandles:{},outputHandles:{out:{dataType:"bool"}},setpointDataType:"int",setpointOffset:null,type:"constBoolean",name:""},fourierInt:{inputHandles:{"input-1":{dataType:"analog"}},outputHandles:{"out-1":{dataType:"int"},"out-2":{dataType:"int"}},type:"fourierInt",setpointDataType:"int",setpointOffset:null},fifoByte:{type:"fifoByte",lengthMemory:1,inputHandles:{"input-1":{dataType:"bool"},"input-2":{dataType:"bool"}},outputHandles:{"out-1":{dataType:"bool"}}},fifoWord:{type:"fifoWord",lengthMemory:1,inputHandles:{"input-1":{dataType:"int"},"input-2":{dataType:"bool"}},outputHandles:{"out-1":{dataType:"int"}}},fifoByteWithoutEn:{type:"fifoByteWithoutEn",lengthMemory:1,inputHandles:{"input-1":{dataType:"bool"}},outputHandles:{"out-1":{dataType:"bool"}}},fifoWordWithoutEn:{type:"fifoWordWithoutEn",lengthMemory:1,inputHandles:{"input-1":{dataType:"int"}},outputHandles:{"out-1":{dataType:"int"}}},dtrigger:{inputHandles:{},outputHandles:{out:{dataType:"bool"}},type:"dtrigger"}},rt={discreteInput:{0:{instruction:[34,12,131,199,5,0,35,0,245,0,130,128],lengthInBytes:12,in_type:33}},discreteOutput:{1:{instruction:[34,12,131,199,5,0,35,0,245,0,130,128],lengthInBytes:12,in_type:30}},analogInput:{0:{instruction:[34,12,131,199,5,0,35,0,245,0,130,128],lengthInBytes:12,in_type:33}},analogOutput:{},dtrigger:{},multInt:{2:{instruction:[34,12,156,65,24,66,179,135,231,2,28,193,130,128],lengthInBytes:14,in_type:8}},subInt:{2:{instruction:[34,12,156,65,24,66,153,143,28,193,130,128],lengthInBytes:12,in_type:8}},sumInt:{2:{instruction:[34,12,156,65,24,66,186,151,28,193,130,128],lengthInBytes:12,in_type:8},3:{instruction:[130,128,24,66,156,65,186,151,152,66,186,151,28,193,130,128],lengthInBytes:16,in_type:9},4:{instruction:[130,128,156,65,16,66,148,66,24,67,178,151,182,151,186,151,28,193,130,128],lengthInBytes:20,in_type:10},5:{instruction:[130,128,140,65,16,66,148,66,24,67,156,67,178,149,182,149,186,149,190,149,12,193,130,128],lengthInBytes:24,in_type:11},6:{instruction:[130,128,140,65,16,66,148,66,24,67,156,67,178,149,182,149,186,149,190,149,131,39,8,0,190,149,12,193,130,128],lengthInBytes:30,in_type:12},7:{instruction:[130,128,140,65,16,66,148,66,24,67,156,67,178,149,182,149,186,149,190,149,131,39,8,0,190,149,131,167,8,0,190,149,12,193,130,128],lengthInBytes:36,in_type:13}},notOperation:{1:{instruction:[34,12,131,199,5,0,147,199,23,0,35,0,245,0,130,128],lengthInBytes:16,in_type:1}},and:{2:{instruction:[34,12,131,199,5,0,3,71,6,0,249,143,35,0,245,0,130,128],lengthInBytes:18,in_type:2},3:{instruction:[130,128,3,199,6,0,131,71,6,0,249,143,3,199,5,0,249,143,35,0,245,0,130,128],lengthInBytes:24,in_type:3},4:{instruction:[130,128,3,71,7,0,131,199,6,0,249,143,3,71,6,0,249,143,3,199,5,0,249,143,35,0,245,0,130,128],lengthInBytes:30,in_type:4},5:{instruction:[130,128,131,199,7,0,3,71,7,0,125,143,131,199,6,0,125,143,131,71,6,0,125,143,131,199,5,0,125,143,35,0,229,0,130,128],lengthInBytes:36,in_type:5},6:{instruction:[130,128,131,199,7,0,3,72,8,0,3,71,7,0,179,247,7,1,249,143,3,199,6,0,249,143,3,71,6,0,249,143,3,199,5,0,249,143,35,0,245,0,130,128],lengthInBytes:44,in_type:6},7:{instruction:[130,128,3,72,8,0,131,200,8,0,131,199,7,0,51,120,24,1,51,120,248,0,131,71,7,0,51,120,248,0,131,199,6,0,51,120,248,0,131,71,6,0,51,120,248,0,131,199,5,0,51,120,248,0,35,0,5,1,130,128],lengthInBytes:60,in_type:7}},nand:{2:{instruction:[34,12,131,199,5,0,3,71,6,0,249,143,147,199,23,0,35,0,245,0,130,128],lengthInBytes:22,in_type:2},3:{instruction:[130,128,3,199,6,0,131,71,6,0,249,143,3,199,5,0,249,143,147,199,23,0,35,0,245,0,130,128],lengthInBytes:28,in_type:3},4:{instruction:[130,128,3,71,7,0,131,199,6,0,249,143,3,71,6,0,249,143,3,199,5,0,249,143,147,199,23,0,35,0,245,0,130,128],lengthInBytes:34,in_type:4},5:{instruction:[130,128,131,199,7,0,3,71,7,0,125,143,131,199,6,0,125,143,131,71,6,0,125,143,131,199,5,0,125,143,19,71,23,0,35,0,229,0,130,128],lengthInBytes:40,in_type:5},6:{instruction:[130,128,131,199,7,0,3,72,8,0,3,71,7,0,179,247,7,1,249,143,3,199,6,0,249,143,3,71,6,0,249,143,3,199,5,0,249,143,147,199,23,0,35,0,245,0,130,128],lengthInBytes:48,in_type:6},7:{instruction:[130,128,3,72,8,0,131,200,8,0,131,199,7,0,51,120,24,1,51,120,248,0,131,71,7,0,51,120,248,0,131,199,6,0,51,120,248,0,131,71,6,0,51,120,248,0,131,199,5,0,51,120,248,0,19,72,24,0,35,0,5,1,130,128],lengthInBytes:64,in_type:7}},nor:{2:{instruction:[34,12,131,199,5,0,3,71,6,0,249,143,147,199,23,0,35,0,245,0,130,128],lengthInBytes:22,in_type:2},3:{instruction:[130,128,3,199,6,0,131,71,6,0,249,143,3,199,5,0,249,143,147,199,23,0,35,0,245,0,130,128],lengthInBytes:28,in_type:3},4:{instruction:[130,128,3,71,7,0,131,199,6,0,249,143,3,71,6,0,249,143,3,199,5,0,249,143,147,199,23,0,35,0,245,0,130,128],lengthInBytes:34,in_type:4},5:{instruction:[130,128,131,199,7,0,3,71,7,0,125,143,131,199,6,0,125,143,131,71,6,0,125,143,131,199,5,0,125,143,19,71,23,0,35,0,229,0,130,128],lengthInBytes:40,in_type:5},6:{instruction:[130,128,131,199,7,0,3,72,8,0,3,71,7,0,179,247,7,1,249,143,3,199,6,0,249,143,3,71,6,0,249,143,3,199,5,0,249,143,147,199,23,0,35,0,245,0,130,128],lengthInBytes:48,in_type:6},7:{instruction:[130,128,3,72,8,0,131,200,8,0,131,199,7,0,51,120,24,1,51,120,248,0,131,71,7,0,51,120,248,0,131,199,6,0,51,120,248,0,131,71,6,0,51,120,248,0,131,199,5,0,51,120,248,0,19,72,24,0,35,0,5,1,130,128],lengthInBytes:64,in_type:7}},or:{2:{instruction:[34,12,131,199,5,0,3,71,6,0,217,143,35,0,245,0,130,128],lengthInBytes:18,in_type:2},3:{instruction:[130,128,3,199,6,0,131,71,6,0,217,143,3,199,5,0,217,143,35,0,245,0,130,128],lengthInBytes:24,in_type:3},4:{instruction:[130,128,3,71,7,0,131,199,6,0,217,143,3,71,6,0,217,143,3,199,5,0,217,143,35,0,245,0,130,128],lengthInBytes:30,in_type:4},5:{instruction:[130,128,131,199,7,0,3,71,7,0,93,143,131,199,6,0,93,143,131,71,6,0,93,143,131,199,5,0,93,143,35,0,229,0,130,128],lengthInBytes:36,in_type:5},6:{instruction:[130,128,131,199,7,0,3,72,8,0,3,71,7,0,179,231,7,1,217,143,3,199,6,0,217,143,3,71,6,0,217,143,3,199,5,0,217,143,35,0,245,0,130,128],lengthInBytes:44,in_type:6},7:{instruction:[130,128,3,72,8,0,131,200,8,0,131,199,7,0,51,104,24,1,51,104,248,0,131,71,7,0,51,104,248,0,131,199,6,0,51,104,248,0,131,71,6,0,51,104,248,0,131,199,5,0,51,104,248,0,35,0,5,1,130,128],lengthInBytes:60,in_type:7}},xor:{2:{instruction:[34,12,131,199,5,0,3,71,6,0,185,143,35,0,245,0,130,128],lengthInBytes:18,in_type:2},3:{instruction:[130,128,3,199,6,0,131,71,6,0,185,143,3,199,5,0,185,143,35,0,245,0,130,128],lengthInBytes:24,in_type:3},4:{instruction:[130,128,3,71,7,0,131,199,6,0,185,143,3,71,6,0,185,143,3,199,5,0,185,143,35,0,245,0,130,128],lengthInBytes:30,in_type:4},5:{instruction:[130,128,131,199,7,0,3,71,7,0,61,143,131,199,6,0,61,143,131,71,6,0,61,143,131,199,5,0,61,143,35,0,229,0,130,128],lengthInBytes:36,in_type:5},6:{instruction:[130,128,131,199,7,0,3,72,8,0,3,71,7,0,179,199,7,1,185,143,3,199,6,0,185,143,3,71,6,0,185,143,3,199,5,0,185,143,35,0,245,0,130,128],lengthInBytes:44,in_type:6},7:{instruction:[130,128,3,72,8,0,131,200,8,0,131,199,7,0,51,72,24,1,51,72,248,0,131,71,7,0,51,72,248,0,131,199,6,0,51,72,248,0,131,71,6,0,51,72,248,0,131,199,5,0,51,72,248,0,35,0,5,1,130,128],lengthInBytes:60,in_type:7}},equalsInt:{2:{instruction:[34,12,152,65,28,66,35,0,5,0,99,21,247,0,133,71,35,0,245,0,130,128],lengthInBytes:22,in_type:26}},equalsFloat:{},moreInt:{2:{instruction:[34,12,152,65,28,66,35,0,5,0,99,213,231,0,133,71,35,0,245,0,130,128],lengthInBytes:22,in_type:26}},moreFloat:{},lessInt:{2:{instruction:[34,12,152,65,28,66,35,0,5,0,99,85,247,0,133,71,35,0,245,0,130,128],lengthInBytes:22,in_type:26}},lessFloat:{},constInt:{0:{instruction:[34,12,156,65,28,193,130,128],lengthInBytes:8,in_type:28}},constBoolean:{0:{instruction:[34,12,131,199,5,0,35,0,245,0,130,128],lengthInBytes:8,in_type:29}},timerInt:{0:{instruction:[34,12,28,65,133,7,28,193,152,65,99,84,247,0,35,32,5,0,130,128],lengthInBytes:20,in_type:27}},fourierInt:{1:{instruction:[],lengthInBytes:0,in_type:36},2:{instruction:[],lengthInBytes:0,in_type:37},3:{instruction:[],lengthInBytes:0,in_type:38}},fifoByte:{2:{instruction:[3,71,7,0,13,195,152,67,99,100,183,0,35,160,7,0,131,198,6,0,152,67,42,151,35,0,215,0,152,67,5,7,99,122,183,0,152,195,156,67,62,149,131,71,5,0,35,0,246,0,130,128,35,160,7,0,253,183,130,128],lengthInBytes:60,in_type:41}},fifoWord:{2:{instruction:[3,71,7,0,5,195,152,67,99,100,183,0,35,160,7,0,148,66,152,67,51,71,167,32,20,195,152,67,5,7,99,121,183,0,152,195,156,67,51,197,167,32,28,65,28,194,130,128,35,160,7,0,197,191,130,128],lengthInBytes:56,in_type:42}},fifoByteWithoutEn:{1:{instruction:[28,67,99,228,183,0,35,32,7,0,148,66,28,67,179,199,167,32,148,195,20,67,147,135,22,0,179,181,183,0,179,5,176,64,237,143,28,195,179,199,167,32,156,67,28,194,130,128],lengthInBytes:48,in_type:43}},fifoWordWithoutEn:{1:{instruction:[28,67,99,228,183,0,35,32,7,0,131,198,6,0,28,67,170,151,35,128,215,0,28,67,133,7,179,181,183,0,179,5,176,64,237,143,28,195,62,149,131,71,5,0,35,0,246,0,130,128],lengthInBytes:50,in_type:44}}},ot={bool:{clr:"#00ff00",selectedClr:"#08d508"},int:{clr:"#368ff4",selectedClr:"#2b79d2"},float:{clr:"#ffe417",selectedClr:"#ead219"},analog:{clr:"#cd1fe8",selectedClr:"#ab2cbe"}},Ln={bool:void 0,analog:void 0,int:"circle",float:"arrow-closed"},_t={"button-edge__label":"_button-edge__label_t1jz9_1","button-txt":"_button-txt_t1jz9_55",delete:"_delete_t1jz9_81"},Mn=({id:t,source:e,sourceHandleId:a,sourceX:o,sourceY:n,targetX:s,targetY:r,selected:i,sourcePosition:l=P.Right,targetPosition:d=P.Left})=>{var H,L,W,lt;const{getEdge:p,setEdges:v,updateNodeData:m}=B(),w=me(V=>V.nodeLookup.get(e),q),u=p(t);if(!w||!u||!a)return null;const h=a.split(" ")[1],_=w.data.outputHandles[h];if(!_)return null;const{dataType:g,oscillography:f,name:y}=_,[x,b,T]=ve({sourceX:o,sourceY:n,targetX:s,targetY:r,sourcePosition:l,targetPosition:d,borderRadius:8,offset:17}),E=i?(H=ot[g])==null?void 0:H.selectedClr:(L=ot[g])==null?void 0:L.clr,C=Ln[g],I=()=>{v(V=>V.filter(Et=>Et.id!==u.id))},j=()=>{m(w.id,{outputHandles:{...w.data.outputHandles,[h]:{..._,oscillography:!f,name:""}}})},D=V=>{m(w.id,{outputHandles:{...w.data.outputHandles,[h]:{..._,name:V.target.value??""}}})};return c.jsxs(c.Fragment,{children:[c.jsxs("defs",{children:[c.jsx("marker",{id:"circle",viewBox:"0 0 10 10",refX:9,refY:5,markerWidth:8,markerHeight:8,orient:"auto-start-reverse",children:c.jsx("circle",{cx:"6",cy:"5",r:"3",fill:(W=ot.int)==null?void 0:W.clr})}),c.jsx("marker",{id:"arrow-closed",viewBox:"0 0 10 10",refX:10,refY:5,markerWidth:8,markerHeight:8,orient:"auto-start-reverse",children:c.jsx("path",{d:"M 0 0 L 10 5 L 0 10 Z",fill:(lt=ot.float)==null?void 0:lt.clr})})]}),c.jsx(We,{id:t,path:x,style:{stroke:E,strokeWidth:3},markerEnd:C?`url(#${C})`:void 0}),i&&c.jsx(Ve,{children:c.jsxs("div",{className:K(_t["button-edge__label"],"nodrag","nopan"),style:{transform:`translate(-50%, -140%) translate(${b}px,${T}px)`},children:[f&&c.jsx(gt,{style:{width:"100%",padding:"6px",fontSize:"14px"},placeholder:"Название сигнала",type:"text",value:y,onChange:D}),c.jsx("button",{className:_t["button-txt"],onClick:j,children:f?"Разосцилографировать":"Осцилографировать"}),c.jsx("button",{className:K(_t["button-txt"],_t.delete),onClick:I,children:"Удалить"})]})})]})};function _e(t){var e,a,o="";if(typeof t=="string"||typeof t=="number")o+=t;else if(typeof t=="object")if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(a=_e(t[e]))&&(o&&(o+=" "),o+=a);else for(e in t)t[e]&&(o&&(o+=" "),o+=e);return o}function tt(){for(var t,e,a=0,o="";a<arguments.length;)(t=arguments[a++])&&(e=_e(t))&&(o&&(o+=" "),o+=e);return o}let $n={data:""},Rn=t=>typeof window=="object"?((t?t.querySelector("#_goober"):window._goober)||Object.assign((t||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:t||$n,Pn=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,Wn=/\/\*[^]*?\*\/|  +/g,te=/\n+/g,Q=(t,e)=>{let a="",o="",n="";for(let s in t){let r=t[s];s[0]=="@"?s[1]=="i"?a=s+" "+r+";":o+=s[1]=="f"?Q(r,s):s+"{"+Q(r,s[1]=="k"?"":e)+"}":typeof r=="object"?o+=Q(r,e?e.replace(/([^,])+/g,i=>s.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,l=>/&/.test(l)?l.replace(/&/g,i):i?i+" "+l:l)):s):r!=null&&(s=/^--/.test(s)?s:s.replace(/[A-Z]/g,"-$&").toLowerCase(),n+=Q.p?Q.p(s,r):s+":"+r+";")}return a+(e&&n?e+"{"+n+"}":n)+o},M={},Ce=t=>{if(typeof t=="object"){let e="";for(let a in t)e+=a+Ce(t[a]);return e}return t},Vn=(t,e,a,o,n)=>{let s=Ce(t),r=M[s]||(M[s]=(l=>{let d=0,p=11;for(;d<l.length;)p=101*p+l.charCodeAt(d++)>>>0;return"go"+p})(s));if(!M[r]){let l=s!==t?t:(d=>{let p,v,m=[{}];for(;p=Pn.exec(d.replace(Wn,""));)p[4]?m.shift():p[3]?(v=p[3].replace(te," ").trim(),m.unshift(m[0][v]=m[0][v]||{})):m[0][p[1]]=p[2].replace(te," ").trim();return m[0]})(t);M[r]=Q(n?{["@keyframes "+r]:l}:l,a?"":"."+r)}let i=a&&M.g?M.g:null;return a&&(M.g=M[r]),((l,d,p,v)=>{v?d.data=d.data.replace(v,l):d.data.indexOf(l)===-1&&(d.data=p?l+d.data:d.data+l)})(M[r],e,o,i),r},Fn=(t,e,a)=>t.reduce((o,n,s)=>{let r=e[s];if(r&&r.call){let i=r(a),l=i&&i.props&&i.props.className||/^go/.test(i)&&i;r=l?"."+l:i&&typeof i=="object"?i.props?"":Q(i,""):i===!1?"":i}return o+n+(r??"")},"");function Zt(t){let e=this||{},a=t.call?t(e.p):t;return Vn(a.unshift?a.raw?Fn(a,[].slice.call(arguments,1),e.p):a.reduce((o,n)=>Object.assign(o,n&&n.call?n(e.p):n),{}):a,Rn(e.target),e.g,e.o,e.k)}Zt.bind({g:1});Zt.bind({k:1});function An(t,e){for(var a=0;a<e.length;a++){var o=e[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function ke(t,e,a){return e&&An(t.prototype,e),t}function O(){return O=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])}return t},O.apply(this,arguments)}function we(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function xt(t,e){if(t==null)return{};var a={},o=Object.keys(t),n,s;for(s=0;s<o.length;s++)n=o[s],!(e.indexOf(n)>=0)&&(a[n]=t[n]);return a}function ee(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var ne=function(){return""},Te=S.createContext({enqueueSnackbar:ne,closeSnackbar:ne}),Z={downXs:"@media (max-width:599.95px)",upSm:"@media (min-width:600px)"},ae=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},Qt=function(e){return""+ae(e.vertical)+ae(e.horizontal)},Ct=function(e){return!!e||e===0},kt="unmounted",et="exited",nt="entering",ct="entered",oe="exiting",Jt=function(t){we(e,t);function e(o){var n;n=t.call(this,o)||this;var s=o.appear,r;return n.appearStatus=null,o.in?s?(r=et,n.appearStatus=nt):r=ct:o.unmountOnExit||o.mountOnEnter?r=kt:r=et,n.state={status:r},n.nextCallback=null,n}e.getDerivedStateFromProps=function(n,s){var r=n.in;return r&&s.status===kt?{status:et}:null};var a=e.prototype;return a.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},a.componentDidUpdate=function(n){var s=null;if(n!==this.props){var r=this.state.status;this.props.in?r!==nt&&r!==ct&&(s=nt):(r===nt||r===ct)&&(s=oe)}this.updateStatus(!1,s)},a.componentWillUnmount=function(){this.cancelNextCallback()},a.getTimeouts=function(){var n=this.props.timeout,s=n,r=n;return n!=null&&typeof n!="number"&&typeof n!="string"&&(r=n.exit,s=n.enter),{exit:r,enter:s}},a.updateStatus=function(n,s){n===void 0&&(n=!1),s!==null?(this.cancelNextCallback(),s===nt?this.performEnter(n):this.performExit()):this.props.unmountOnExit&&this.state.status===et&&this.setState({status:kt})},a.performEnter=function(n){var s=this,r=this.props.enter,i=n,l=this.getTimeouts();if(!n&&!r){this.safeSetState({status:ct},function(){s.props.onEntered&&s.props.onEntered(s.node,i)});return}this.props.onEnter&&this.props.onEnter(this.node,i),this.safeSetState({status:nt},function(){s.props.onEntering&&s.props.onEntering(s.node,i),s.onTransitionEnd(l.enter,function(){s.safeSetState({status:ct},function(){s.props.onEntered&&s.props.onEntered(s.node,i)})})})},a.performExit=function(){var n=this,s=this.props.exit,r=this.getTimeouts();if(!s){this.safeSetState({status:et},function(){n.props.onExited&&n.props.onExited(n.node)});return}this.props.onExit&&this.props.onExit(this.node),this.safeSetState({status:oe},function(){n.props.onExiting&&n.props.onExiting(n.node),n.onTransitionEnd(r.exit,function(){n.safeSetState({status:et},function(){n.props.onExited&&n.props.onExited(n.node)})})})},a.cancelNextCallback=function(){this.nextCallback!==null&&this.nextCallback.cancel&&(this.nextCallback.cancel(),this.nextCallback=null)},a.safeSetState=function(n,s){s=this.setNextCallback(s),this.setState(n,s)},a.setNextCallback=function(n){var s=this,r=!0;return this.nextCallback=function(){r&&(r=!1,s.nextCallback=null,n())},this.nextCallback.cancel=function(){r=!1},this.nextCallback},a.onTransitionEnd=function(n,s){this.setNextCallback(s);var r=n==null&&!this.props.addEndListener;if(!this.node||r){setTimeout(this.nextCallback,0);return}this.props.addEndListener&&this.props.addEndListener(this.node,this.nextCallback),n!=null&&setTimeout(this.nextCallback,n)},a.render=function(){var n=this.state.status;if(n===kt)return null;var s=this.props,r=s.children,i=xt(s,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return r(n,i)},ke(e,[{key:"node",get:function(){var n,s=(n=this.props.nodeRef)===null||n===void 0?void 0:n.current;if(!s)throw new Error("notistack - Custom snackbar is not refForwarding");return s}}]),e}(S.Component);function at(){}Jt.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:at,onEntering:at,onEntered:at,onExit:at,onExiting:at,onExited:at};function se(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function zt(t,e){return k.useMemo(function(){return t==null&&e==null?null:function(a){se(t,a),se(e,a)}},[t,e])}function Nt(t){var e=t.timeout,a=t.style,o=a===void 0?{}:a,n=t.mode;return{duration:typeof e=="object"?e[n]||0:e,easing:o.transitionTimingFunction,delay:o.transitionDelay}}var Kt={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},Ie=function(e){e.scrollTop=e.scrollTop},re=function(e){return Math.round(e)+"ms"};function st(t,e){t===void 0&&(t=["all"]);var a=e||{},o=a.duration,n=o===void 0?300:o,s=a.easing,r=s===void 0?Kt.easeInOut:s,i=a.delay,l=i===void 0?0:i,d=Array.isArray(t)?t:[t];return d.map(function(p){var v=typeof n=="string"?n:re(n),m=typeof l=="string"?l:re(l);return p+" "+v+" "+r+" "+m}).join(",")}function qn(t){return t&&t.ownerDocument||document}function Oe(t){var e=qn(t);return e.defaultView||window}function zn(t,e){e===void 0&&(e=166);var a;function o(){for(var n=this,s=arguments.length,r=new Array(s),i=0;i<s;i++)r[i]=arguments[i];var l=function(){t.apply(n,r)};clearTimeout(a),a=setTimeout(l,e)}return o.clear=function(){clearTimeout(a)},o}function Kn(t,e){var a=e.getBoundingClientRect(),o=Oe(e),n;if(e.fakeTransform)n=e.fakeTransform;else{var s=o.getComputedStyle(e);n=s.getPropertyValue("-webkit-transform")||s.getPropertyValue("transform")}var r=0,i=0;if(n&&n!=="none"&&typeof n=="string"){var l=n.split("(")[1].split(")")[0].split(",");r=parseInt(l[4],10),i=parseInt(l[5],10)}switch(t){case"left":return"translateX("+(o.innerWidth+r-a.left)+"px)";case"right":return"translateX(-"+(a.left+a.width-r)+"px)";case"up":return"translateY("+(o.innerHeight+i-a.top)+"px)";default:return"translateY(-"+(a.top+a.height-i)+"px)"}}function wt(t,e){if(e){var a=Kn(t,e);a&&(e.style.webkitTransform=a,e.style.transform=a)}}var Se=k.forwardRef(function(t,e){var a=t.children,o=t.direction,n=o===void 0?"down":o,s=t.in,r=t.style,i=t.timeout,l=i===void 0?0:i,d=t.onEnter,p=t.onEntered,v=t.onExit,m=t.onExited,w=xt(t,["children","direction","in","style","timeout","onEnter","onEntered","onExit","onExited"]),u=k.useRef(null),h=zt(a.ref,u),_=zt(h,e),g=function(E,C){wt(n,E),Ie(E),d&&d(E,C)},f=function(E){var C=(r==null?void 0:r.transitionTimingFunction)||Kt.easeOut,I=Nt({timeout:l,mode:"enter",style:O({},r,{transitionTimingFunction:C})});E.style.webkitTransition=st("-webkit-transform",I),E.style.transition=st("transform",I),E.style.webkitTransform="none",E.style.transform="none"},y=function(E){var C=(r==null?void 0:r.transitionTimingFunction)||Kt.sharp,I=Nt({timeout:l,mode:"exit",style:O({},r,{transitionTimingFunction:C})});E.style.webkitTransition=st("-webkit-transform",I),E.style.transition=st("transform",I),wt(n,E),v&&v(E)},x=function(E){E.style.webkitTransition="",E.style.transition="",m&&m(E)},b=k.useCallback(function(){u.current&&wt(n,u.current)},[n]);return k.useEffect(function(){if(!(s||n==="down"||n==="right")){var T=zn(function(){u.current&&wt(n,u.current)}),E=Oe(u.current);return E.addEventListener("resize",T),function(){T.clear(),E.removeEventListener("resize",T)}}},[n,s]),k.useEffect(function(){s||b()},[s,b]),k.createElement(Jt,Object.assign({appear:!0,nodeRef:u,onEnter:g,onEntered:p,onEntering:f,onExit:y,onExited:x,in:s,timeout:l},w),function(T,E){return k.cloneElement(a,O({ref:_,style:O({visibility:T==="exited"&&!s?"hidden":void 0},r,{},a.props.style)},E))})});Se.displayName="Slide";var Dt=function(e){return S.createElement("svg",Object.assign({viewBox:"0 0 24 24",focusable:"false",style:{fontSize:20,marginInlineEnd:8,userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:"currentColor",flexShrink:0}},e))},Xn=function(){return S.createElement(Dt,null,S.createElement("path",{d:`M12 2C6.5 2 2 6.5 2 12S6.5 22 12 22 22 17.5 22 12 17.5 2 12 2M10 17L5 12L6.41
        10.59L10 14.17L17.59 6.58L19 8L10 17Z`}))},Un=function(){return S.createElement(Dt,null,S.createElement("path",{d:"M13,14H11V10H13M13,18H11V16H13M1,21H23L12,2L1,21Z"}))},Yn=function(){return S.createElement(Dt,null,S.createElement("path",{d:`M12,2C17.53,2 22,6.47 22,12C22,17.53 17.53,22 12,22C6.47,22 2,17.53 2,12C2,
        6.47 6.47,2 12,2M15.59,7L12,10.59L8.41,7L7,8.41L10.59,12L7,15.59L8.41,17L12,
        13.41L15.59,17L17,15.59L13.41,12L17,8.41L15.59,7Z`}))},Gn=function(){return S.createElement(Dt,null,S.createElement("path",{d:`M13,9H11V7H13M13,17H11V11H13M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,
        0 22,12A10,10 0 0,0 12,2Z`}))},Zn={default:void 0,success:S.createElement(Xn,null),warning:S.createElement(Un,null),error:S.createElement(Yn,null),info:S.createElement(Gn,null)},J={maxSnack:3,persist:!1,hideIconVariant:!1,disableWindowBlurListener:!1,variant:"default",autoHideDuration:5e3,iconVariant:Zn,anchorOrigin:{vertical:"bottom",horizontal:"left"},TransitionComponent:Se,transitionDuration:{enter:225,exit:195}},Qn=function(e,a){var o=function(s){return typeof s=="number"||s===null};return o(e)?e:o(a)?a:J.autoHideDuration},Jn=function(e,a){var o=function(s,r){return r.some(function(i){return typeof s===i})};return o(e,["string","number"])?e:o(e,["object"])?O({},J.transitionDuration,{},o(a,["object"])&&a,{},e):o(a,["string","number"])?a:o(a,["object"])?O({},J.transitionDuration,{},a):J.transitionDuration},ta=function(e,a){return function(o,n){return n===void 0&&(n=!1),n?O({},J[o],{},a[o],{},e[o]):o==="autoHideDuration"?Qn(e.autoHideDuration,a.autoHideDuration):o==="transitionDuration"?Jn(e.transitionDuration,a.transitionDuration):e[o]||a[o]||J[o]}};function bt(t){return Object.entries(t).reduce(function(e,a){var o,n=a[0],s=a[1];return O({},e,(o={},o[n]=Zt(s),o))},{})}var it={SnackbarContainer:"notistack-SnackbarContainer",Snackbar:"notistack-Snackbar",CollapseWrapper:"notistack-CollapseWrapper",MuiContent:"notistack-MuiContent",MuiContentVariant:function(e){return"notistack-MuiContent-"+e}},ie=bt({root:{height:0},entered:{height:"auto"}}),Mt="0px",$t=175,je=k.forwardRef(function(t,e){var a=t.children,o=t.in,n=t.onExited,s=k.useRef(null),r=k.useRef(null),i=zt(e,r),l=function(){return s.current?s.current.clientHeight:0},d=function(h){h.style.height=Mt},p=function(h){var _=l(),g=Nt({timeout:$t,mode:"enter"}),f=g.duration,y=g.easing;h.style.transitionDuration=typeof f=="string"?f:f+"ms",h.style.height=_+"px",h.style.transitionTimingFunction=y||""},v=function(h){h.style.height="auto"},m=function(h){h.style.height=l()+"px"},w=function(h){Ie(h);var _=Nt({timeout:$t,mode:"exit"}),g=_.duration,f=_.easing;h.style.transitionDuration=typeof g=="string"?g:g+"ms",h.style.height=Mt,h.style.transitionTimingFunction=f||""};return k.createElement(Jt,{in:o,unmountOnExit:!0,onEnter:d,onEntered:v,onEntering:p,onExit:m,onExited:n,onExiting:w,nodeRef:r,timeout:$t},function(u,h){return k.createElement("div",Object.assign({ref:i,className:tt(ie.root,u==="entered"&&ie.entered),style:O({pointerEvents:"all",overflow:"hidden",minHeight:Mt,transition:st("height")},u==="entered"&&{overflow:"visible"},{},u==="exited"&&!o&&{visibility:"hidden"})},h),k.createElement("div",{ref:s,className:it.CollapseWrapper,style:{display:"flex",width:"100%"}},a))})});je.displayName="Collapse";var le={right:"left",left:"right",bottom:"up",top:"down"},ea=function(e){return e.horizontal!=="center"?le[e.horizontal]:le[e.vertical]},na=function(e){return"anchorOrigin"+Qt(e)},aa=function(e){e===void 0&&(e={});var a={containerRoot:!0,containerAnchorOriginTopCenter:!0,containerAnchorOriginBottomCenter:!0,containerAnchorOriginTopRight:!0,containerAnchorOriginBottomRight:!0,containerAnchorOriginTopLeft:!0,containerAnchorOriginBottomLeft:!0};return Object.keys(e).filter(function(o){return!a[o]}).reduce(function(o,n){var s;return O({},o,(s={},s[n]=e[n],s))},{})},oa=function(){};function vt(t,e){return t.reduce(function(a,o){return o==null?a:function(){for(var s=arguments.length,r=new Array(s),i=0;i<s;i++)r[i]=arguments[i];var l=[].concat(r);e&&l.indexOf(e)===-1&&l.push(e),a.apply(this,l),o.apply(this,l)}},oa)}var sa=typeof window<"u"?k.useLayoutEffect:k.useEffect;function ue(t){var e=k.useRef(t);return sa(function(){e.current=t}),k.useCallback(function(){return e.current.apply(void 0,arguments)},[])}var Ne=k.forwardRef(function(t,e){var a=t.children,o=t.className,n=t.autoHideDuration,s=t.disableWindowBlurListener,r=s===void 0?!1:s,i=t.onClose,l=t.id,d=t.open,p=t.SnackbarProps,v=p===void 0?{}:p,m=k.useRef(),w=ue(function(){i&&i.apply(void 0,arguments)}),u=ue(function(y){!i||y==null||(m.current&&clearTimeout(m.current),m.current=setTimeout(function(){w(null,"timeout",l)},y))});k.useEffect(function(){return d&&u(n),function(){m.current&&clearTimeout(m.current)}},[d,n,u]);var h=function(){m.current&&clearTimeout(m.current)},_=k.useCallback(function(){n!=null&&u(n*.5)},[n,u]),g=function(x){v.onMouseEnter&&v.onMouseEnter(x),h()},f=function(x){v.onMouseLeave&&v.onMouseLeave(x),_()};return k.useEffect(function(){if(!r&&d)return window.addEventListener("focus",_),window.addEventListener("blur",h),function(){window.removeEventListener("focus",_),window.removeEventListener("blur",h)}},[r,_,d]),k.createElement("div",Object.assign({ref:e},v,{className:tt(it.Snackbar,o),onMouseEnter:g,onMouseLeave:f}),a)});Ne.displayName="Snackbar";var Rt,ra=bt({root:(Rt={display:"flex",flexWrap:"wrap",flexGrow:1},Rt[Z.upSm]={flexGrow:"initial",minWidth:"288px"},Rt)}),He=k.forwardRef(function(t,e){var a=t.className,o=xt(t,["className"]);return S.createElement("div",Object.assign({ref:e,className:tt(ra.root,a)},o))});He.displayName="SnackbarContent";var dt=bt({root:{backgroundColor:"#313131",fontSize:"0.875rem",lineHeight:1.43,letterSpacing:"0.01071em",color:"#fff",alignItems:"center",padding:"6px 16px",borderRadius:"4px",boxShadow:"0px 3px 5px -1px rgba(0,0,0,0.2),0px 6px 10px 0px rgba(0,0,0,0.14),0px 1px 18px 0px rgba(0,0,0,0.12)"},lessPadding:{paddingLeft:8*2.5+"px"},default:{backgroundColor:"#313131"},success:{backgroundColor:"#43a047"},error:{backgroundColor:"#d32f2f"},warning:{backgroundColor:"#ff9800"},info:{backgroundColor:"#2196f3"},message:{display:"flex",alignItems:"center",padding:"8px 0"},action:{display:"flex",alignItems:"center",marginLeft:"auto",paddingLeft:"16px",marginRight:"-8px"}}),ce="notistack-snackbar",De=k.forwardRef(function(t,e){var a=t.id,o=t.message,n=t.action,s=t.iconVariant,r=t.variant,i=t.hideIconVariant,l=t.style,d=t.className,p=s[r],v=n;return typeof v=="function"&&(v=v(a)),S.createElement(He,{ref:e,role:"alert","aria-describedby":ce,style:l,className:tt(it.MuiContent,it.MuiContentVariant(r),dt.root,dt[r],d,!i&&p&&dt.lessPadding)},S.createElement("div",{id:ce,className:dt.message},i?null:p,o),v&&S.createElement("div",{className:dt.action},v))});De.displayName="MaterialDesignContent";var ia=k.memo(De),la=bt({wrappedRoot:{width:"100%",position:"relative",transform:"translateX(0)",top:0,right:0,bottom:0,left:0,minWidth:"288px"}}),ua=function(e){var a=k.useRef(),o=k.useState(!0),n=o[0],s=o[1],r=vt([e.snack.onClose,e.onClose]),i=function(){e.snack.requestClose&&r(null,"instructed",e.snack.id)},l=k.useCallback(function(){a.current=setTimeout(function(){s(function(I){return!I})},125)},[]);k.useEffect(function(){return function(){a.current&&clearTimeout(a.current)}},[]);var d=e.snack,p=e.classes,v=e.Component,m=v===void 0?ia:v,w=k.useMemo(function(){return aa(p)},[p]),u=d.open,h=d.SnackbarProps,_=d.TransitionComponent,g=d.TransitionProps,f=d.transitionDuration,y=d.disableWindowBlurListener,x=d.content,b=xt(d,["open","SnackbarProps","TransitionComponent","TransitionProps","transitionDuration","disableWindowBlurListener","content","entered","requestClose","onEnter","onEntered","onExit","onExited"]),T=O({direction:ea(b.anchorOrigin),timeout:f},g),E=x;typeof E=="function"&&(E=E(b.id,b.message));var C=["onEnter","onEntered","onExit","onExited"].reduce(function(I,j){var D;return O({},I,(D={},D[j]=vt([e.snack[j],e[j]],b.id),D))},{});return S.createElement(je,{in:n,onExited:C.onExited},S.createElement(Ne,{open:u,id:b.id,disableWindowBlurListener:y,autoHideDuration:b.autoHideDuration,className:tt(la.wrappedRoot,w.root,w[na(b.anchorOrigin)]),SnackbarProps:h,onClose:r},S.createElement(_,Object.assign({},T,{appear:!0,in:u,onExit:C.onExit,onExited:l,onEnter:C.onEnter,onEntered:vt([C.onEntered,i],b.id)}),E||S.createElement(m,Object.assign({},b)))))},pt,Pt,Tt,It,Wt,$={view:{default:20},snackbar:{default:6,dense:2}},de="."+it.CollapseWrapper,Vt=16,Ot=bt({root:(pt={boxSizing:"border-box",display:"flex",maxHeight:"100%",position:"fixed",zIndex:1400,height:"auto",width:"auto",transition:st(["top","right","bottom","left","max-width"],{duration:300,easing:"ease"}),pointerEvents:"none"},pt[de]={padding:$.snackbar.default+"px 0px",transition:"padding 300ms ease 0ms"},pt.maxWidth="calc(100% - "+$.view.default*2+"px)",pt[Z.downXs]={width:"100%",maxWidth:"calc(100% - "+Vt*2+"px)"},pt),rootDense:(Pt={},Pt[de]={padding:$.snackbar.dense+"px 0px"},Pt),top:{top:$.view.default-$.snackbar.default+"px",flexDirection:"column"},bottom:{bottom:$.view.default-$.snackbar.default+"px",flexDirection:"column-reverse"},left:(Tt={left:$.view.default+"px"},Tt[Z.upSm]={alignItems:"flex-start"},Tt[Z.downXs]={left:Vt+"px"},Tt),right:(It={right:$.view.default+"px"},It[Z.upSm]={alignItems:"flex-end"},It[Z.downXs]={right:Vt+"px"},It),center:(Wt={left:"50%",transform:"translateX(-50%)"},Wt[Z.upSm]={alignItems:"center"},Wt)}),ca=function(e){var a=e.classes,o=a===void 0?{}:a,n=e.anchorOrigin,s=e.dense,r=e.children,i=tt(it.SnackbarContainer,Ot[n.vertical],Ot[n.horizontal],Ot.root,o.containerRoot,o["containerAnchorOrigin"+Qt(n)],s&&Ot.rootDense);return S.createElement("div",{className:i},r)},da=k.memo(ca),pe=function(e){var a=typeof e=="string"||k.isValidElement(e);return!a},z,pa=function(t){we(e,t);function e(o){var n;return n=t.call(this,o)||this,n.enqueueSnackbar=function(s,r){if(r===void 0&&(r={}),s==null)throw new Error("enqueueSnackbar called with invalid argument");var i=pe(s)?s:r,l=pe(s)?s.message:s,d=i.key,p=i.preventDuplicate,v=xt(i,["key","preventDuplicate"]),m=Ct(d),w=m?d:new Date().getTime()+Math.random(),u=ta(v,n.props),h=O({id:w},v,{message:l,open:!0,entered:!1,requestClose:!1,persist:u("persist"),action:u("action"),content:u("content"),variant:u("variant"),anchorOrigin:u("anchorOrigin"),disableWindowBlurListener:u("disableWindowBlurListener"),autoHideDuration:u("autoHideDuration"),hideIconVariant:u("hideIconVariant"),TransitionComponent:u("TransitionComponent"),transitionDuration:u("transitionDuration"),TransitionProps:u("TransitionProps",!0),iconVariant:u("iconVariant",!0),style:u("style",!0),SnackbarProps:u("SnackbarProps",!0),className:tt(n.props.className,v.className)});return h.persist&&(h.autoHideDuration=void 0),n.setState(function(_){if(p===void 0&&n.props.preventDuplicate||p){var g=function(b){return m?b.id===w:b.message===l},f=_.queue.findIndex(g)>-1,y=_.snacks.findIndex(g)>-1;if(f||y)return _}return n.handleDisplaySnack(O({},_,{queue:[].concat(_.queue,[h])}))}),w},n.handleDisplaySnack=function(s){var r=s.snacks;return r.length>=n.maxSnack?n.handleDismissOldest(s):n.processQueue(s)},n.processQueue=function(s){var r=s.queue,i=s.snacks;return r.length>0?O({},s,{snacks:[].concat(i,[r[0]]),queue:r.slice(1,r.length)}):s},n.handleDismissOldest=function(s){if(s.snacks.some(function(p){return!p.open||p.requestClose}))return s;var r=!1,i=!1,l=s.snacks.reduce(function(p,v){return p+(v.open&&v.persist?1:0)},0);l===n.maxSnack&&(i=!0);var d=s.snacks.map(function(p){return!r&&(!p.persist||i)?(r=!0,p.entered?(p.onClose&&p.onClose(null,"maxsnack",p.id),n.props.onClose&&n.props.onClose(null,"maxsnack",p.id),O({},p,{open:!1})):O({},p,{requestClose:!0})):O({},p)});return O({},s,{snacks:d})},n.handleEnteredSnack=function(s,r,i){if(!Ct(i))throw new Error("handleEnteredSnack Cannot be called with undefined key");n.setState(function(l){var d=l.snacks;return{snacks:d.map(function(p){return p.id===i?O({},p,{entered:!0}):O({},p)})}})},n.handleCloseSnack=function(s,r,i){n.props.onClose&&n.props.onClose(s,r,i);var l=i===void 0;n.setState(function(d){var p=d.snacks,v=d.queue;return{snacks:p.map(function(m){return!l&&m.id!==i?O({},m):m.entered?O({},m,{open:!1}):O({},m,{requestClose:!0})}),queue:v.filter(function(m){return m.id!==i})}})},n.closeSnackbar=function(s){var r=n.state.snacks.find(function(i){return i.id===s});Ct(s)&&r&&r.onClose&&r.onClose(null,"instructed",s),n.handleCloseSnack(null,"instructed",s)},n.handleExitedSnack=function(s,r){if(!Ct(r))throw new Error("handleExitedSnack Cannot be called with undefined key");n.setState(function(i){var l=n.processQueue(O({},i,{snacks:i.snacks.filter(function(d){return d.id!==r})}));return l.queue.length===0?l:n.handleDismissOldest(l)})},z=n.enqueueSnackbar,n.closeSnackbar,n.state={snacks:[],queue:[],contextValue:{enqueueSnackbar:n.enqueueSnackbar.bind(ee(n)),closeSnackbar:n.closeSnackbar.bind(ee(n))}},n}var a=e.prototype;return a.render=function(){var n=this,s=this.state.contextValue,r=this.props,i=r.domRoot,l=r.children,d=r.dense,p=d===void 0?!1:d,v=r.Components,m=v===void 0?{}:v,w=r.classes,u=this.state.snacks.reduce(function(_,g){var f,y=Qt(g.anchorOrigin),x=_[y]||[];return O({},_,(f={},f[y]=[].concat(x,[g]),f))},{}),h=Object.keys(u).map(function(_){var g=u[_],f=g[0];return S.createElement(da,{key:_,dense:p,anchorOrigin:f.anchorOrigin,classes:w},g.map(function(y){return S.createElement(ua,{key:y.id,snack:y,classes:w,Component:m[y.variant],onClose:n.handleCloseSnack,onEnter:n.props.onEnter,onExit:n.props.onExit,onExited:vt([n.handleExitedSnack,n.props.onExited],y.id),onEntered:vt([n.handleEnteredSnack,n.props.onEntered],y.id)})}))});return S.createElement(Te.Provider,{value:s},l,i?Pe.createPortal(h,i):h)},ke(e,[{key:"maxSnack",get:function(){return this.props.maxSnack||J.maxSnack}}]),e}(k.Component),fa=function(){return k.useContext(Te)};const Be=(t,e)=>{const{setpointOffsets:a,setSetpointOffsets:o}=Gt.getState(),n=[...a[t]];o([...n,e],t)},Xt=t=>{const{setpointOffsets:e,setSetpointOffsets:a}=Gt.getState(),o=[...e[t]],n=o.shift();return a(o,t),n};function Le(){const t=k.useRef({x:0,y:0}),e=me(f=>f.domNode),{getNodes:a,setNodes:o,getEdges:n,setEdges:s,screenToFlowPosition:r}=B(),[i,l]=k.useState([]),[d,p]=k.useState([]);k.useEffect(()=>{if(!e)return;const f=b=>b.preventDefault(),y=b=>{t.current={x:b.clientX,y:b.clientY}},x=["cut","copy","paste"];return x.forEach(b=>e.addEventListener(b,f)),e.addEventListener("mousemove",y),()=>{x.forEach(b=>e.removeEventListener(b,f)),e.removeEventListener("mousemove",y)}},[e]);const v=k.useCallback(()=>{const f=a().filter(b=>b.selected),x=xe(f,n()).filter(b=>{const T=!f.some(C=>C.id===b.source),E=!f.some(C=>C.id===b.target);return!T&&!E});return{selectedNodes:f,selectedEdges:x}},[a,n]),m=k.useCallback(()=>{const{selectedNodes:f,selectedEdges:y}=v();l(f),p(y)},[v]),w=f=>{const y=f.data;"setpointDataType"in y&&Be(y.setpointDataType,y.setpointOffset)},u=k.useCallback(()=>{try{const{selectedNodes:f,selectedEdges:y}=v();f.forEach(w),l(f),p(y),o(x=>x.filter(b=>!b.selected)),s(x=>x.filter(b=>!y.includes(b)))}catch(f){z("Ошибка при вырезании",{variant:"error"}),console.error("Paste error:",f)}},[v,o,s]),h=(f,y,x,b)=>{const T=St(),E=y.x+(f.position.x-x),C=y.y+(f.position.y-b);if(!("setpointDataType"in f.data))return{...f,id:T,position:{x:E,y:C},data:{...f.data}};const I=Xt(f.data.setpointDataType);if(I===void 0)throw new Error("Ошибка при выделении памяти уставки");return{...f,id:T,position:{x:E,y:C},data:{...f.data,setpointOffset:I}}},_=f=>{try{const y=St(),x=f.positionAbsoluteX+20,b=(f.height??140)+10,T=f.positionAbsoluteY+b;let E;if(!("setpointDataType"in f.data)){E={...f,id:y,position:{x,y:T},data:{...f.data}},o(I=>[...I.map(j=>({...j,selected:!1})),E]);return}const C=Xt(f.data.setpointDataType);if(C===void 0)throw new Error("Ошибка при выделении памяти уставки");E={...f,id:y,position:{x,y:T},data:{...f.data,setpointOffset:C}},o(I=>[...I.map(j=>({...j,selected:!1})),E])}catch(y){z("Ошибка при копировании",{variant:"error"}),console.error("Paste error:",y)}},g=k.useCallback(async(f=r(t.current))=>{if(i.length)try{const y=Math.min(...i.map(C=>C.position.x)),x=Math.min(...i.map(C=>C.position.y)),b=await Promise.all(i.map(C=>h(C,f,y,x))),T=Object.fromEntries(i.map((C,I)=>[C.id,b[I].id])),E=d.map(C=>{var I,j;return{...C,id:St(),source:T[C.source],sourceHandle:`${T[C.source]} ${(I=C.sourceHandle)==null?void 0:I.split(" ")[1]}`,target:T[C.target],targetHandle:`${T[C.target]} ${(j=C.targetHandle)==null?void 0:j.split(" ")[1]}`}});o(C=>[...C.map(I=>({...I,selected:!1})),...b]),s(C=>[...C.map(I=>({...I,selected:!1})),...E])}catch(y){z("Ошибка при копировании",{variant:"error"}),console.error("Paste error:",y)}},[i,d,r,o,s]);return Ft(["Meta+x","Control+x"],u),Ft(["Meta+c","Control+c"],m),Ft(["Meta+v","Control+v"],g),{cut:u,copy:m,paste:g,bufferedNodes:i,bufferedEdges:d,createDublicate:_}}function Ft(t,e){const[a,o]=k.useState(!1),n=Fe(t);k.useEffect(()=>{n&&!a?(e(),o(!0)):!n&&a&&o(!1)},[n,a,e])}const ha=()=>{const{setNodes:t,setEdges:e}=B();return{handleDelete:(o,n)=>{"setpointOffset"in n&&n.setpointOffset!==void 0&&Be(n.setpointDataType,n.setpointOffset),t(s=>s.filter(r=>r.id!==o)),e(s=>s.filter(r=>r.target!==o&&r.source!==o))}}},ya="_row_1sy6z_1",ga="_input_1sy6z_9",ma="_outputs_1sy6z_19",va="_wraps_1sy6z_29",xa="_text_1sy6z_49",F={row:ya,input:ga,outputs:ma,wraps:va,"handle-wrap":"_handle-wrap_1sy6z_41",text:xa},ba="_handle_12t9t_1",Ea={handle:ba},jt=({id:t,type:e,position:a,dataType:o})=>{const s=Ae().filter(r=>e==="target"&&r.targetHandle===`${t}`);return c.jsx(qe,{type:e,position:a,id:`${t}`,style:{backgroundColor:o&&ot[o].clr,transform:a===P.Left?"translate(-100%, -50%)":a===P.Right?"translate(100%, -50%)":a===P.Top?"translate(-50%, -100%)":"translate(-50%, 100%)"},isConnectable:s.length<1,className:Ea.handle})},fe={"handles-column":"_handles-column_gcrpe_1","handle-wrap":"_handle-wrap_gcrpe_11"},_a=({nodeId:t,inputHandles:e})=>c.jsx("div",{className:fe["handles-column"],children:Object.keys(e).map(a=>c.jsx("div",{className:fe["handle-wrap"],children:c.jsx(jt,{id:`${t} ${a}`,type:"target",position:P.Left,dataType:e[a].dataType})},a))}),Ca={analogInput:["updateName","updateSetpointValue","delete","dublicate"],discreteInput:["updateName","delete","dublicate"],discreteOutput:["updateName","delete","dublicate"],constInt:["updateSetpointValue","updateName","delete","dublicate"],fourierInt:["updateName","changeFourierGarmonics","delete","dublicate"],xor:["delete","dublicate"],and:["invert","delete","dublicate"],or:["invert","delete","dublicate"],nand:["invert","delete","dublicate"],nor:["invert","delete","dublicate"],multInt:["delete","dublicate"],sumInt:["delete","dublicate"],subInt:["delete","dublicate"],timerInt:["updateSetpointValue","updateName","delete","dublicate"],equalsInt:["delete","dublicate"],lessInt:["delete","dublicate"],moreInt:["delete","dublicate"],fifoByte:["updateLengthMemory","delete","dublicate"],fifoByteWithoutEn:["updateLengthMemory","delete","dublicate"],fifoWord:["updateLengthMemory","delete","dublicate"],fifoWordWithoutEn:["updateLengthMemory","delete","dublicate"]},ka=t=>"setpointDataType"in t,wa={delete:{key:"deleteNode",label:"delete node",dependencies:["useDeleteNode"],createElement:({node:t,dependencies:e})=>{var r;const{id:a,data:o}=t,n=(r=e.useDeleteNode)==null?void 0:r.call(e);if(!n)return null;const{handleDelete:s}=n;return c.jsx(R,{text:"Удалить",onClick:()=>s(a,o)})}},dublicate:{key:"dublicate",label:"dublicate node",dependencies:["useCopyPaste"],createElement:({node:t,dependencies:e})=>{var n;const a=(n=e.useCopyPaste)==null?void 0:n.call(e);if(!a)return null;const{createDublicate:o}=a;return c.jsx(R,{text:"Дублировать",onClick:()=>o(t)})}},changeFourierGarmonics:{key:"invert",label:"Инвертировать",dependencies:["useUpdateFourierValue"],createElement:({node:t,dependencies:e})=>{const{data:a}=t;if(!("setpointDataType"in a))return;const{setpointOffset:o,outputHandles:n}=a;if(!(e!=null&&e.useUpdateFourierValue))return null;const{handleFourierGarmonicForOutput:s,inputsValue:r}=e==null?void 0:e.useUpdateFourierValue(o),i=Object.values(n).reduce((l,d,p)=>(p%2===0?l.push([d]):l[l.length-1].push(d),l),[]);return c.jsx("div",{onDoubleClick:l=>{l.stopPropagation()},className:"nodrag nopan nowheel",style:{display:"flex",gap:"10px",width:"max-content"},children:i.map((l,d)=>c.jsx(gt,{style:{width:"60px"},type:"number",min:0,value:r[d],onChange:p=>s(d,p.target.value)},d))})}},invert:{key:"invert",label:"Инвертировать",dependencies:["useInverseNode"],createElement:({node:t,dependencies:e})=>{var s;const{id:a,data:o}=t,n=(s=e.useInverseNode)==null?void 0:s.call(e,a,o.type);return c.jsx(R,{onClick:n,text:"Инвертировать",type:"button"})}},updateSetpointValue:{key:"updateSetpointValue",label:"Изменить значение",dependencies:["useUpdateSetpointValue"],createElement:({node:t,dependencies:e})=>{var l;const{data:a}=t;if(!ka(a))return null;const o=a.setpointOffset,n=a.setpointDataType;if(o==null)return null;const s=(l=e.useUpdateSetpointValue)==null?void 0:l.call(e,n,o);if(!s)return null;const{handleChange:r,inputValue:i}=s;return c.jsx("div",{className:"flex flex-col gap-2",children:c.jsx(gt,{type:"text",value:i,onChange:r,placeholder:"Введите значение"})})}},updateName:{key:"updateName",label:"Изменить значение",dependencies:["useUpdateNameValue"],createElement:({node:t,dependencies:e})=>{var i;const{id:a,data:o}=t,n=(i=e.useUpdateNameValue)==null?void 0:i.call(e,a,o);if(!n)return null;const{name:s,handleChangeName:r}=n;return c.jsx("div",{className:"flex flex-col gap-2",children:c.jsx(gt,{type:"text",value:s,onChange:r,placeholder:"Введите имя"})})}},updateLengthMemory:{key:"updateLengthMemory",label:"Изменить значение",dependencies:["useChangeLengthMemory"],createElement:({node:t,dependencies:e})=>{var i;const{id:a,data:o}=t,n=(i=e.useChangeLengthMemory)==null?void 0:i.call(e,a,o);if(!n)return null;const{lengthMemory:s,handleChangeLengthMemory:r}=n;return c.jsx("div",{className:"nodrag nopan nowheel",onDoubleClick:l=>{l.stopPropagation()},children:c.jsx(gt,{type:"number",min:1,value:s,onChange:r,placeholder:"Введите глубину"})})}}},Ta=t=>Object.values({0:"1",1:"2",2:"3",3:"4",4:"5",5:"6",6:"7",7:"8"}).slice(0,t).reduce((a,o)=>(a[o]=void 0,a),{}),Ia=t=>{const{updateNodeData:e,getEdges:a,setEdges:o,getNode:n}=B(),s=Yt(),r=[...new Array(10)].reduce((l,d,p)=>(l.push({value:p+1}),l),[]);return{changeHandles:k.useCallback(l=>{e(t,{inputHandlesCount:l}),s(t);const d=a(),p=Object.keys(Ta(+l)).map(m=>`${t} ${m}`),v=d.filter(m=>m.target!==t||m.targetHandle&&p.includes(m.targetHandle));o(v)},[t,e,s,a,o,n]),items:r}},Oa={or:"nor",and:"nand",nor:"or",nand:"and"},Sa=(t,e)=>{const{updateNodeData:a}=B();return k.useCallback(()=>{a(t,{type:Oa[e]})},[t,e,a])},ja=(t,e)=>{const{updateNodeData:a}=B(),o=n=>{const s=n.target.value;a(t,{name:s})};return{name:e.name,handleChangeName:o}},Na=(t,e)=>{if(!("lengthMemory"in e))return null;const{updateNodeData:a}=B(),o=n=>{const s=n.target.value;a(t,{lengthMemory:+s})};return{lengthMemory:e.lengthMemory,handleChangeLengthMemory:o}},Ha=t=>{var n;const{type:e}=t.data,a={useChangeHandles:Ia,useInverseNode:Sa,useUpdateSetpointValue:dn,useUpdateNameValue:ja,useDeleteNode:ha,useUpdateFourierValue:cn,useCopyPaste:Le,useChangeLengthMemory:Na};return{actions:(n=Ca[e])==null?void 0:n.map(s=>{const r=wa[s];if(!r)return null;const i=r.dependencies.reduce((l,d)=>(d in a&&(l[d]=a[d]),l),{});return{key:r.key,label:r.label,element:r.createElement({node:t,dependencies:i})}})}},he={"context-menu-block":"_context-menu-block_64p36_1","menu-item":"_menu-item_64p36_15"},Da=k.memo(({actions:t,visible:e,setVisible:a})=>{const o=k.useRef(null);return k.useEffect(()=>{const n=s=>{o.current&&!o.current.contains(s.target)&&a(!1)};return document.addEventListener("click",n),()=>document.removeEventListener("click",n)},[]),c.jsx(ze,{isVisible:e,children:c.jsx("div",{ref:o,className:he["context-menu-block"],children:t.map((n,s)=>c.jsx("div",{className:he["menu-item"],children:n.element},s))})})}),N=({node:t,children:e})=>{const[a,o]=k.useState(!1),{actions:n}=Ha(t);return c.jsxs("div",{style:{position:"relative"},onDoubleClick:()=>o(s=>!s),children:[e,c.jsx(Da,{actions:n,visible:a,setVisible:o})]})},Ba="_inc_1tbfq_1",La="_dec_1tbfq_9",Ma="_disabled_1tbfq_47",ft={"inc-dec":"_inc-dec_1tbfq_1",inc:Ba,dec:La,disabled:Ma},Y=({node:t,children:e})=>{const{id:a,data:o}=t,{updateNodeData:n,setEdges:s}=B(),r=Yt(),i=o.inputHandles||{},l=Object.keys(i),d=i[l[0]].dataType,p={min:2,max:10},v=()=>{const h=l.length;if(h>=p.max)return;const _=`input-${h+1}`,g={...i,[_]:{dataType:d}};n(a,{inputHandles:g}),r(a)},m=()=>{if(l.length<=p.min)return;const g=Object.keys(i).filter(x=>x.startsWith("input-")).sort((x,b)=>{const T=parseInt(x.replace("input-",""),10);return parseInt(b.replace("input-",""),10)-T})[0],{[g]:f,...y}=i;s(x=>x.filter(b=>b.targetHandle!==`${a} ${g}`)),n(a,{inputHandles:y}),r(a)},w=l.length>=p.max,u=l.length<=p.min;return c.jsxs("div",{className:ft["inc-dec"],children:[c.jsx("button",{className:K(ft.inc,"nodrag",{[ft.disabled]:w}),onClick:v,disabled:w,children:"+"}),e,c.jsx("button",{className:K(ft.dec,"nodrag",{[ft.disabled]:u}),onClick:m,disabled:u,children:"—"})]})},$a="_btn_aosl1_9",Ra="_inc_aosl1_1",Pa="_disabled_aosl1_41",Wa="_dec_aosl1_47",A={"inc-dec":"_inc-dec_aosl1_1","btns-row":"_btns-row_aosl1_9",btn:$a,inc:Ra,disabled:Pa,dec:Wa},Va=t=>{const{offsetsByTypes:e,setOffsets:a}=pn.getState(),o=[...e[t]],n=o.shift();return a(o,t),n},Fa=({node:t,children:e})=>{const{id:a,data:o}=t,{updateNodeData:n,setEdges:s}=B(),r=o.outputHandles||{},i=Object.keys(r),l={min:2,max:6},d=Yt(),p=()=>{const u=i.length,h=l.max-u,_=Math.min(2,h);if(_>0){const g={...r};for(let f=1;f<=_;f++){if(!Va("int")){z("Не удалсоь выделить смещение типа int",{variant:"error"});return}const x=`out-${u+f}`;g[x]={dataType:"int"}}n(a,{outputHandles:g}),d(a)}},v=()=>{const h=i.length-l.min,_=Math.min(2,h);if(_>0){const g={...r},f=Object.keys(g).filter(y=>y.startsWith("out-")).sort((y,x)=>{const b=parseInt(y.replace("out-",""),10);return parseInt(x.replace("out-",""),10)-b});for(let y=0;y<_;y++){const x=f[y];s(b=>b.filter(T=>T.sourceHandle!==`${a} ${x}`)),delete g[x]}n(a,{outputHandles:g}),d(a)}},m=i.length>=l.max,w=i.length<=l.min;return c.jsxs("div",{className:A["inc-dec"],children:[e,c.jsxs("div",{className:A["btns-row"],children:[c.jsx("button",{className:K(A.btn,A.inc,"nodrag",{[A.disabled]:m}),onClick:p,disabled:m,children:"+"}),c.jsx("button",{className:K(A.btn,A.dec,"nodrag",{[A.disabled]:w}),onClick:v,disabled:w,children:"—"})]})]})},Aa={analogInput:[N],discreteInput:[N],discreteOutput:[N],fourierInt:[N,Fa],constInt:[N],xor:[N,Y],and:[N,Y],or:[N,Y],nand:[N,Y],nor:[N,Y],multInt:[N,Y],sumInt:[N,Y],subInt:[N],timerInt:[N],equalsInt:[N],lessInt:[N],moreInt:[N],fifoByte:[N],fifoByteWithoutEn:[N],fifoWord:[N],fifoWordWithoutEn:[N]},qa=(t,e)=>(Aa[t.data.type]||[]).reduce((o,n,s)=>c.jsx(n,{node:t,children:o},`feature-${s}`),e),za=k.memo(t=>{const{type:e,inputHandles:a,outputHandles:o}=t.data,n=Ke[e];if(!n)return null;const{view:s,...r}=n,i=c.jsxs("div",{className:F.row,children:[!!Object.keys(a).length&&c.jsx(_a,{nodeId:t.id,inputHandles:a}),c.jsx(s,{...r}),!!Object.keys(o).length&&Object.keys(o).map(p=>c.jsx(jt,{id:`${t.id} ${p}`,type:"source",position:P.Right,dataType:o[p].dataType},p))]}),d=e!=="fourierInt"?i:(()=>{const p=Object.keys(a).length,v=Object.keys(a)[0];return c.jsxs("div",{className:F.row,children:[!!p&&c.jsx("div",{className:F.input,children:c.jsx(jt,{id:`${t.id} ${v}`,type:"target",position:P.Left,dataType:a[v].dataType},v)}),c.jsx(s,{...r}),!!Object.keys(o).length&&c.jsx("div",{className:F.outputs,children:Array.from({length:Math.ceil(Object.keys(o).length/2)},(m,w)=>Object.keys(o).slice(w*2,w*2+2)).map((m,w)=>c.jsx("div",{className:F.wraps,children:m.map((u,h)=>c.jsxs("div",{className:F["handle-wrap"],children:[h===0?c.jsx("div",{className:F.text,children:"Amp"}):c.jsx("div",{className:F.text,children:"Ph"}),c.jsx(jt,{id:`${t.id} ${u}`,type:"source",position:P.Right,dataType:o[u].dataType},`${w}-${h}`)]},u))},w))})]})})();return qa(t,d)}),Ka={account:"paid-pro",hideAttribution:!0};Xe.SmoothStep;const Xa={node:za},Ua={"custom-edge":Mn},Ya=({fromX:t,fromY:e,toX:a,toY:o,fromPosition:n,fromHandle:s,toPosition:r,fromNode:i})=>{var p,v,m,w;const[l]=ve({sourceX:t,sourceY:e,targetX:a,targetY:o,offset:16,sourcePosition:n,targetPosition:r});if(!i||!s||!s.id)return null;const d=((v=i.data.outputHandles[(p=s.id)==null?void 0:p.split(" ")[1]])==null?void 0:v.dataType)||((w=i.data.inputHandles[(m=s.id)==null?void 0:m.split(" ")[1]])==null?void 0:w.dataType);return d?c.jsx("g",{children:c.jsx("path",{fill:"none",stroke:ot[d].clr,strokeWidth:2,d:l})}):null},Ga="_panel__item_1tehr_15",Za="_name_1tehr_41",At={"sidebar-item-drag-image":"_sidebar-item-drag-image_1tehr_1",panel__item:Ga,name:Za},Qa=({viewData:t,type:e})=>{const a=k.useRef(null),{view:o,name:n,...s}=t,r=i=>{var l;(l=i.dataTransfer)==null||l.setData("application/reactflow",e),a.current&&i.dataTransfer.setDragImage(a.current,0,0)};return c.jsxs("div",{className:At.panel__item,draggable:!0,onDragStart:r,children:[c.jsx(o,{...s}),c.jsx("div",{className:At.name,children:n}),c.jsx("div",{className:At["sidebar-item-drag-image"],ref:a,children:c.jsx(o,{...s})})]})},Ja="_elements_15sbx_1",to={elements:Ja},G=({views:t})=>c.jsx("div",{className:to.elements,children:Object.entries(t).map(e=>c.jsx(Qa,{viewData:e[1],type:e[0]},e[0]))}),eo=()=>c.jsx("div",{children:c.jsxs(Cn,{text:"Библиотека",position:"right",children:[c.jsx(U,{name:"Входы и выходы",children:c.jsx(G,{views:{...Ye,...Ue}})}),c.jsx(U,{name:"Логические элементы",children:c.jsx(G,{views:Ge})}),c.jsx(U,{name:"Алгебраические операции",children:c.jsx(G,{views:Ze})}),c.jsx(U,{name:"Операции сравнения",children:c.jsx(G,{views:Qe})}),c.jsx(U,{name:"Выдержки времени",children:c.jsx(G,{views:Je})}),c.jsx(U,{name:"Фурье",children:c.jsx(G,{views:tn})}),c.jsx(U,{name:"Fifo",children:c.jsx(G,{views:en})})]})});function no(t){return t.map(e=>{const a="lengthMemory"in e?[e.inType,e.instructionOffset,e.ptrBegin,e.lengthMemory,...e.resultOffsets,...e.sourcesOffsets,e.workingSpace]:"instructionOffset"in e?[e.inType,e.instructionOffset,...e.resultOffsets,...e.sourcesOffsets]:[e.inType,...e.sourcesOffsets,...e.resultOffsets];for(;a.length<10;)a.push(0);return a})}const ao=(t,e,a)=>{if(!e.length)return{newPrimitiveData:{lengthInBytes:t.lengthInBytes,offset:1},newOffset:1,lastLength:t.lengthInBytes};const o=e.slice(-1)[0]+a,n={lengthInBytes:t.lengthInBytes,offset:o};return{newOffset:o,newPrimitiveData:n,lastLength:t.lengthInBytes}},oo=()=>({lastLength:0,instructions:[],offsets:[],primitivesData:{}}),mt={bool:1,int:4,float:4,analog:160},so=(t,e,a)=>{var s;const o=t.data.type;if(be(rt).includes(o)&&!((s=a.primitivesData[o])!=null&&s[e])){const r=rt[o];if(r&&r[e]){a.instructions.push(...r[e].instruction);const{newOffset:i,newPrimitiveData:l,lastLength:d}=ao(rt[o][e],a.offsets,a.lastLength);a.primitivesData[o]={...a.primitivesData[o],[e]:l},a.offsets.push(i),a.lastLength=d}}},ro=(t,e)=>{try{const a=Object.keys(e.data.inputHandles);if(a.length===0)return!0;for(const o of a)if(!t.find(s=>s.targetHandle===`${e.id} ${o}`))throw new Error(`Не найдено исходное смещение для handle ${o} узла ${e.id}`)}catch(a){throw new Error(`Ошибка при создании scriptItem для узла ${e.id}: ${a instanceof Error?a.message:String(a)}`)}},io=(t,e,a,o,n,s,r)=>{var i,l,d,p,v,m,w,u,h,_;try{const{initOscillographicOffsets:g,checkOffset:f}=Ee.getState(),y=t.data.type,x=Object.keys(t.data.inputHandles).length;let b;y.includes("Output")?b=[r.get(t.id)]:(b=Object.entries(t.data.outputHandles).map(([E])=>s.get(`${t.id} ${E}`)),Object.entries(t.data.outputHandles).forEach(([E,C])=>{const I=s.get(`${t.id} ${E}`);if(I===void 0)throw new Error(`Не найдено смещение в мапе для handle ${E} узла ${t.id}`);C.oscillography?g(I,C.name??"",mt[C.dataType],C.dataType):f(I)}));let T=Object.keys(t.data.inputHandles).reduce((E,C)=>{var D;const I=(D=e.find(H=>`${t.id} ${C}`===H.targetHandle))==null?void 0:D.sourceHandle;if(!I)throw new Error(`Не найдено исходный handle для handle ${C} узла ${t.id}`);const j=s.get(I);if(j===void 0)throw new Error(`Не найдено исходный узел для handle ${C} узла ${t.id}`);return E.push(j),E},[]);if(t.data.type==="analogInput"){const E=Object.values(t.data.outputHandles)[0].dataType;T=[o[E].splice(0,mt[E])[0]]}if("setpointDataType"in t.data&&T.unshift(t.data.setpointOffset),y==="fourierInt")return{inType:(l=(i=rt[y])==null?void 0:i[x])==null?void 0:l.in_type,sourcesOffsets:T,resultOffsets:b};if("lengthMemory"in t.data){const E=Object.values(t.data.outputHandles)[0].dataType,C=t.data.lengthMemory,I=o[E].splice(0,C*mt[E])[0],j=o.int.splice(0,mt.int)[0];return{inType:(p=(d=rt[y])==null?void 0:d[x])==null?void 0:p.in_type,instructionOffset:(m=(v=a.primitivesData[y])==null?void 0:v[x])==null?void 0:m.offset,ptrBegin:I,lengthMemory:C,resultOffsets:b,sourcesOffsets:T,workingSpace:j}}return{inType:(u=(w=rt[y])==null?void 0:w[x])==null?void 0:u.in_type,instructionOffset:(_=(h=a.primitivesData[y])==null?void 0:h[x])==null?void 0:_.offset,resultOffsets:b,sourcesOffsets:T}}catch(g){throw new Error(`Ошибка при создании scriptItem для узла ${t.id}: ${g instanceof Error?g.message:String(g)}`)}};function Me(t,e,a,o,n,s,r,i,l,d){if(e.has(t.id))return;e.add(t.id),t.data.type!=="fourierInt"&&so(t,Object.keys(t.data.inputHandles).length,o);const p=xe([t],d),{targets:v}=p.reduce((u,h)=>(h.source===t.id&&u.sources.push(h),h.target===t.id&&u.targets.push(h),u),{sources:[],targets:[]});ro(v,t);const m=nn(t,l,d),w=io(t,v,o,n,r,s,i);m.forEach(u=>Me(u,e,a,o,n,s,r,i,l,d)),a.push(w)}const lo=(t,e,a)=>{const o=new Map,n=new Map;return t.forEach(s=>{if(s.data.type.toLocaleLowerCase().includes("out")){const i=Object.values(s.data.inputHandles)[0].dataType,l=a[i].shift();n.set(s.id,l)}Object.entries(s.data.outputHandles).forEach(([i,l])=>{const d=Object.values(s.data.outputHandles)[0].dataType,p=e[d].splice(0,mt[d])[0];o.set(`${s.id} ${i}`,p)})}),{handleOffsetsMap:o,outputOffsetsMap:n}},Ut={bool:1,int:4,float:4,analog:160},ht=["bool","int","float","analog"],qt=(t,e)=>e===1?t:Math.ceil(t/4)*4,uo=(t,e)=>{const a=[];for(let o=t;o<t+e;o++)a.push(o);return a},co=(t,e,a,o)=>t<=o&&a<=e,po=(t,e)=>t.map(a=>a+e),yt=(t,e,a)=>{const o=Ut[t],n=ht.indexOf(t),s=l=>e[l].length?e[l][e[l].length-1]:null;let r=e[t].length?e[t][e[t].length-1]+1:0;if(e[t].length===0){for(let l=0;l<n;l++){const d=ht[l],p=s(d);p!==null&&(r=Math.max(r,qt(p+1,o)))}r=qt(r,o)}e[t].push(...uo(r,a??o));const i=l=>{const d=ht[l],p=e[d];if(!p.length)return;const v=p[0],m=p[p.length-1];for(let w=l+1;w<ht.length;w++){const u=ht[w],h=e[u];if(!h.length)continue;const _=h[0],g=h[h.length-1];if(co(v,m,_,g)){const f=Ut[u],x=qt(m+1,f)-_;e[u]=po(h,x),i(w);return}}};i(n)};function fo(t,e=512){const o=new TextEncoder().encode(t),n=[];let s=0;for(;s<o.length;){const r=o.slice(s,s+e),i=new TextDecoder().decode(r);n.push(i),s+=e}return n}const ye=un((t,e)=>({config:{scripts:[],instructions:[],setpoints:[],outputMatrix:[],inputMatrix:[],sms:"",smsWeb:"",phoneNumber:"",offsetsOsc:[]},setConfig(a){t(o=>({...o,config:{...o.config,...a}}))}})),ho=()=>{const[t,e]=Ht(u=>[u.nodes,u.edges],q),a=fn(u=>u.sendConfig),{setpointsValues:o}=Gt(u=>({setpointsValues:u.setpointsValues})),[n,s,r,i]=hn(u=>[u.indications,u.smsText,u.smsWebText,u.phoneNumber],q),l=Ee(u=>u.oscillographicOffsets,q),d=yn(u=>u.datas,q),p=()=>{const u={bool:[],int:[],float:[],analog:[]},h={bool:[],int:[],float:[],analog:[]},_={bool:[],int:[],float:[],analog:[]};return t.forEach(g=>{Object.values(g.data.outputHandles).forEach(f=>{if(yt(f.dataType,u),g.data.type.toLocaleLowerCase().includes("fifo")&&"lengthMemory"in g.data){const y=g.data.lengthMemory,x=Object.values(g.data.outputHandles)[0].dataType,b=y*Ut[x];yt(f.dataType,u,b),yt("int",u)}}),g.data.type==="analogInput"&&yt(Object.values(g.data.outputHandles)[0].dataType,u),g.data.type.toLocaleLowerCase().includes("output")&&yt(g.data.inputHandles.input.dataType,_)}),{offsets:{bool:[...u.bool],int:[...u.int],float:[...u.float],analog:[...u.analog]},setpointOffsets:{bool:[...h.bool],int:[...h.int],float:[...h.float],analog:[...h.analog]},outputOffsetsStore:{bool:[..._.bool],int:[..._.int],float:[..._.float],analog:[..._.analog]}}},v=(u,h,_)=>{const g=[],f=new Set,y=oo(),x=t.filter(E=>{var C;return(C=E.data)==null?void 0:C.type.toLowerCase().includes("output")});if(!x.length)throw new Error("Нет выходных элементов");const{handleOffsetsMap:b,outputOffsetsMap:T}=lo(t,u,_);return x.forEach(E=>Me(E,f,g,y,u,b,h,T,t,e)),{scripts:g,instructions:y.instructions}};return{calculateConfig:async()=>{try{const{setConfig:u}=ye.getState(),{offsets:h,setpointOffsets:_,outputOffsetsStore:g}=p();console.log("смещения",h),console.log("смещения уставок",_),console.log("смещения для выходов",g);const{scripts:f,instructions:y}=v(h,_,g);console.log("смещения",h),console.log("смещения уставок",_),console.log("смещения для выходов",g),u({scripts:f,instructions:y})}catch(u){throw z(u instanceof Error?u.message:"Ошибка сохранения",{variant:"error"}),u}},sendResConfig:()=>{const{config:u}=ye.getState();let h=[];Object.entries(l).forEach(x=>{h.push({length:x[1].lengthMemory,offset:Number(x[0])})});const _=Object.values(n).map(({led1:x,led2:b,led3:T,blOn:E,blOff:C,sms:I,smsWeb:j})=>[x,b,T,E,C,I,j]),g=Object.values(d).map(({I:x,U:b,HRM3:T})=>[x,b,T]),f={scripts:no(u.scripts),functions:u.instructions,setpoints:o,inputMatrix:g,outputMatrix:_,sms:s,smsWeb:r,phoneNumber:i,offsetsOsc:h};console.log(f),fo(JSON.stringify(f),512).forEach((x,b)=>setTimeout(()=>a(x),b*1e3))}}},yo=[{type:"analogInput",position:{x:0,y:0}},{type:"analogInput",position:{x:0,y:60}},{type:"analogInput",position:{x:0,y:120}},{type:"discreteOutput",position:{x:1500,y:0}},{type:"discreteOutput",position:{x:1500,y:60}},{type:"discreteOutput",position:{x:1500,y:120}},{type:"discreteOutput",position:{x:1500,y:180}},{type:"discreteOutput",position:{x:1500,y:240}}],go=[{type:"analogInput",position:{x:0,y:0}},{type:"analogInput",position:{x:0,y:60}},{type:"analogInput",position:{x:0,y:120}},{type:"analogInput",position:{x:0,y:180}},{type:"analogInput",position:{x:0,y:240}},{type:"analogInput",position:{x:0,y:300}},{type:"discreteInput",position:{x:0,y:360}},{type:"discreteInput",position:{x:0,y:420}},{type:"discreteInput",position:{x:0,y:480}},{type:"discreteInput",position:{x:0,y:540}},{type:"discreteInput",position:{x:0,y:600}},{type:"discreteInput",position:{x:0,y:660}},{type:"discreteOutput",position:{x:1500,y:0}},{type:"discreteOutput",position:{x:1500,y:60}},{type:"discreteOutput",position:{x:1500,y:120}},{type:"discreteOutput",position:{x:1500,y:180}},{type:"discreteOutput",position:{x:1500,y:240}}],mo=[{type:"analogInput",position:{x:0,y:0}},{type:"fifoWordWithoutEn",position:{x:530,y:-150}},{type:"fourierInt",position:{x:360,y:-5}},{type:"subInt",position:{x:750,y:-60}},{type:"constInt",position:{x:550,y:250}},{type:"constInt",position:{x:550,y:350}},{type:"moreInt",position:{x:970,y:-100}},{type:"lessInt",position:{x:970,y:100}},{type:"or",position:{x:1180,y:-50}},{type:"discreteOutput",position:{x:1400,y:0}}],ge={ikz:yo,rza:go,template1:mo},vo=t=>{const e={type:t.type,inputHandles:t.inputHandles,outputHandles:t.outputHandles,...t.name&&{name:t.name}};if("lengthMemory"in t)return{...e,lengthMemory:t.lengthMemory};if("setpointDataType"in t){const a=Xt(t.setpointDataType);return a===void 0?null:{...e,setpointDataType:t.setpointDataType,setpointOffset:a}}return e},$e=(t,e)=>{const a=Bn[t];if(!a)return z(`Неизвестный тип узла: ${t}`,{variant:"error"}),null;const o=vo(a);return o?{id:St(),type:"node",position:e,data:{...o}}:(z("Не удалось выделить память",{variant:"error"}),null)},xo=()=>{const t=Ht(n=>n.addNode,q),{screenToFlowPosition:e}=B();return{onDragOver:k.useCallback(n=>{n.preventDefault(),n.dataTransfer.dropEffect="move"},[]),onDrop:n=>{n.preventDefault();const s=n.dataTransfer.getData("application/reactflow"),r=e({x:n.clientX,y:n.clientY}),i=$e(s,r);i&&t(i)}}},bo=()=>{const[t,e]=Ht(n=>[n.nodes,n.setNodes],q);return{templatesKeys:be(ge),addNodeByTemplate:n=>{const r=ge[n].reduce((i,l)=>{const d=$e(l.type,l.position);return d&&i.push(d),i},[]);e([...t,...r])}}},Eo=({})=>{const[t,e]=k.useState(""),{templatesKeys:a,addNodeByTemplate:o}=bo(),n={ikz:"ИКЗ",rza:"РЗА",template1:"Шаблон икз2"};return c.jsx("div",{children:c.jsx(gn,{value:t,placeholder:"шаблоны",options:a.map(s=>({value:s,label:n[s]})),onChange:s=>{o(s),e(s)}})})},_o=({nodes:t})=>{const{calculateConfig:e,sendResConfig:a}=ho(),{cut:o,copy:n,paste:s,bufferedNodes:r}=Le(),i=t.some(({selected:d})=>d),l=r.length>0;return c.jsxs(c.Fragment,{children:[c.jsx(Lt,{position:"top-left",children:c.jsx(Eo,{})}),c.jsxs(Lt,{position:"top-center",style:{display:"flex",gap:"10px"},children:[c.jsx(R,{text:"cut",type:"button",onClick:()=>o(),disabled:!i}),c.jsx(R,{text:"copy",type:"button",onClick:()=>n(),disabled:!i}),c.jsx(R,{text:"paste",type:"button",onClick:()=>s(),disabled:!l}),c.jsx(R,{text:"Рассчитать",type:"button",onClick:()=>e()}),c.jsx(R,{text:"Отправить",type:"button",onClick:()=>a()})]}),c.jsx(Lt,{position:"top-right",children:c.jsx(eo,{})})]})},Co=()=>{const{nodes:t,edges:e,onNodesChange:a,onEdgesChange:o,addEdge:n}=Ht(Dn,q),{onDragOver:s,onDrop:r}=xo(),{getNodes:i,getEdges:l}=B(),{enqueueSnackbar:d}=fa();return{nodes:t,edges:e,onNodesChange:a,onEdgesChange:o,addEdge:n,onDragOver:s,onDrop:r,isValidConnection:m=>{var C,I,j,D;const w=i(),u=l(),h=m.source??"",_=m.target??"",g=m.sourceHandle,f=m.targetHandle,y=w.find(H=>H.id===h),x=w.find(H=>H.id===_);if(!y||!x||!g||!f)return!1;const b=((C=y.data.outputHandles[g==null?void 0:g.split(" ")[1]])==null?void 0:C.dataType)||((I=y.data.inputHandles[g==null?void 0:g.split(" ")[1]])==null?void 0:I.dataType),T=((j=x.data.inputHandles[f==null?void 0:f.split(" ")[1]])==null?void 0:j.dataType)||((D=x.data.outputHandles[f==null?void 0:f.split(" ")[1]])==null?void 0:D.dataType);if(b!==T)return!1;const E=(H,L=new Set)=>{if(L.has(H.id))return!1;L.add(H.id);for(const W of an(H,w,u))if(W.id===h||E(W,L))return!0;return!1};return h===_?!1:!E(x)},onConnectEnd:(m,w)=>{var j,D,H,L,W,lt,V,Et;const{fromNode:u,fromHandle:h,toNode:_,toHandle:g,isValid:f}=w,y=Bt=>Bt==null?void 0:Bt.data;if(!u||!_||!(h!=null&&h.id)||!(g!=null&&g.id))return;const x=h.id.split(" ")[1],b=g.id.split(" ")[1],T=y(u),E=y(_),C=((D=(j=T.outputHandles)==null?void 0:j[x])==null?void 0:D.dataType)??((L=(H=T.inputHandles)==null?void 0:H[x])==null?void 0:L.dataType),I=((lt=(W=E.inputHandles)==null?void 0:W[b])==null?void 0:lt.dataType)??((Et=(V=E.outputHandles)==null?void 0:V[b])==null?void 0:Et.dataType);C!==I&&f===!1&&d("Нерроектное соединение",{variant:"error"})}}},ko=()=>{const{nodes:t,edges:e,onNodesChange:a,onEdgesChange:o,onDragOver:n,onDrop:s,isValidConnection:r,onConnectEnd:i,addEdge:l}=Co();return console.log(e),c.jsx("div",{className:Hn["graph-editor"],children:c.jsxs(sn,{deleteKeyCode:null,proOptions:Ka,nodeTypes:Xa,edgeTypes:Ua,nodes:t,edges:e,onNodesChange:a,onEdgesChange:o,onConnect:l,onDragOver:n,onDrop:s,connectionLineComponent:Ya,isValidConnection:r,onConnectEnd:i,fitView:!0,children:[c.jsx(_o,{nodes:t}),c.jsx(rn,{}),c.jsx(ln,{})]})})},wo=()=>c.jsx(on,{children:c.jsx(pa,{maxSnack:3,children:c.jsx(ko,{})})}),Po=()=>c.jsx(wo,{});export{Po as default};
