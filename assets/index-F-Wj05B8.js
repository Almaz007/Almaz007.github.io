import{r as k,j as u,c as U,G as $e,R as S,a as Re}from"./index-BCwdqR_C.js";import{u as M,a as ye,g as me,B as Pe,E as Ve,P as F,b as ve,c as We,d as Fe,H as Ae,e as Xt,N as qe,f as ze,C as Ke,o as Ue,i as Xe,l as Ye,h as Ge,j as Ze,t as Qe,F as Je,k as tn,m as en,n as Dt,p as Lt,q as nn,R as an,r as on,s as sn,v as rn}from"./index-Bkcxp9y5.js";import{I as lt}from"./Input-CTczDPDl.js";import{s as tt}from"./shallow-CqVE0ls7.js";import{u as Yt,a as ln,b as un}from"./useUpdateSetpointValue-3Clp0sCm.js";import{B as W}from"./Button-DBWDZ7wN.js";import{v as St}from"./v4-C6aID195.js";import{u as cn,a as dn}from"./useBleStore-BGXowKo1.js";import{u as pn}from"./store-BczLEGFN.js";import{u as fn}from"./store-c6V6wDgO.js";import{g as be}from"./helpers-C0jkC3_s.js";import{u as xe}from"./store-BeaiZ9k9.js";import{u as Jt}from"./store-DgiC-0z1.js";import{C as hn}from"./CustomSelect-CSBZBilY.js";const gn="_popup_1f2l0_1",yn="_left_1f2l0_31",mn="_center_1f2l0_34",vn="_right_1f2l0_38",bn="_visible_1f2l0_41",xn="_popup__label_1f2l0_46",ft={popup:gn,"popup-content":"_popup-content_1f2l0_6",left:yn,center:mn,right:vn,visible:bn,popup__label:xn},En=({text:e,children:t,position:a})=>{const[o,n]=k.useState(!1),s=k.useRef(null);k.useEffect(()=>{const r=l=>{s.current&&l.target instanceof Node&&!s.current.contains(l.target)&&n(!1)};return document.addEventListener("click",r),()=>{document.removeEventListener("click",r)}},[]);const i=r=>{r.stopPropagation(),n(l=>!l)};return u.jsxs("div",{className:ft.popup,ref:s,children:[u.jsx(W,{text:e,type:"button",onClick:i}),u.jsxs("div",{className:U(ft["popup-content"],ft[a],{[ft.visible]:o}),children:[u.jsx("div",{className:ft.popup__label,children:e}),u.jsx("div",{children:t})]})]})};function kn(e){return $e({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 294.1L383 167c9.4-9.4 24.6-9.4 33.9 0s9.3 24.6 0 34L273 345c-9.1 9.1-23.7 9.3-33.1.7L95 201.1c-4.7-4.7-7-10.9-7-17s2.3-12.3 7-17c9.4-9.4 24.6-9.4 33.9 0l127.1 127z"},child:[]}]})(e)}const _n="_container_6luk1_1",Cn="_header_6luk1_10",In="_title_6luk1_26",Tn="_arrow_6luk1_32",wn="_rotated_6luk1_37",On="_content_6luk1_41",Sn="_innerContent_6luk1_46",X={container:_n,header:Cn,title:In,arrow:Tn,rotated:wn,content:On,innerContent:Sn},Y=({name:e,children:t,defaultOpen:a=!1})=>{const[o,n]=k.useState(a),[s,i]=k.useState(0),r=k.useRef(null);k.useEffect(()=>{r.current&&i(r.current.scrollHeight)},[t]);const l=()=>{n(c=>!c)};return u.jsxs("div",{className:X.container,children:[u.jsxs("button",{className:X.header,onClick:l,"aria-expanded":o,children:[u.jsx("span",{className:X.title,children:e}),u.jsx(kn,{className:U(X.arrow,{[X.rotated]:o})})]}),u.jsx("div",{ref:r,className:X.content,style:{height:o?`${s}px`:"0px"},"aria-hidden":!o,children:u.jsx("div",{className:X.innerContent,children:t})})]})},jn={"graph-editor":"_graph-editor_1szks_1"},Nn=e=>({nodes:e.nodes,edges:e.edges,onNodesChange:e.onNodesChange,onEdgesChange:e.onEdgesChange,addEdge:e.addEdge}),Dn={discreteInput:{outputHandles:{out:{dataType:"bool"}},inputHandles:{},type:"discreteInput"},discreteOutput:{inputHandles:{input:{dataType:"bool"}},outputHandles:{},type:"discreteOutput",name:""},analogInput:{outputHandles:{out:{dataType:"analog"}},inputHandles:{},type:"analogInput"},analogInputInt:{outputHandles:{out:{dataType:"int"}},inputHandles:{},type:"analogInputInt"},analogOutput:{inputHandles:{input:{dataType:"float"}},outputHandles:{},type:"analogOutput",name:""},xor:{inputHandles:{"input-1":{dataType:"bool"},"input-2":{dataType:"bool"}},outputHandles:{out:{dataType:"bool"}},type:"xor"},and:{inputHandles:{"input-1":{dataType:"bool"},"input-2":{dataType:"bool"}},outputHandles:{out:{dataType:"bool"}},type:"and"},or:{inputHandles:{"input-1":{dataType:"bool"},"input-2":{dataType:"bool"},"input-3":{dataType:"bool"}},outputHandles:{out:{dataType:"bool"}},type:"or"},nand:{inputHandles:{"input-1":{dataType:"bool"},"input-2":{dataType:"bool"},"input-3":{dataType:"bool"}},outputHandles:{out:{dataType:"bool"}},type:"nand"},nor:{inputHandles:{"input-1":{dataType:"bool"},"input-2":{dataType:"bool"},"input-3":{dataType:"bool"}},outputHandles:{out:{dataType:"bool"}},type:"nor"},notOperation:{inputHandles:{"input-1":{dataType:"bool"}},outputHandles:{out:{dataType:"bool"}},type:"notOperation"},sumInt:{inputHandles:{"input-1":{dataType:"int"},"input-2":{dataType:"int"}},outputHandles:{out:{dataType:"int"}},type:"sumInt"},multInt:{inputHandles:{"input-1":{dataType:"int"},"input-2":{dataType:"int"}},outputHandles:{out:{dataType:"int"}},type:"multInt"},divInt:{inputHandles:{"input-1":{dataType:"int"},"input-2":{dataType:"int"}},outputHandles:{out:{dataType:"int"}},type:"divInt"},subInt:{inputHandles:{"input-1":{dataType:"int"},"input-2":{dataType:"int"}},outputHandles:{out:{dataType:"int"}},type:"subInt"},equalsInt:{inputHandles:{"input-1":{dataType:"int"},"input-2":{dataType:"int"}},outputHandles:{out:{dataType:"bool"}},type:"equalsInt"},lessInt:{inputHandles:{"input-1":{dataType:"int"},"input-2":{dataType:"int"}},outputHandles:{out:{dataType:"bool"}},type:"lessInt"},moreInt:{inputHandles:{"input-1":{dataType:"int"},"input-2":{dataType:"int"}},outputHandles:{out:{dataType:"bool"}},type:"moreInt"},timerInt:{inputHandles:{},outputHandles:{out:{dataType:"int"}},setpointDataType:"int",setpointOffset:null,type:"timerInt",name:""},risEdgeTimerBool:{inputHandles:{"input-1":{dataType:"bool"}},outputHandles:{out:{dataType:"bool"}},type:"risEdgeTimerBool",digit:0,name:""},constInt:{inputHandles:{},outputHandles:{out:{dataType:"int"}},setpointDataType:"int",setpointOffset:null,type:"constInt",name:""},constBoolean:{inputHandles:{},outputHandles:{out:{dataType:"bool"}},setpointDataType:"int",setpointOffset:null,type:"constBoolean",name:""},fourierInt:{inputHandles:{"input-1":{dataType:"analog"}},outputHandles:{"out-1":{dataType:"int"},"out-2":{dataType:"int"}},type:"fourierInt",setpointDataType:"int",setpointOffset:null},fifoByte:{type:"fifoByte",lengthMemory:1,inputHandles:{"input-1":{dataType:"bool"},"input-2":{dataType:"bool"}},outputHandles:{"out-1":{dataType:"bool"}}},fifoWord:{type:"fifoWord",lengthMemory:1,inputHandles:{"input-1":{dataType:"int"},"input-2":{dataType:"bool"}},outputHandles:{"out-1":{dataType:"int"}}},fifoByteWithoutEn:{type:"fifoByteWithoutEn",lengthMemory:1,inputHandles:{"input-1":{dataType:"bool"}},outputHandles:{"out-1":{dataType:"bool"}}},fifoWordWithoutEn:{type:"fifoWordWithoutEn",lengthMemory:1,inputHandles:{"input-1":{dataType:"int"}},outputHandles:{"out-1":{dataType:"int"}}},dtrigger:{inputHandles:{},outputHandles:{out:{dataType:"bool"}},type:"dtrigger"}},J={discreteInput:{0:{instruction:[34,12,131,199,5,0,35,0,245,0,130,128],lengthInBytes:12,in_type:33}},discreteOutput:{1:{instruction:[34,12,131,199,5,0,35,0,245,0,130,128],lengthInBytes:12,in_type:30}},analogInput:{0:{instruction:[34,12,131,199,5,0,35,0,245,0,130,128],lengthInBytes:12,in_type:33}},analogInputInt:{0:{instruction:[34,12,131,199,5,0,35,0,245,0,130,128],lengthInBytes:12,in_type:34}},analogOutput:{},dtrigger:{},multInt:{2:{instruction:[34,12,156,65,24,66,179,135,231,2,28,193,130,128],lengthInBytes:14,in_type:8}},divInt:{2:{instruction:[34,12,156,65,24,66,179,135,231,2,28,193,130,128],lengthInBytes:14,in_type:45}},subInt:{2:{instruction:[34,12,156,65,24,66,153,143,28,193,130,128],lengthInBytes:12,in_type:8}},sumInt:{2:{instruction:[34,12,156,65,24,66,186,151,28,193,130,128],lengthInBytes:12,in_type:8},3:{instruction:[130,128,24,66,156,65,186,151,152,66,186,151,28,193,130,128],lengthInBytes:16,in_type:9},4:{instruction:[130,128,156,65,16,66,148,66,24,67,178,151,182,151,186,151,28,193,130,128],lengthInBytes:20,in_type:10},5:{instruction:[130,128,140,65,16,66,148,66,24,67,156,67,178,149,182,149,186,149,190,149,12,193,130,128],lengthInBytes:24,in_type:11},6:{instruction:[130,128,140,65,16,66,148,66,24,67,156,67,178,149,182,149,186,149,190,149,131,39,8,0,190,149,12,193,130,128],lengthInBytes:30,in_type:12},7:{instruction:[130,128,140,65,16,66,148,66,24,67,156,67,178,149,182,149,186,149,190,149,131,39,8,0,190,149,131,167,8,0,190,149,12,193,130,128],lengthInBytes:36,in_type:13}},notOperation:{1:{instruction:[34,12,131,199,5,0,147,199,23,0,35,0,245,0,130,128],lengthInBytes:16,in_type:1}},and:{2:{instruction:[34,12,131,199,5,0,3,71,6,0,249,143,35,0,245,0,130,128],lengthInBytes:18,in_type:2},3:{instruction:[130,128,3,199,6,0,131,71,6,0,249,143,3,199,5,0,249,143,35,0,245,0,130,128],lengthInBytes:24,in_type:3},4:{instruction:[130,128,3,71,7,0,131,199,6,0,249,143,3,71,6,0,249,143,3,199,5,0,249,143,35,0,245,0,130,128],lengthInBytes:30,in_type:4},5:{instruction:[130,128,131,199,7,0,3,71,7,0,125,143,131,199,6,0,125,143,131,71,6,0,125,143,131,199,5,0,125,143,35,0,229,0,130,128],lengthInBytes:36,in_type:5},6:{instruction:[130,128,131,199,7,0,3,72,8,0,3,71,7,0,179,247,7,1,249,143,3,199,6,0,249,143,3,71,6,0,249,143,3,199,5,0,249,143,35,0,245,0,130,128],lengthInBytes:44,in_type:6},7:{instruction:[130,128,3,72,8,0,131,200,8,0,131,199,7,0,51,120,24,1,51,120,248,0,131,71,7,0,51,120,248,0,131,199,6,0,51,120,248,0,131,71,6,0,51,120,248,0,131,199,5,0,51,120,248,0,35,0,5,1,130,128],lengthInBytes:60,in_type:7}},nand:{2:{instruction:[34,12,131,199,5,0,3,71,6,0,249,143,147,199,23,0,35,0,245,0,130,128],lengthInBytes:22,in_type:2},3:{instruction:[130,128,3,199,6,0,131,71,6,0,249,143,3,199,5,0,249,143,147,199,23,0,35,0,245,0,130,128],lengthInBytes:28,in_type:3},4:{instruction:[130,128,3,71,7,0,131,199,6,0,249,143,3,71,6,0,249,143,3,199,5,0,249,143,147,199,23,0,35,0,245,0,130,128],lengthInBytes:34,in_type:4},5:{instruction:[130,128,131,199,7,0,3,71,7,0,125,143,131,199,6,0,125,143,131,71,6,0,125,143,131,199,5,0,125,143,19,71,23,0,35,0,229,0,130,128],lengthInBytes:40,in_type:5},6:{instruction:[130,128,131,199,7,0,3,72,8,0,3,71,7,0,179,247,7,1,249,143,3,199,6,0,249,143,3,71,6,0,249,143,3,199,5,0,249,143,147,199,23,0,35,0,245,0,130,128],lengthInBytes:48,in_type:6},7:{instruction:[130,128,3,72,8,0,131,200,8,0,131,199,7,0,51,120,24,1,51,120,248,0,131,71,7,0,51,120,248,0,131,199,6,0,51,120,248,0,131,71,6,0,51,120,248,0,131,199,5,0,51,120,248,0,19,72,24,0,35,0,5,1,130,128],lengthInBytes:64,in_type:7}},nor:{2:{instruction:[34,12,131,199,5,0,3,71,6,0,249,143,147,199,23,0,35,0,245,0,130,128],lengthInBytes:22,in_type:2},3:{instruction:[130,128,3,199,6,0,131,71,6,0,249,143,3,199,5,0,249,143,147,199,23,0,35,0,245,0,130,128],lengthInBytes:28,in_type:3},4:{instruction:[130,128,3,71,7,0,131,199,6,0,249,143,3,71,6,0,249,143,3,199,5,0,249,143,147,199,23,0,35,0,245,0,130,128],lengthInBytes:34,in_type:4},5:{instruction:[130,128,131,199,7,0,3,71,7,0,125,143,131,199,6,0,125,143,131,71,6,0,125,143,131,199,5,0,125,143,19,71,23,0,35,0,229,0,130,128],lengthInBytes:40,in_type:5},6:{instruction:[130,128,131,199,7,0,3,72,8,0,3,71,7,0,179,247,7,1,249,143,3,199,6,0,249,143,3,71,6,0,249,143,3,199,5,0,249,143,147,199,23,0,35,0,245,0,130,128],lengthInBytes:48,in_type:6},7:{instruction:[130,128,3,72,8,0,131,200,8,0,131,199,7,0,51,120,24,1,51,120,248,0,131,71,7,0,51,120,248,0,131,199,6,0,51,120,248,0,131,71,6,0,51,120,248,0,131,199,5,0,51,120,248,0,19,72,24,0,35,0,5,1,130,128],lengthInBytes:64,in_type:7}},or:{2:{instruction:[34,12,131,199,5,0,3,71,6,0,217,143,35,0,245,0,130,128],lengthInBytes:18,in_type:2},3:{instruction:[130,128,3,199,6,0,131,71,6,0,217,143,3,199,5,0,217,143,35,0,245,0,130,128],lengthInBytes:24,in_type:3},4:{instruction:[130,128,3,71,7,0,131,199,6,0,217,143,3,71,6,0,217,143,3,199,5,0,217,143,35,0,245,0,130,128],lengthInBytes:30,in_type:4},5:{instruction:[130,128,131,199,7,0,3,71,7,0,93,143,131,199,6,0,93,143,131,71,6,0,93,143,131,199,5,0,93,143,35,0,229,0,130,128],lengthInBytes:36,in_type:5},6:{instruction:[130,128,131,199,7,0,3,72,8,0,3,71,7,0,179,231,7,1,217,143,3,199,6,0,217,143,3,71,6,0,217,143,3,199,5,0,217,143,35,0,245,0,130,128],lengthInBytes:44,in_type:6},7:{instruction:[130,128,3,72,8,0,131,200,8,0,131,199,7,0,51,104,24,1,51,104,248,0,131,71,7,0,51,104,248,0,131,199,6,0,51,104,248,0,131,71,6,0,51,104,248,0,131,199,5,0,51,104,248,0,35,0,5,1,130,128],lengthInBytes:60,in_type:7}},xor:{2:{instruction:[34,12,131,199,5,0,3,71,6,0,185,143,35,0,245,0,130,128],lengthInBytes:18,in_type:2},3:{instruction:[130,128,3,199,6,0,131,71,6,0,185,143,3,199,5,0,185,143,35,0,245,0,130,128],lengthInBytes:24,in_type:3},4:{instruction:[130,128,3,71,7,0,131,199,6,0,185,143,3,71,6,0,185,143,3,199,5,0,185,143,35,0,245,0,130,128],lengthInBytes:30,in_type:4},5:{instruction:[130,128,131,199,7,0,3,71,7,0,61,143,131,199,6,0,61,143,131,71,6,0,61,143,131,199,5,0,61,143,35,0,229,0,130,128],lengthInBytes:36,in_type:5},6:{instruction:[130,128,131,199,7,0,3,72,8,0,3,71,7,0,179,199,7,1,185,143,3,199,6,0,185,143,3,71,6,0,185,143,3,199,5,0,185,143,35,0,245,0,130,128],lengthInBytes:44,in_type:6},7:{instruction:[130,128,3,72,8,0,131,200,8,0,131,199,7,0,51,72,24,1,51,72,248,0,131,71,7,0,51,72,248,0,131,199,6,0,51,72,248,0,131,71,6,0,51,72,248,0,131,199,5,0,51,72,248,0,35,0,5,1,130,128],lengthInBytes:60,in_type:7}},equalsInt:{2:{instruction:[34,12,152,65,28,66,35,0,5,0,99,21,247,0,133,71,35,0,245,0,130,128],lengthInBytes:22,in_type:26}},equalsFloat:{},moreInt:{2:{instruction:[34,12,152,65,28,66,35,0,5,0,99,213,231,0,133,71,35,0,245,0,130,128],lengthInBytes:22,in_type:26}},moreFloat:{},lessInt:{2:{instruction:[34,12,152,65,28,66,35,0,5,0,99,85,247,0,133,71,35,0,245,0,130,128],lengthInBytes:22,in_type:26}},lessFloat:{},constInt:{0:{instruction:[34,12,156,65,28,193,130,128],lengthInBytes:8,in_type:28}},constBoolean:{0:{instruction:[34,12,131,199,5,0,35,0,245,0,130,128],lengthInBytes:8,in_type:29}},timerInt:{0:{instruction:[34,12,28,65,133,7,28,193,152,65,99,84,247,0,35,32,5,0,130,128],lengthInBytes:20,in_type:27}},risEdgeTimerBool:{1:{instruction:[34,12,28,65,133,7,28,193,152,65,99,84,247,0,35,32,5,0,130,128],lengthInBytes:20,in_type:46}},fourierInt:{1:{instruction:[],lengthInBytes:0,in_type:36},2:{instruction:[],lengthInBytes:0,in_type:37},3:{instruction:[],lengthInBytes:0,in_type:38}},fifoByte:{2:{instruction:[3,71,7,0,13,195,152,67,99,100,183,0,35,160,7,0,131,198,6,0,152,67,42,151,35,0,215,0,152,67,5,7,99,122,183,0,152,195,156,67,62,149,131,71,5,0,35,0,246,0,130,128,35,160,7,0,253,183,130,128],lengthInBytes:60,in_type:41}},fifoWord:{2:{instruction:[3,71,7,0,5,195,152,67,99,100,183,0,35,160,7,0,148,66,152,67,51,71,167,32,20,195,152,67,5,7,99,121,183,0,152,195,156,67,51,197,167,32,28,65,28,194,130,128,35,160,7,0,197,191,130,128],lengthInBytes:56,in_type:42}},fifoByteWithoutEn:{1:{instruction:[28,67,99,228,183,0,35,32,7,0,148,66,28,67,179,199,167,32,148,195,20,67,147,135,22,0,179,181,183,0,179,5,176,64,237,143,28,195,179,199,167,32,156,67,28,194,130,128],lengthInBytes:48,in_type:43}},fifoWordWithoutEn:{1:{instruction:[28,67,99,228,183,0,35,32,7,0,131,198,6,0,28,67,170,151,35,128,215,0,28,67,133,7,179,181,183,0,179,5,176,64,237,143,28,195,62,149,131,71,5,0,35,0,246,0,130,128],lengthInBytes:50,in_type:44}}},ct={bool:{clr:"#00ff00",selectedClr:"#08d508"},int:{clr:"#368ff4",selectedClr:"#2b79d2"},float:{clr:"#ffe417",selectedClr:"#ead219"},analog:{clr:"#cd1fe8",selectedClr:"#ab2cbe"}},Hn={bool:void 0,analog:void 0,int:"circle",float:"arrow-closed"},kt={"button-edge__label":"_button-edge__label_u76e6_1","button-txt":"_button-txt_u76e6_28",delete:"_delete_u76e6_41"},Bn=({id:e,source:t,sourceHandleId:a,sourceX:o,sourceY:n,targetX:s,targetY:i,selected:r,sourcePosition:l=F.Right,targetPosition:c=F.Left})=>{var N,H,L,R;const{getEdge:d,setEdges:v,updateNodeData:m}=M(),p=ye($=>$.nodeLookup.get(t),tt),h=d(e);if(!p||!h||!a)return null;const g=a.split(" ")[1],b=p.data.outputHandles[g];if(!b)return null;const{dataType:x,oscillography:f,name:y}=b,[C,E,T]=me({sourceX:o,sourceY:n,targetX:s,targetY:i,sourcePosition:l,targetPosition:c,borderRadius:8,offset:17}),I=r?(N=ct[x])==null?void 0:N.selectedClr:(H=ct[x])==null?void 0:H.clr,_=Hn[x],w=()=>{v($=>$.filter(at=>at.id!==h.id)),m(p.id,{outputHandles:{...p.data.outputHandles,[g]:{...b,oscillography:!f,name:""}}})},j=()=>{m(p.id,{outputHandles:{...p.data.outputHandles,[g]:{...b,oscillography:!f,name:""}}})},B=$=>{m(p.id,{outputHandles:{...p.data.outputHandles,[g]:{...b,name:$.target.value??""}}})};return u.jsxs(u.Fragment,{children:[u.jsxs("defs",{children:[u.jsx("marker",{id:"circle",viewBox:"0 0 10 10",refX:9,refY:5,markerWidth:8,markerHeight:8,orient:"auto-start-reverse",children:u.jsx("circle",{cx:"6",cy:"5",r:"3",fill:(L=ct.int)==null?void 0:L.clr})}),u.jsx("marker",{id:"arrow-closed",viewBox:"0 0 10 10",refX:10,refY:5,markerWidth:8,markerHeight:8,orient:"auto-start-reverse",children:u.jsx("path",{d:"M 0 0 L 10 5 L 0 10 Z",fill:(R=ct.float)==null?void 0:R.clr})})]}),u.jsx(Pe,{id:e,path:C,style:{stroke:I,strokeWidth:3},markerEnd:_?`url(#${_})`:void 0}),r&&u.jsx(Ve,{children:u.jsxs("div",{className:U(kt["button-edge__label"],"nodrag","nopan"),style:{transform:`translate(-50%, -140%) translate(${E}px,${T}px)`},children:[f&&u.jsx(lt,{style:{width:"100%",padding:"6px",fontSize:"14px"},placeholder:"Название сигнала",type:"text",value:y,onChange:B}),u.jsx("button",{className:kt["button-txt"],onClick:j,children:f?"Разосцилографировать":"Осцилографировать"}),u.jsx("button",{className:U(kt["button-txt"],kt.delete),onClick:w,children:"Удалить"})]})})]})};function Ee(e){var t,a,o="";if(typeof e=="string"||typeof e=="number")o+=e;else if(typeof e=="object")if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(a=Ee(e[t]))&&(o&&(o+=" "),o+=a);else for(t in e)e[t]&&(o&&(o+=" "),o+=t);return o}function nt(){for(var e,t,a=0,o="";a<arguments.length;)(e=arguments[a++])&&(t=Ee(e))&&(o&&(o+=" "),o+=t);return o}let Ln={data:""},Mn=e=>typeof window=="object"?((e?e.querySelector("#_goober"):window._goober)||Object.assign((e||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:e||Ln,$n=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,Rn=/\/\*[^]*?\*\/|  +/g,te=/\n+/g,Q=(e,t)=>{let a="",o="",n="";for(let s in e){let i=e[s];s[0]=="@"?s[1]=="i"?a=s+" "+i+";":o+=s[1]=="f"?Q(i,s):s+"{"+Q(i,s[1]=="k"?"":t)+"}":typeof i=="object"?o+=Q(i,t?t.replace(/([^,])+/g,r=>s.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,l=>/&/.test(l)?l.replace(/&/g,r):r?r+" "+l:l)):s):i!=null&&(s=/^--/.test(s)?s:s.replace(/[A-Z]/g,"-$&").toLowerCase(),n+=Q.p?Q.p(s,i):s+":"+i+";")}return a+(t&&n?t+"{"+n+"}":n)+o},P={},ke=e=>{if(typeof e=="object"){let t="";for(let a in e)t+=a+ke(e[a]);return t}return e},Pn=(e,t,a,o,n)=>{let s=ke(e),i=P[s]||(P[s]=(l=>{let c=0,d=11;for(;c<l.length;)d=101*d+l.charCodeAt(c++)>>>0;return"go"+d})(s));if(!P[i]){let l=s!==e?e:(c=>{let d,v,m=[{}];for(;d=$n.exec(c.replace(Rn,""));)d[4]?m.shift():d[3]?(v=d[3].replace(te," ").trim(),m.unshift(m[0][v]=m[0][v]||{})):m[0][d[1]]=d[2].replace(te," ").trim();return m[0]})(e);P[i]=Q(n?{["@keyframes "+i]:l}:l,a?"":"."+i)}let r=a&&P.g?P.g:null;return a&&(P.g=P[i]),((l,c,d,v)=>{v?c.data=c.data.replace(v,l):c.data.indexOf(l)===-1&&(c.data=d?l+c.data:c.data+l)})(P[i],t,o,r),i},Vn=(e,t,a)=>e.reduce((o,n,s)=>{let i=t[s];if(i&&i.call){let r=i(a),l=r&&r.props&&r.props.className||/^go/.test(r)&&r;i=l?"."+l:r&&typeof r=="object"?r.props?"":Q(r,""):r===!1?"":r}return o+n+(i??"")},"");function Gt(e){let t=this||{},a=e.call?e(t.p):e;return Pn(a.unshift?a.raw?Vn(a,[].slice.call(arguments,1),t.p):a.reduce((o,n)=>Object.assign(o,n&&n.call?n(t.p):n),{}):a,Mn(t.target),t.g,t.o,t.k)}Gt.bind({g:1});Gt.bind({k:1});function Wn(e,t){for(var a=0;a<t.length;a++){var o=t[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _e(e,t,a){return t&&Wn(e.prototype,t),e}function O(){return O=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(e[o]=a[o])}return e},O.apply(this,arguments)}function Ce(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function xt(e,t){if(e==null)return{};var a={},o=Object.keys(e),n,s;for(s=0;s<o.length;s++)n=o[s],!(t.indexOf(n)>=0)&&(a[n]=e[n]);return a}function ee(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var ne=function(){return""},Ie=S.createContext({enqueueSnackbar:ne,closeSnackbar:ne}),Z={downXs:"@media (max-width:599.95px)",upSm:"@media (min-width:600px)"},ae=function(t){return t.charAt(0).toUpperCase()+t.slice(1)},Zt=function(t){return""+ae(t.vertical)+ae(t.horizontal)},_t=function(t){return!!t||t===0},Ct="unmounted",ot="exited",st="entering",ht="entered",oe="exiting",Qt=function(e){Ce(t,e);function t(o){var n;n=e.call(this,o)||this;var s=o.appear,i;return n.appearStatus=null,o.in?s?(i=ot,n.appearStatus=st):i=ht:o.unmountOnExit||o.mountOnEnter?i=Ct:i=ot,n.state={status:i},n.nextCallback=null,n}t.getDerivedStateFromProps=function(n,s){var i=n.in;return i&&s.status===Ct?{status:ot}:null};var a=t.prototype;return a.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},a.componentDidUpdate=function(n){var s=null;if(n!==this.props){var i=this.state.status;this.props.in?i!==st&&i!==ht&&(s=st):(i===st||i===ht)&&(s=oe)}this.updateStatus(!1,s)},a.componentWillUnmount=function(){this.cancelNextCallback()},a.getTimeouts=function(){var n=this.props.timeout,s=n,i=n;return n!=null&&typeof n!="number"&&typeof n!="string"&&(i=n.exit,s=n.enter),{exit:i,enter:s}},a.updateStatus=function(n,s){n===void 0&&(n=!1),s!==null?(this.cancelNextCallback(),s===st?this.performEnter(n):this.performExit()):this.props.unmountOnExit&&this.state.status===ot&&this.setState({status:Ct})},a.performEnter=function(n){var s=this,i=this.props.enter,r=n,l=this.getTimeouts();if(!n&&!i){this.safeSetState({status:ht},function(){s.props.onEntered&&s.props.onEntered(s.node,r)});return}this.props.onEnter&&this.props.onEnter(this.node,r),this.safeSetState({status:st},function(){s.props.onEntering&&s.props.onEntering(s.node,r),s.onTransitionEnd(l.enter,function(){s.safeSetState({status:ht},function(){s.props.onEntered&&s.props.onEntered(s.node,r)})})})},a.performExit=function(){var n=this,s=this.props.exit,i=this.getTimeouts();if(!s){this.safeSetState({status:ot},function(){n.props.onExited&&n.props.onExited(n.node)});return}this.props.onExit&&this.props.onExit(this.node),this.safeSetState({status:oe},function(){n.props.onExiting&&n.props.onExiting(n.node),n.onTransitionEnd(i.exit,function(){n.safeSetState({status:ot},function(){n.props.onExited&&n.props.onExited(n.node)})})})},a.cancelNextCallback=function(){this.nextCallback!==null&&this.nextCallback.cancel&&(this.nextCallback.cancel(),this.nextCallback=null)},a.safeSetState=function(n,s){s=this.setNextCallback(s),this.setState(n,s)},a.setNextCallback=function(n){var s=this,i=!0;return this.nextCallback=function(){i&&(i=!1,s.nextCallback=null,n())},this.nextCallback.cancel=function(){i=!1},this.nextCallback},a.onTransitionEnd=function(n,s){this.setNextCallback(s);var i=n==null&&!this.props.addEndListener;if(!this.node||i){setTimeout(this.nextCallback,0);return}this.props.addEndListener&&this.props.addEndListener(this.node,this.nextCallback),n!=null&&setTimeout(this.nextCallback,n)},a.render=function(){var n=this.state.status;if(n===Ct)return null;var s=this.props,i=s.children,r=xt(s,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return i(n,r)},_e(t,[{key:"node",get:function(){var n,s=(n=this.props.nodeRef)===null||n===void 0?void 0:n.current;if(!s)throw new Error("notistack - Custom snackbar is not refForwarding");return s}}]),t}(S.Component);function it(){}Qt.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:it,onEntering:it,onEntered:it,onExit:it,onExiting:it,onExited:it};function se(e,t){typeof e=="function"?e(t):e&&(e.current=t)}function zt(e,t){return k.useMemo(function(){return e==null&&t==null?null:function(a){se(e,a),se(t,a)}},[e,t])}function Nt(e){var t=e.timeout,a=e.style,o=a===void 0?{}:a,n=e.mode;return{duration:typeof t=="object"?t[n]||0:t,easing:o.transitionTimingFunction,delay:o.transitionDelay}}var Kt={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},Te=function(t){t.scrollTop=t.scrollTop},ie=function(t){return Math.round(t)+"ms"};function dt(e,t){e===void 0&&(e=["all"]);var a=t||{},o=a.duration,n=o===void 0?300:o,s=a.easing,i=s===void 0?Kt.easeInOut:s,r=a.delay,l=r===void 0?0:r,c=Array.isArray(e)?e:[e];return c.map(function(d){var v=typeof n=="string"?n:ie(n),m=typeof l=="string"?l:ie(l);return d+" "+v+" "+i+" "+m}).join(",")}function Fn(e){return e&&e.ownerDocument||document}function we(e){var t=Fn(e);return t.defaultView||window}function An(e,t){t===void 0&&(t=166);var a;function o(){for(var n=this,s=arguments.length,i=new Array(s),r=0;r<s;r++)i[r]=arguments[r];var l=function(){e.apply(n,i)};clearTimeout(a),a=setTimeout(l,t)}return o.clear=function(){clearTimeout(a)},o}function qn(e,t){var a=t.getBoundingClientRect(),o=we(t),n;if(t.fakeTransform)n=t.fakeTransform;else{var s=o.getComputedStyle(t);n=s.getPropertyValue("-webkit-transform")||s.getPropertyValue("transform")}var i=0,r=0;if(n&&n!=="none"&&typeof n=="string"){var l=n.split("(")[1].split(")")[0].split(",");i=parseInt(l[4],10),r=parseInt(l[5],10)}switch(e){case"left":return"translateX("+(o.innerWidth+i-a.left)+"px)";case"right":return"translateX(-"+(a.left+a.width-i)+"px)";case"up":return"translateY("+(o.innerHeight+r-a.top)+"px)";default:return"translateY(-"+(a.top+a.height-r)+"px)"}}function It(e,t){if(t){var a=qn(e,t);a&&(t.style.webkitTransform=a,t.style.transform=a)}}var Oe=k.forwardRef(function(e,t){var a=e.children,o=e.direction,n=o===void 0?"down":o,s=e.in,i=e.style,r=e.timeout,l=r===void 0?0:r,c=e.onEnter,d=e.onEntered,v=e.onExit,m=e.onExited,p=xt(e,["children","direction","in","style","timeout","onEnter","onEntered","onExit","onExited"]),h=k.useRef(null),g=zt(a.ref,h),b=zt(g,t),x=function(I,_){It(n,I),Te(I),c&&c(I,_)},f=function(I){var _=(i==null?void 0:i.transitionTimingFunction)||Kt.easeOut,w=Nt({timeout:l,mode:"enter",style:O({},i,{transitionTimingFunction:_})});I.style.webkitTransition=dt("-webkit-transform",w),I.style.transition=dt("transform",w),I.style.webkitTransform="none",I.style.transform="none"},y=function(I){var _=(i==null?void 0:i.transitionTimingFunction)||Kt.sharp,w=Nt({timeout:l,mode:"exit",style:O({},i,{transitionTimingFunction:_})});I.style.webkitTransition=dt("-webkit-transform",w),I.style.transition=dt("transform",w),It(n,I),v&&v(I)},C=function(I){I.style.webkitTransition="",I.style.transition="",m&&m(I)},E=k.useCallback(function(){h.current&&It(n,h.current)},[n]);return k.useEffect(function(){if(!(s||n==="down"||n==="right")){var T=An(function(){h.current&&It(n,h.current)}),I=we(h.current);return I.addEventListener("resize",T),function(){T.clear(),I.removeEventListener("resize",T)}}},[n,s]),k.useEffect(function(){s||E()},[s,E]),k.createElement(Qt,Object.assign({appear:!0,nodeRef:h,onEnter:x,onEntered:d,onEntering:f,onExit:y,onExited:C,in:s,timeout:l},p),function(T,I){return k.cloneElement(a,O({ref:b,style:O({visibility:T==="exited"&&!s?"hidden":void 0},i,{},a.props.style)},I))})});Oe.displayName="Slide";var Ht=function(t){return S.createElement("svg",Object.assign({viewBox:"0 0 24 24",focusable:"false",style:{fontSize:20,marginInlineEnd:8,userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:"currentColor",flexShrink:0}},t))},zn=function(){return S.createElement(Ht,null,S.createElement("path",{d:`M12 2C6.5 2 2 6.5 2 12S6.5 22 12 22 22 17.5 22 12 17.5 2 12 2M10 17L5 12L6.41
        10.59L10 14.17L17.59 6.58L19 8L10 17Z`}))},Kn=function(){return S.createElement(Ht,null,S.createElement("path",{d:"M13,14H11V10H13M13,18H11V16H13M1,21H23L12,2L1,21Z"}))},Un=function(){return S.createElement(Ht,null,S.createElement("path",{d:`M12,2C17.53,2 22,6.47 22,12C22,17.53 17.53,22 12,22C6.47,22 2,17.53 2,12C2,
        6.47 6.47,2 12,2M15.59,7L12,10.59L8.41,7L7,8.41L10.59,12L7,15.59L8.41,17L12,
        13.41L15.59,17L17,15.59L13.41,12L17,8.41L15.59,7Z`}))},Xn=function(){return S.createElement(Ht,null,S.createElement("path",{d:`M13,9H11V7H13M13,17H11V11H13M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,
        0 22,12A10,10 0 0,0 12,2Z`}))},Yn={default:void 0,success:S.createElement(zn,null),warning:S.createElement(Kn,null),error:S.createElement(Un,null),info:S.createElement(Xn,null)},et={maxSnack:3,persist:!1,hideIconVariant:!1,disableWindowBlurListener:!1,variant:"default",autoHideDuration:5e3,iconVariant:Yn,anchorOrigin:{vertical:"bottom",horizontal:"left"},TransitionComponent:Oe,transitionDuration:{enter:225,exit:195}},Gn=function(t,a){var o=function(s){return typeof s=="number"||s===null};return o(t)?t:o(a)?a:et.autoHideDuration},Zn=function(t,a){var o=function(s,i){return i.some(function(r){return typeof s===r})};return o(t,["string","number"])?t:o(t,["object"])?O({},et.transitionDuration,{},o(a,["object"])&&a,{},t):o(a,["string","number"])?a:o(a,["object"])?O({},et.transitionDuration,{},a):et.transitionDuration},Qn=function(t,a){return function(o,n){return n===void 0&&(n=!1),n?O({},et[o],{},a[o],{},t[o]):o==="autoHideDuration"?Gn(t.autoHideDuration,a.autoHideDuration):o==="transitionDuration"?Zn(t.transitionDuration,a.transitionDuration):t[o]||a[o]||et[o]}};function Et(e){return Object.entries(e).reduce(function(t,a){var o,n=a[0],s=a[1];return O({},t,(o={},o[n]=Gt(s),o))},{})}var pt={SnackbarContainer:"notistack-SnackbarContainer",Snackbar:"notistack-Snackbar",CollapseWrapper:"notistack-CollapseWrapper",MuiContent:"notistack-MuiContent",MuiContentVariant:function(t){return"notistack-MuiContent-"+t}},re=Et({root:{height:0},entered:{height:"auto"}}),Mt="0px",$t=175,Se=k.forwardRef(function(e,t){var a=e.children,o=e.in,n=e.onExited,s=k.useRef(null),i=k.useRef(null),r=zt(t,i),l=function(){return s.current?s.current.clientHeight:0},c=function(g){g.style.height=Mt},d=function(g){var b=l(),x=Nt({timeout:$t,mode:"enter"}),f=x.duration,y=x.easing;g.style.transitionDuration=typeof f=="string"?f:f+"ms",g.style.height=b+"px",g.style.transitionTimingFunction=y||""},v=function(g){g.style.height="auto"},m=function(g){g.style.height=l()+"px"},p=function(g){Te(g);var b=Nt({timeout:$t,mode:"exit"}),x=b.duration,f=b.easing;g.style.transitionDuration=typeof x=="string"?x:x+"ms",g.style.height=Mt,g.style.transitionTimingFunction=f||""};return k.createElement(Qt,{in:o,unmountOnExit:!0,onEnter:c,onEntered:v,onEntering:d,onExit:m,onExited:n,onExiting:p,nodeRef:i,timeout:$t},function(h,g){return k.createElement("div",Object.assign({ref:r,className:nt(re.root,h==="entered"&&re.entered),style:O({pointerEvents:"all",overflow:"hidden",minHeight:Mt,transition:dt("height")},h==="entered"&&{overflow:"visible"},{},h==="exited"&&!o&&{visibility:"hidden"})},g),k.createElement("div",{ref:s,className:pt.CollapseWrapper,style:{display:"flex",width:"100%"}},a))})});Se.displayName="Collapse";var le={right:"left",left:"right",bottom:"up",top:"down"},Jn=function(t){return t.horizontal!=="center"?le[t.horizontal]:le[t.vertical]},ta=function(t){return"anchorOrigin"+Zt(t)},ea=function(t){t===void 0&&(t={});var a={containerRoot:!0,containerAnchorOriginTopCenter:!0,containerAnchorOriginBottomCenter:!0,containerAnchorOriginTopRight:!0,containerAnchorOriginBottomRight:!0,containerAnchorOriginTopLeft:!0,containerAnchorOriginBottomLeft:!0};return Object.keys(t).filter(function(o){return!a[o]}).reduce(function(o,n){var s;return O({},o,(s={},s[n]=t[n],s))},{})},na=function(){};function bt(e,t){return e.reduce(function(a,o){return o==null?a:function(){for(var s=arguments.length,i=new Array(s),r=0;r<s;r++)i[r]=arguments[r];var l=[].concat(i);t&&l.indexOf(t)===-1&&l.push(t),a.apply(this,l),o.apply(this,l)}},na)}var aa=typeof window<"u"?k.useLayoutEffect:k.useEffect;function ue(e){var t=k.useRef(e);return aa(function(){t.current=e}),k.useCallback(function(){return t.current.apply(void 0,arguments)},[])}var je=k.forwardRef(function(e,t){var a=e.children,o=e.className,n=e.autoHideDuration,s=e.disableWindowBlurListener,i=s===void 0?!1:s,r=e.onClose,l=e.id,c=e.open,d=e.SnackbarProps,v=d===void 0?{}:d,m=k.useRef(),p=ue(function(){r&&r.apply(void 0,arguments)}),h=ue(function(y){!r||y==null||(m.current&&clearTimeout(m.current),m.current=setTimeout(function(){p(null,"timeout",l)},y))});k.useEffect(function(){return c&&h(n),function(){m.current&&clearTimeout(m.current)}},[c,n,h]);var g=function(){m.current&&clearTimeout(m.current)},b=k.useCallback(function(){n!=null&&h(n*.5)},[n,h]),x=function(C){v.onMouseEnter&&v.onMouseEnter(C),g()},f=function(C){v.onMouseLeave&&v.onMouseLeave(C),b()};return k.useEffect(function(){if(!i&&c)return window.addEventListener("focus",b),window.addEventListener("blur",g),function(){window.removeEventListener("focus",b),window.removeEventListener("blur",g)}},[i,b,c]),k.createElement("div",Object.assign({ref:t},v,{className:nt(pt.Snackbar,o),onMouseEnter:x,onMouseLeave:f}),a)});je.displayName="Snackbar";var Rt,oa=Et({root:(Rt={display:"flex",flexWrap:"wrap",flexGrow:1},Rt[Z.upSm]={flexGrow:"initial",minWidth:"288px"},Rt)}),Ne=k.forwardRef(function(e,t){var a=e.className,o=xt(e,["className"]);return S.createElement("div",Object.assign({ref:t,className:nt(oa.root,a)},o))});Ne.displayName="SnackbarContent";var gt=Et({root:{backgroundColor:"#313131",fontSize:"0.875rem",lineHeight:1.43,letterSpacing:"0.01071em",color:"#fff",alignItems:"center",padding:"6px 16px",borderRadius:"4px",boxShadow:"0px 3px 5px -1px rgba(0,0,0,0.2),0px 6px 10px 0px rgba(0,0,0,0.14),0px 1px 18px 0px rgba(0,0,0,0.12)"},lessPadding:{paddingLeft:8*2.5+"px"},default:{backgroundColor:"#313131"},success:{backgroundColor:"#43a047"},error:{backgroundColor:"#d32f2f"},warning:{backgroundColor:"#ff9800"},info:{backgroundColor:"#2196f3"},message:{display:"flex",alignItems:"center",padding:"8px 0"},action:{display:"flex",alignItems:"center",marginLeft:"auto",paddingLeft:"16px",marginRight:"-8px"}}),ce="notistack-snackbar",De=k.forwardRef(function(e,t){var a=e.id,o=e.message,n=e.action,s=e.iconVariant,i=e.variant,r=e.hideIconVariant,l=e.style,c=e.className,d=s[i],v=n;return typeof v=="function"&&(v=v(a)),S.createElement(Ne,{ref:t,role:"alert","aria-describedby":ce,style:l,className:nt(pt.MuiContent,pt.MuiContentVariant(i),gt.root,gt[i],c,!r&&d&&gt.lessPadding)},S.createElement("div",{id:ce,className:gt.message},r?null:d,o),v&&S.createElement("div",{className:gt.action},v))});De.displayName="MaterialDesignContent";var sa=k.memo(De),ia=Et({wrappedRoot:{width:"100%",position:"relative",transform:"translateX(0)",top:0,right:0,bottom:0,left:0,minWidth:"288px"}}),ra=function(t){var a=k.useRef(),o=k.useState(!0),n=o[0],s=o[1],i=bt([t.snack.onClose,t.onClose]),r=function(){t.snack.requestClose&&i(null,"instructed",t.snack.id)},l=k.useCallback(function(){a.current=setTimeout(function(){s(function(w){return!w})},125)},[]);k.useEffect(function(){return function(){a.current&&clearTimeout(a.current)}},[]);var c=t.snack,d=t.classes,v=t.Component,m=v===void 0?sa:v,p=k.useMemo(function(){return ea(d)},[d]),h=c.open,g=c.SnackbarProps,b=c.TransitionComponent,x=c.TransitionProps,f=c.transitionDuration,y=c.disableWindowBlurListener,C=c.content,E=xt(c,["open","SnackbarProps","TransitionComponent","TransitionProps","transitionDuration","disableWindowBlurListener","content","entered","requestClose","onEnter","onEntered","onExit","onExited"]),T=O({direction:Jn(E.anchorOrigin),timeout:f},x),I=C;typeof I=="function"&&(I=I(E.id,E.message));var _=["onEnter","onEntered","onExit","onExited"].reduce(function(w,j){var B;return O({},w,(B={},B[j]=bt([t.snack[j],t[j]],E.id),B))},{});return S.createElement(Se,{in:n,onExited:_.onExited},S.createElement(je,{open:h,id:E.id,disableWindowBlurListener:y,autoHideDuration:E.autoHideDuration,className:nt(ia.wrappedRoot,p.root,p[ta(E.anchorOrigin)]),SnackbarProps:g,onClose:i},S.createElement(b,Object.assign({},T,{appear:!0,in:h,onExit:_.onExit,onExited:l,onEnter:_.onEnter,onEntered:bt([_.onEntered,r],E.id)}),I||S.createElement(m,Object.assign({},E)))))},yt,Pt,Tt,wt,Vt,V={view:{default:20},snackbar:{default:6,dense:2}},de="."+pt.CollapseWrapper,Wt=16,Ot=Et({root:(yt={boxSizing:"border-box",display:"flex",maxHeight:"100%",position:"fixed",zIndex:1400,height:"auto",width:"auto",transition:dt(["top","right","bottom","left","max-width"],{duration:300,easing:"ease"}),pointerEvents:"none"},yt[de]={padding:V.snackbar.default+"px 0px",transition:"padding 300ms ease 0ms"},yt.maxWidth="calc(100% - "+V.view.default*2+"px)",yt[Z.downXs]={width:"100%",maxWidth:"calc(100% - "+Wt*2+"px)"},yt),rootDense:(Pt={},Pt[de]={padding:V.snackbar.dense+"px 0px"},Pt),top:{top:V.view.default-V.snackbar.default+"px",flexDirection:"column"},bottom:{bottom:V.view.default-V.snackbar.default+"px",flexDirection:"column-reverse"},left:(Tt={left:V.view.default+"px"},Tt[Z.upSm]={alignItems:"flex-start"},Tt[Z.downXs]={left:Wt+"px"},Tt),right:(wt={right:V.view.default+"px"},wt[Z.upSm]={alignItems:"flex-end"},wt[Z.downXs]={right:Wt+"px"},wt),center:(Vt={left:"50%",transform:"translateX(-50%)"},Vt[Z.upSm]={alignItems:"center"},Vt)}),la=function(t){var a=t.classes,o=a===void 0?{}:a,n=t.anchorOrigin,s=t.dense,i=t.children,r=nt(pt.SnackbarContainer,Ot[n.vertical],Ot[n.horizontal],Ot.root,o.containerRoot,o["containerAnchorOrigin"+Zt(n)],s&&Ot.rootDense);return S.createElement("div",{className:r},i)},ua=k.memo(la),pe=function(t){var a=typeof t=="string"||k.isValidElement(t);return!a},K,ca=function(e){Ce(t,e);function t(o){var n;return n=e.call(this,o)||this,n.enqueueSnackbar=function(s,i){if(i===void 0&&(i={}),s==null)throw new Error("enqueueSnackbar called with invalid argument");var r=pe(s)?s:i,l=pe(s)?s.message:s,c=r.key,d=r.preventDuplicate,v=xt(r,["key","preventDuplicate"]),m=_t(c),p=m?c:new Date().getTime()+Math.random(),h=Qn(v,n.props),g=O({id:p},v,{message:l,open:!0,entered:!1,requestClose:!1,persist:h("persist"),action:h("action"),content:h("content"),variant:h("variant"),anchorOrigin:h("anchorOrigin"),disableWindowBlurListener:h("disableWindowBlurListener"),autoHideDuration:h("autoHideDuration"),hideIconVariant:h("hideIconVariant"),TransitionComponent:h("TransitionComponent"),transitionDuration:h("transitionDuration"),TransitionProps:h("TransitionProps",!0),iconVariant:h("iconVariant",!0),style:h("style",!0),SnackbarProps:h("SnackbarProps",!0),className:nt(n.props.className,v.className)});return g.persist&&(g.autoHideDuration=void 0),n.setState(function(b){if(d===void 0&&n.props.preventDuplicate||d){var x=function(E){return m?E.id===p:E.message===l},f=b.queue.findIndex(x)>-1,y=b.snacks.findIndex(x)>-1;if(f||y)return b}return n.handleDisplaySnack(O({},b,{queue:[].concat(b.queue,[g])}))}),p},n.handleDisplaySnack=function(s){var i=s.snacks;return i.length>=n.maxSnack?n.handleDismissOldest(s):n.processQueue(s)},n.processQueue=function(s){var i=s.queue,r=s.snacks;return i.length>0?O({},s,{snacks:[].concat(r,[i[0]]),queue:i.slice(1,i.length)}):s},n.handleDismissOldest=function(s){if(s.snacks.some(function(d){return!d.open||d.requestClose}))return s;var i=!1,r=!1,l=s.snacks.reduce(function(d,v){return d+(v.open&&v.persist?1:0)},0);l===n.maxSnack&&(r=!0);var c=s.snacks.map(function(d){return!i&&(!d.persist||r)?(i=!0,d.entered?(d.onClose&&d.onClose(null,"maxsnack",d.id),n.props.onClose&&n.props.onClose(null,"maxsnack",d.id),O({},d,{open:!1})):O({},d,{requestClose:!0})):O({},d)});return O({},s,{snacks:c})},n.handleEnteredSnack=function(s,i,r){if(!_t(r))throw new Error("handleEnteredSnack Cannot be called with undefined key");n.setState(function(l){var c=l.snacks;return{snacks:c.map(function(d){return d.id===r?O({},d,{entered:!0}):O({},d)})}})},n.handleCloseSnack=function(s,i,r){n.props.onClose&&n.props.onClose(s,i,r);var l=r===void 0;n.setState(function(c){var d=c.snacks,v=c.queue;return{snacks:d.map(function(m){return!l&&m.id!==r?O({},m):m.entered?O({},m,{open:!1}):O({},m,{requestClose:!0})}),queue:v.filter(function(m){return m.id!==r})}})},n.closeSnackbar=function(s){var i=n.state.snacks.find(function(r){return r.id===s});_t(s)&&i&&i.onClose&&i.onClose(null,"instructed",s),n.handleCloseSnack(null,"instructed",s)},n.handleExitedSnack=function(s,i){if(!_t(i))throw new Error("handleExitedSnack Cannot be called with undefined key");n.setState(function(r){var l=n.processQueue(O({},r,{snacks:r.snacks.filter(function(c){return c.id!==i})}));return l.queue.length===0?l:n.handleDismissOldest(l)})},K=n.enqueueSnackbar,n.closeSnackbar,n.state={snacks:[],queue:[],contextValue:{enqueueSnackbar:n.enqueueSnackbar.bind(ee(n)),closeSnackbar:n.closeSnackbar.bind(ee(n))}},n}var a=t.prototype;return a.render=function(){var n=this,s=this.state.contextValue,i=this.props,r=i.domRoot,l=i.children,c=i.dense,d=c===void 0?!1:c,v=i.Components,m=v===void 0?{}:v,p=i.classes,h=this.state.snacks.reduce(function(b,x){var f,y=Zt(x.anchorOrigin),C=b[y]||[];return O({},b,(f={},f[y]=[].concat(C,[x]),f))},{}),g=Object.keys(h).map(function(b){var x=h[b],f=x[0];return S.createElement(ua,{key:b,dense:d,anchorOrigin:f.anchorOrigin,classes:p},x.map(function(y){return S.createElement(ra,{key:y.id,snack:y,classes:p,Component:m[y.variant],onClose:n.handleCloseSnack,onEnter:n.props.onEnter,onExit:n.props.onExit,onExited:bt([n.handleExitedSnack,n.props.onExited],y.id),onEntered:bt([n.handleEnteredSnack,n.props.onEntered],y.id)})}))});return S.createElement(Ie.Provider,{value:s},l,r?Re.createPortal(g,r):g)},_e(t,[{key:"maxSnack",get:function(){return this.props.maxSnack||et.maxSnack}}]),t}(k.Component),da=function(){return k.useContext(Ie)};const He=(e,t)=>{const{setpointOffsets:a,setSetpointOffsets:o}=Yt.getState(),n=[...a[e]];o([...n,t],e)},Ut=e=>{const{setpointOffsets:t,setSetpointOffsets:a}=Yt.getState(),o=[...t[e]],n=o.shift();return a(o,e),n};function Be(){const e=k.useRef({x:0,y:0}),t=ye(f=>f.domNode),{getNodes:a,setNodes:o,getEdges:n,setEdges:s,screenToFlowPosition:i}=M(),[r,l]=k.useState([]),[c,d]=k.useState([]);k.useEffect(()=>{if(!t)return;const f=E=>E.preventDefault(),y=E=>{e.current={x:E.clientX,y:E.clientY}},C=["cut","copy","paste"];return C.forEach(E=>t.addEventListener(E,f)),t.addEventListener("mousemove",y),()=>{C.forEach(E=>t.removeEventListener(E,f)),t.removeEventListener("mousemove",y)}},[t]);const v=k.useCallback(()=>{const f=a().filter(E=>E.selected),C=ve(f,n()).filter(E=>{const T=!f.some(_=>_.id===E.source),I=!f.some(_=>_.id===E.target);return!T&&!I});return{selectedNodes:f,selectedEdges:C}},[a,n]),m=k.useCallback(()=>{const{selectedNodes:f,selectedEdges:y}=v();l(f),d(y)},[v]),p=f=>{const y=f.data;"setpointDataType"in y&&He(y.setpointDataType,y.setpointOffset)},h=k.useCallback(()=>{try{const{selectedNodes:f,selectedEdges:y}=v();f.forEach(p),l(f),d(y),o(C=>C.filter(E=>!E.selected)),s(C=>C.filter(E=>!y.includes(E)))}catch(f){K("Ошибка при вырезании",{variant:"error"}),console.error("Paste error:",f)}},[v,o,s]),g=(f,y,C,E)=>{const T=St(),I=y.x+(f.position.x-C),_=y.y+(f.position.y-E);if(!("setpointDataType"in f.data))return{...f,id:T,position:{x:I,y:_},data:{...f.data}};const w=Ut(f.data.setpointDataType);if(w===void 0)throw new Error("Ошибка при выделении памяти уставки");return{...f,id:T,position:{x:I,y:_},data:{...f.data,setpointOffset:w}}},b=f=>{try{const y=St(),C=f.positionAbsoluteX+20,E=(f.height??140)+10,T=f.positionAbsoluteY+E;let I;if(!("setpointDataType"in f.data)){I={...f,id:y,position:{x:C,y:T},data:{...f.data}},o(w=>[...w.map(j=>({...j,selected:!1})),I]);return}const _=Ut(f.data.setpointDataType);if(_===void 0)throw new Error("Ошибка при выделении памяти уставки");I={...f,id:y,position:{x:C,y:T},data:{...f.data,setpointOffset:_}},o(w=>[...w.map(j=>({...j,selected:!1})),I])}catch(y){K("Ошибка при копировании",{variant:"error"}),console.error("Paste error:",y)}},x=k.useCallback(async(f=i(e.current))=>{if(r.length)try{const y=Math.min(...r.map(_=>_.position.x)),C=Math.min(...r.map(_=>_.position.y)),E=await Promise.all(r.map(_=>g(_,f,y,C))),T=Object.fromEntries(r.map((_,w)=>[_.id,E[w].id])),I=c.map(_=>{var w,j;return{..._,id:St(),source:T[_.source],sourceHandle:`${T[_.source]} ${(w=_.sourceHandle)==null?void 0:w.split(" ")[1]}`,target:T[_.target],targetHandle:`${T[_.target]} ${(j=_.targetHandle)==null?void 0:j.split(" ")[1]}`}});o(_=>[..._.map(w=>({...w,selected:!1})),...E]),s(_=>[..._.map(w=>({...w,selected:!1})),...I])}catch(y){K("Ошибка при копировании",{variant:"error"}),console.error("Paste error:",y)}},[r,c,i,o,s]);return Ft(["Meta+x","Control+x"],h),Ft(["Meta+c","Control+c"],m),Ft(["Meta+v","Control+v"],x),{cut:h,copy:m,paste:x,bufferedNodes:r,bufferedEdges:c,createDublicate:b}}function Ft(e,t){const[a,o]=k.useState(!1),n=We(e);k.useEffect(()=>{n&&!a?(t(),o(!0)):!n&&a&&o(!1)},[n,a,t])}const pa=()=>{const{setNodes:e,setEdges:t}=M();return{handleDelete:(o,n)=>{"setpointOffset"in n&&n.setpointOffset!==void 0&&He(n.setpointDataType,n.setpointOffset),e(s=>s.filter(i=>i.id!==o)),t(s=>s.filter(i=>i.target!==o&&i.source!==o))}}},fa="_row_jc119_1",ha="_input_jc119_5",ga="_outputs_jc119_10",ya="_wraps_jc119_15",ma="_text_jc119_25",A={row:fa,input:ha,outputs:ga,wraps:ya,"handle-wrap":"_handle-wrap_jc119_21",text:ma},va="_handle_1fx0z_1",ba={handle:va},jt=({id:e,type:t,position:a,dataType:o})=>{const s=Fe().filter(i=>t==="target"&&i.targetHandle===`${e}`);return u.jsx(Ae,{type:t,position:a,id:`${e}`,style:{backgroundColor:o&&ct[o].clr,transform:a===F.Left?"translate(-100%, -50%)":a===F.Right?"translate(100%, -50%)":a===F.Top?"translate(-50%, -100%)":"translate(-50%, 100%)"},isConnectable:s.length<1,className:ba.handle})},fe={"handles-column":"_handles-column_qlz1z_1","handle-wrap":"_handle-wrap_qlz1z_6"},xa=({nodeId:e,inputHandles:t})=>u.jsx("div",{className:fe["handles-column"],children:Object.keys(t).map(a=>u.jsx("div",{className:fe["handle-wrap"],children:u.jsx(jt,{id:`${e} ${a}`,type:"target",position:F.Left,dataType:t[a].dataType})},a))}),Ea={analogInput:["updateName","updateSetpointValue","delete","dublicate"],analogInputInt:["updateName","updateSetpointValue","delete","dublicate"],discreteInput:["updateName","delete","dublicate"],discreteOutput:["updateName","delete","dublicate"],constInt:["updateSetpointValue","updateName","delete","dublicate"],fourierInt:["updateName","changeFourierGarmonics","delete","dublicate"],xor:["delete","dublicate"],and:["invert","delete","dublicate"],or:["invert","delete","dublicate"],nand:["invert","delete","dublicate"],nor:["invert","delete","dublicate"],multInt:["delete","dublicate"],divInt:["delete","dublicate"],sumInt:["delete","dublicate"],subInt:["delete","dublicate"],timerInt:["updateSetpointValue","updateName","delete","dublicate"],risEdgeTimerBool:["updateDigit","delete","dublicate"],equalsInt:["delete","dublicate"],lessInt:["delete","dublicate"],moreInt:["delete","dublicate"],fifoByte:["updateLengthMemory","delete","dublicate"],fifoByteWithoutEn:["updateLengthMemory","delete","dublicate"],fifoWord:["updateLengthMemory","delete","dublicate"],fifoWordWithoutEn:["updateLengthMemory","delete","dublicate"]},ka=e=>"setpointDataType"in e,_a={delete:{key:"deleteNode",label:"delete node",dependencies:["useDeleteNode"],createElement:({node:e,dependencies:t})=>{var i;const{id:a,data:o}=e,n=(i=t.useDeleteNode)==null?void 0:i.call(t);if(!n)return null;const{handleDelete:s}=n;return u.jsx(W,{text:"Удалить",onClick:()=>s(a,o)})}},dublicate:{key:"dublicate",label:"dublicate node",dependencies:["useCopyPaste"],createElement:({node:e,dependencies:t})=>{var n;const a=(n=t.useCopyPaste)==null?void 0:n.call(t);if(!a)return null;const{createDublicate:o}=a;return u.jsx(W,{text:"Дублировать",onClick:()=>o(e)})}},changeFourierGarmonics:{key:"invert",label:"Инвертировать",dependencies:["useUpdateFourierValue"],createElement:({node:e,dependencies:t})=>{const{data:a}=e;if(!("setpointDataType"in a))return;const{setpointOffset:o,outputHandles:n}=a;if(!(t!=null&&t.useUpdateFourierValue))return null;const{handleFourierGarmonicForOutput:s,inputsValue:i}=t==null?void 0:t.useUpdateFourierValue(o),r=Object.values(n).reduce((l,c,d)=>(d%2===0?l.push([c]):l[l.length-1].push(c),l),[]);return u.jsx("div",{onDoubleClick:l=>{l.stopPropagation()},className:"nodrag nopan nowheel",style:{display:"flex",gap:"10px",width:"max-content"},children:r.map((l,c)=>u.jsx(lt,{style:{width:"60px"},type:"number",min:0,value:i[c],onChange:d=>s(c,d.target.value)},c))})}},invert:{key:"invert",label:"Инвертировать",dependencies:["useInverseNode"],createElement:({node:e,dependencies:t})=>{var s;const{id:a,data:o}=e,n=(s=t.useInverseNode)==null?void 0:s.call(t,a,o.type);return u.jsx(W,{onClick:n,text:"Инвертировать",type:"button"})}},updateSetpointValue:{key:"updateSetpointValue",label:"Изменить значение",dependencies:["useUpdateSetpointValue"],createElement:({node:e,dependencies:t})=>{var l;const{data:a}=e;if(!ka(a))return null;const o=a.setpointOffset,n=a.setpointDataType;if(o==null)return null;const s=(l=t.useUpdateSetpointValue)==null?void 0:l.call(t,n,o);if(!s)return null;const{handleChange:i,inputValue:r}=s;return u.jsx("div",{className:"flex flex-col gap-2",children:u.jsx(lt,{type:"text",value:r,onChange:i,placeholder:"Введите значение"})})}},updateName:{key:"updateName",label:"Изменить значение",dependencies:["useUpdateNameValue"],createElement:({node:e,dependencies:t})=>{var r;const{id:a,data:o}=e,n=(r=t.useUpdateNameValue)==null?void 0:r.call(t,a,o);if(!n)return null;const{name:s,handleChangeName:i}=n;return u.jsx("div",{className:"flex flex-col gap-2",children:u.jsx(lt,{type:"text",value:s,onChange:i,placeholder:"Введите имя"})})}},updateDigit:{key:"updateDigit",label:"Изменить значение",dependencies:["useUpdateDigit"],createElement:({node:e,dependencies:t})=>{var r;const{id:a,data:o}=e,n=(r=t.useUpdateDigit)==null?void 0:r.call(t,a,o);if(!n)return null;const{digit:s,handleChangeDigit:i}=n;return u.jsx("div",{className:"nodrag nopan nowheel",onDoubleClick:l=>{l.stopPropagation()},children:u.jsx(lt,{type:"number",min:0,max:6e3,value:s,onChange:i,placeholder:"Введите значение"})})}},updateLengthMemory:{key:"updateLengthMemory",label:"Изменить значение",dependencies:["useChangeLengthMemory"],createElement:({node:e,dependencies:t})=>{var r;const{id:a,data:o}=e,n=(r=t.useChangeLengthMemory)==null?void 0:r.call(t,a,o);if(!n)return null;const{lengthMemory:s,handleChangeLengthMemory:i}=n;return u.jsx("div",{className:"nodrag nopan nowheel",onDoubleClick:l=>{l.stopPropagation()},children:u.jsx(lt,{type:"number",min:1,value:s,onChange:i,placeholder:"Введите глубину"})})}}},Ca=e=>Object.values({0:"1",1:"2",2:"3",3:"4",4:"5",5:"6",6:"7",7:"8"}).slice(0,e).reduce((a,o)=>(a[o]=void 0,a),{}),Ia=e=>{const{updateNodeData:t,getEdges:a,setEdges:o,getNode:n}=M(),s=Xt(),i=[...new Array(10)].reduce((l,c,d)=>(l.push({value:d+1}),l),[]);return{changeHandles:k.useCallback(l=>{t(e,{inputHandlesCount:l}),s(e);const c=a(),d=Object.keys(Ca(+l)).map(m=>`${e} ${m}`),v=c.filter(m=>m.target!==e||m.targetHandle&&d.includes(m.targetHandle));o(v)},[e,t,s,a,o,n]),items:i}},Ta={or:"nor",and:"nand",nor:"or",nand:"and"},wa=(e,t)=>{const{updateNodeData:a}=M();return k.useCallback(()=>{a(e,{type:Ta[t]})},[e,t,a])},Oa=(e,t)=>{const{updateNodeData:a}=M(),o=n=>{const s=n.target.value;a(e,{name:s})};return{name:t.name,handleChangeName:o}},Sa=(e,t)=>{if(!("lengthMemory"in t))return null;const{updateNodeData:a}=M(),o=n=>{const s=n.target.value;a(e,{lengthMemory:+s})};return{lengthMemory:t.lengthMemory,handleChangeLengthMemory:o}},ja=(e,t)=>{const{updateNodeData:a}=M();if(!("digit"in t))return;const o=n=>{const s=Number(n.target.value);s&&a(e,{digit:s})};return{digit:t.digit,handleChangeDigit:o}},Na=e=>{var n;const{type:t}=e.data,a={useChangeHandles:Ia,useInverseNode:wa,useUpdateSetpointValue:un,useUpdateNameValue:Oa,useDeleteNode:pa,useUpdateFourierValue:ln,useCopyPaste:Be,useChangeLengthMemory:Sa,useUpdateDigit:ja};return{actions:(n=Ea[t])==null?void 0:n.map(s=>{const i=_a[s];if(!i)return null;const r=i.dependencies.reduce((l,c)=>(c in a&&(l[c]=a[c]),l),{});return{key:i.key,label:i.label,element:i.createElement({node:e,dependencies:r})}})}},he={"context-menu-block":"_context-menu-block_jgkkt_1","menu-item":"_menu-item_jgkkt_8"},Da=k.memo(({actions:e,visible:t,setVisible:a})=>{const o=k.useRef(null);return k.useEffect(()=>{const n=s=>{o.current&&!o.current.contains(s.target)&&a(!1)};return document.addEventListener("click",n),()=>document.removeEventListener("click",n)},[]),u.jsx(qe,{isVisible:t,children:u.jsx("div",{ref:o,className:he["context-menu-block"],children:e.map((n,s)=>u.jsx("div",{className:he["menu-item"],children:n.element},s))})})}),D=({node:e,children:t})=>{const[a,o]=k.useState(!1),{actions:n}=Na(e);return u.jsxs("div",{style:{position:"relative"},onDoubleClick:()=>o(s=>!s),children:[t,u.jsx(Da,{actions:n,visible:a,setVisible:o})]})},Ha="_inc_g2mnq_1",Ba="_dec_g2mnq_5",La="_disabled_g2mnq_24",mt={"inc-dec":"_inc-dec_g2mnq_1",inc:Ha,dec:Ba,disabled:La},q=({node:e,children:t})=>{const{id:a,data:o}=e,{updateNodeData:n,setEdges:s}=M(),i=Xt(),r=o.inputHandles||{},l=Object.keys(r),c=r[l[0]].dataType,d={min:2,max:10},v=()=>{const g=l.length;if(g>=d.max)return;const b=`input-${g+1}`,x={...r,[b]:{dataType:c}};n(a,{inputHandles:x}),i(a)},m=()=>{if(l.length<=d.min)return;const x=Object.keys(r).filter(C=>C.startsWith("input-")).sort((C,E)=>{const T=parseInt(C.replace("input-",""),10);return parseInt(E.replace("input-",""),10)-T})[0],{[x]:f,...y}=r;s(C=>C.filter(E=>E.targetHandle!==`${a} ${x}`)),n(a,{inputHandles:y}),i(a)},p=l.length>=d.max,h=l.length<=d.min;return u.jsxs("div",{className:mt["inc-dec"],children:[u.jsx("button",{className:U(mt.inc,"nodrag",{[mt.disabled]:p}),onClick:v,disabled:p,children:"+"}),t,u.jsx("button",{className:U(mt.dec,"nodrag",{[mt.disabled]:h}),onClick:m,disabled:h,children:"—"})]})},Ma="_btn_lk57l_5",$a="_inc_lk57l_1",Ra="_disabled_lk57l_21",Pa="_dec_lk57l_24",z={"inc-dec":"_inc-dec_lk57l_1","btns-row":"_btns-row_lk57l_5",btn:Ma,inc:$a,disabled:Ra,dec:Pa},Va=e=>{const{offsetsByTypes:t,setOffsets:a}=cn.getState(),o=[...t[e]],n=o.shift();return a(o,e),n},Wa=({node:e,children:t})=>{const{id:a,data:o}=e,{updateNodeData:n,setEdges:s}=M(),i=o.outputHandles||{},r=Object.keys(i),l={min:2,max:6},c=Xt(),d=()=>{const h=r.length,g=l.max-h,b=Math.min(2,g);if(b>0){const x={...i};for(let f=1;f<=b;f++){if(!Va("int")){K("Не удалсоь выделить смещение типа int",{variant:"error"});return}const C=`out-${h+f}`;x[C]={dataType:"int"}}n(a,{outputHandles:x}),c(a)}},v=()=>{const g=r.length-l.min,b=Math.min(2,g);if(b>0){const x={...i},f=Object.keys(x).filter(y=>y.startsWith("out-")).sort((y,C)=>{const E=parseInt(y.replace("out-",""),10);return parseInt(C.replace("out-",""),10)-E});for(let y=0;y<b;y++){const C=f[y];s(E=>E.filter(T=>T.sourceHandle!==`${a} ${C}`)),delete x[C]}n(a,{outputHandles:x}),c(a)}},m=r.length>=l.max,p=r.length<=l.min;return u.jsxs("div",{className:z["inc-dec"],children:[t,u.jsxs("div",{className:z["btns-row"],children:[u.jsx("button",{className:U(z.btn,z.inc,"nodrag",{[z.disabled]:m}),onClick:d,disabled:m,children:"+"}),u.jsx("button",{className:U(z.btn,z.dec,"nodrag",{[z.disabled]:p}),onClick:v,disabled:p,children:"—"})]})]})},Fa={analogInput:[D],analogInputInt:[D],discreteInput:[D],discreteOutput:[D],fourierInt:[D,Wa],constInt:[D],xor:[D,q],and:[D,q],or:[D,q],nand:[D,q],nor:[D,q],multInt:[D,q],divInt:[D,q],sumInt:[D,q],subInt:[D],timerInt:[D],risEdgeTimerBool:[D],equalsInt:[D],lessInt:[D],moreInt:[D],fifoByte:[D],fifoByteWithoutEn:[D],fifoWord:[D],fifoWordWithoutEn:[D]},Aa=(e,t)=>(Fa[e.data.type]||[]).reduce((o,n,s)=>u.jsx(n,{node:e,children:o},`feature-${s}`),t),qa=k.memo(e=>{const{type:t,inputHandles:a,outputHandles:o}=e.data,n=ze[t];if(!n)return null;const{view:s,...i}=n,r=u.jsxs("div",{className:A.row,children:[!!Object.keys(a).length&&u.jsx(xa,{nodeId:e.id,inputHandles:a}),u.jsx(s,{...i}),!!Object.keys(o).length&&Object.keys(o).map(d=>u.jsx(jt,{id:`${e.id} ${d}`,type:"source",position:F.Right,dataType:o[d].dataType},d))]}),c=t!=="fourierInt"?r:(()=>{const d=Object.keys(a).length,v=Object.keys(a)[0];return u.jsxs("div",{className:A.row,children:[!!d&&u.jsx("div",{className:A.input,children:u.jsx(jt,{id:`${e.id} ${v}`,type:"target",position:F.Left,dataType:a[v].dataType},v)}),u.jsx(s,{...i}),!!Object.keys(o).length&&u.jsx("div",{className:A.outputs,children:Array.from({length:Math.ceil(Object.keys(o).length/2)},(m,p)=>Object.keys(o).slice(p*2,p*2+2)).map((m,p)=>u.jsx("div",{className:A.wraps,children:m.map((h,g)=>u.jsxs("div",{className:A["handle-wrap"],children:[g===0?u.jsx("div",{className:A.text,children:"Amp"}):u.jsx("div",{className:A.text,children:"Ph"}),u.jsx(jt,{id:`${e.id} ${h}`,type:"source",position:F.Right,dataType:o[h].dataType},`${p}-${g}`)]},h))},p))})]})})();return Aa(e,c)}),za={account:"paid-pro",hideAttribution:!0};Ke.SmoothStep;const Ka={node:qa},Ua={"custom-edge":Bn},Xa=({fromX:e,fromY:t,toX:a,toY:o,fromPosition:n,fromHandle:s,toPosition:i,fromNode:r})=>{var d,v,m,p;const[l]=me({sourceX:e,sourceY:t,targetX:a,targetY:o,offset:16,sourcePosition:n,targetPosition:i});if(!r||!s||!s.id)return null;const c=((v=r.data.outputHandles[(d=s.id)==null?void 0:d.split(" ")[1]])==null?void 0:v.dataType)||((p=r.data.inputHandles[(m=s.id)==null?void 0:m.split(" ")[1]])==null?void 0:p.dataType);return c?u.jsx("g",{children:u.jsx("path",{fill:"none",stroke:ct[c].clr,strokeWidth:2,d:l})}):null},Ya="_panel__item_15twb_8",Ga="_name_15twb_21",At={"sidebar-item-drag-image":"_sidebar-item-drag-image_15twb_1",panel__item:Ya,name:Ga},Za=({viewData:e,type:t})=>{const a=k.useRef(null),{view:o,name:n,...s}=e,i=r=>{var l;(l=r.dataTransfer)==null||l.setData("application/reactflow",t),a.current&&r.dataTransfer.setDragImage(a.current,0,0)};return u.jsxs("div",{className:At.panel__item,draggable:!0,onDragStart:i,children:[u.jsx(o,{...e}),u.jsx("div",{className:At.name,children:n}),u.jsx("div",{className:At["sidebar-item-drag-image"],ref:a,children:u.jsx(o,{...s})})]})},Qa="_elements_1elrn_1",Ja={elements:Qa},G=({views:e})=>u.jsx("div",{className:Ja.elements,children:Object.entries(e).map(t=>u.jsx(Za,{viewData:t[1],type:t[0]},t[0]))}),to=()=>u.jsx("div",{children:u.jsxs(En,{text:"Библиотека",position:"right",children:[u.jsx(Y,{name:"Входы и выходы",children:u.jsx(G,{views:{...Xe,...Ue}})}),u.jsx(Y,{name:"Логические элементы",children:u.jsx(G,{views:Ye})}),u.jsx(Y,{name:"Алгебраические операции",children:u.jsx(G,{views:Ge})}),u.jsx(Y,{name:"Операции сравнения",children:u.jsx(G,{views:Ze})}),u.jsx(Y,{name:"Выдержки времени",children:u.jsx(G,{views:Qe})}),u.jsx(Y,{name:"Фурье",children:u.jsx(G,{views:Je})}),u.jsx(Y,{name:"Fifo",children:u.jsx(G,{views:tn})})]})});function eo(e){return e.map(t=>{const a="digit"in t?[t.inType,t.instructionOffset,...t.resultOffsets,...t.sourcesOffsets,t.digit,t.workingSpace]:"lengthMemory"in t?[t.inType,t.instructionOffset,t.ptrBegin,t.lengthMemory,...t.resultOffsets,...t.sourcesOffsets,t.workingSpace]:"instructionOffset"in t?[t.inType,t.instructionOffset,...t.resultOffsets,...t.sourcesOffsets]:[t.inType,...t.sourcesOffsets,...t.resultOffsets];for(;a.length<10;)a.push(0);return a})}function no({scripts:e,instructions:t,setpoints:a,indications:o,inputMatrixData:n,offsetsOsc:s,sms:i,smsWeb:r,phoneNumber:l}){const c=eo(e),d=Object.values(o).map(({led1:p,led2:h,led3:g,blOn:b,blOff:x,sms:f,smsWeb:y})=>[p,h,g,b,x,f,y]),v=Object.values(n).map(({I:p,U:h,HRM3:g})=>[p,h,g]);let m=[];return Object.entries(s).forEach(p=>{m.push({length:p[1].lengthMemory,offset:Number(p[0])})}),{scripts:c,functions:t,setpoints:a,outputMatrix:d,inputMatrix:v,sms:i,smsWeb:r,phoneNumber:l,offsetsOsc:m}}const ao=(e,t,a)=>{if(!t.length)return{newPrimitiveData:{lengthInBytes:e.lengthInBytes,offset:1},newOffset:1,lastLength:e.lengthInBytes};const o=t.slice(-1)[0]+a,n={lengthInBytes:e.lengthInBytes,offset:o};return{newOffset:o,newPrimitiveData:n,lastLength:e.lengthInBytes}},oo=()=>({lastLength:0,instructions:[],offsets:[],primitivesData:{}}),ut={bool:1,int:4,float:4,analog:160},so=(e,t,a)=>{var s;const o=e.data.type;if(be(J).includes(o)&&!((s=a.primitivesData[o])!=null&&s[t])){const i=J[o];if(i&&i[t]){a.instructions.push(...i[t].instruction);const{newOffset:r,newPrimitiveData:l,lastLength:c}=ao(J[o][t],a.offsets,a.lastLength);a.primitivesData[o]={...a.primitivesData[o],[t]:l},a.offsets.push(r),a.lastLength=c}}},io=(e,t)=>{try{const a=Object.keys(t.data.inputHandles);if(a.length===0)return!0;for(const o of a)if(!e.find(s=>s.targetHandle===`${t.id} ${o}`))throw new Error(`Не найдено исходное смещение для handle ${o} узла ${t.id}`)}catch(a){throw new Error(`Ошибка при создании scriptItem для узла ${t.id}: ${a instanceof Error?a.message:String(a)}`)}},ro=(e,t,a,o,n,s,i,r)=>{var l,c,d,v,m,p,h,g,b,x,f,y,C,E;try{const{initOscillographicOffsets:T,checkOffset:I}=xe.getState(),_=e.data.type,w=Object.keys(e.data.inputHandles).length;let j;_.includes("Output")?j=[i.get(e.id)]:(j=Object.entries(e.data.outputHandles).map(([N])=>s.get(`${e.id} ${N}`)),Object.entries(e.data.outputHandles).forEach(([N,H])=>{const L=s.get(`${e.id} ${N}`);if(L===void 0)throw new Error(`Не найдено смещение в мапе для handle ${N} узла ${e.id}`);H.oscillography?T(L,H.name??"",ut[H.dataType],H.dataType,H.dataType==="bool"?"line":"block"):I(L)}));let B=Object.keys(e.data.inputHandles).reduce((N,H)=>{var $;const L=($=t.find(at=>`${e.id} ${H}`===at.targetHandle))==null?void 0:$.sourceHandle;if(!L)throw new Error(`Не найдено исходный handle для handle ${H} узла ${e.id}`);const R=s.get(L);if(R===void 0)throw new Error(`Не найдено исходный узел для handle ${H} узла ${e.id}`);return N.push(R),N},[]);if(e.data.type.includes("analogInput")&&(console.log(e.data.type),B=[r.analog.splice(0,ut.analog/2)[0]]),"setpointDataType"in e.data&&B.unshift(e.data.setpointOffset),_==="fourierInt")return{inType:(c=(l=J[_])==null?void 0:l[w])==null?void 0:c.in_type,sourcesOffsets:B,resultOffsets:j};if("digit"in e.data)return{inType:(v=(d=J[_])==null?void 0:d[w])==null?void 0:v.in_type,instructionOffset:(p=(m=a.primitivesData[_])==null?void 0:m[w])==null?void 0:p.offset,resultOffsets:j,sourcesOffsets:B,digit:e.data.digit,workingSpace:o.int.splice(0,ut.int)[0]};if("lengthMemory"in e.data){const N=Object.values(e.data.outputHandles)[0].dataType,H=e.data.lengthMemory,L=o[N].splice(0,H*ut[N])[0],R=o.int.splice(0,ut.int)[0];return{inType:(g=(h=J[_])==null?void 0:h[w])==null?void 0:g.in_type,instructionOffset:(x=(b=a.primitivesData[_])==null?void 0:b[w])==null?void 0:x.offset,ptrBegin:L,lengthMemory:H,resultOffsets:j,sourcesOffsets:B,workingSpace:R}}return{inType:(y=(f=J[_])==null?void 0:f[w])==null?void 0:y.in_type,instructionOffset:(E=(C=a.primitivesData[_])==null?void 0:C[w])==null?void 0:E.offset,resultOffsets:j,sourcesOffsets:B}}catch(T){throw new Error(`Ошибка при создании scriptItem для узла ${e.id}: ${T instanceof Error?T.message:String(T)}`)}};function Le(e,t,a,o,n,s,i,r,l,c,d){if(t.has(e.id))return;t.add(e.id),e.data.type!=="fourierInt"&&so(e,Object.keys(e.data.inputHandles).length,o);const v=ve([e],d),{targets:m}=v.reduce((g,b)=>(b.source===e.id&&g.sources.push(b),b.target===e.id&&g.targets.push(b),g),{sources:[],targets:[]});io(m,e);const p=en(e,c,d),h=ro(e,m,o,n,i,s,r,l);p.forEach(g=>Le(g,t,a,o,n,s,i,r,l,c,d)),a.push(h)}const lo=(e,t,a)=>{const o=new Map,n=new Map;return e.forEach(s=>{if(s.data.type.toLocaleLowerCase().includes("out")){const r=Object.values(s.data.inputHandles)[0].dataType,l=a[r].shift();n.set(s.id,l)}Object.entries(s.data.outputHandles).forEach(([r,l])=>{const c=Object.values(s.data.outputHandles)[0].dataType,d=t[c].splice(0,ut[c])[0];o.set(`${s.id} ${r}`,d)})}),{handleOffsetsMap:o,outputOffsetsMap:n}},vt=["bool","int","float","analog"],qt=(e,t)=>t===1?e:Math.ceil(e/4)*4,uo=(e,t)=>{const a=[];for(let o=e;o<e+t;o++)a.push(o);return a},co=(e,t,a,o)=>e<=o&&a<=t,po=(e,t)=>e.map(a=>a+t),rt=(e,t,a,o={bool:1,int:4,float:4,analog:160})=>{const n=o[e],s=vt.indexOf(e),i=c=>t[c].length?t[c][t[c].length-1]:null;let r=t[e].length?t[e][t[e].length-1]+1:0;if(t[e].length===0){for(let c=0;c<s;c++){const d=vt[c],v=i(d);v!==null&&(r=Math.max(r,qt(v+1,n)))}r=qt(r,n)}t[e].push(...uo(r,a??n));const l=c=>{const d=vt[c],v=t[d];if(!v.length)return;const m=v[0],p=v[v.length-1];for(let h=c+1;h<vt.length;h++){const g=vt[h],b=t[g];if(!b.length)continue;const x=b[0],f=b[b.length-1];if(co(m,p,x,f)){const y=o[g],E=qt(p+1,y)-x;t[g]=po(b,E),l(h);return}}};l(s)},fo={bool:1,int:4,float:4,analog:160};function ho(e,t=512){const o=new TextEncoder().encode(e),n=[];let s=0;for(;s<o.length;){const i=o.slice(s,s+t),r=new TextDecoder().decode(i);n.push(r),s+=t}return n}const go=()=>{const[e,t]=Dt(p=>[p.nodes,p.edges],tt),a=dn(p=>p.sendConfig),{setpointsValues:o}=Yt(p=>({setpointsValues:p.setpointsValues})),[n,s,i,r]=pn(p=>[p.indications,p.smsText,p.smsWebText,p.phoneNumber],tt),l=fn(p=>p.datas,tt),c=()=>{const p={bool:[],int:[],float:[],analog:[]},h={bool:[],int:[],float:[],analog:[]},g={bool:[],int:[],float:[],analog:[]},b={bool:[],int:[],float:[],analog:[]};return e.forEach(x=>{Object.values(x.data.outputHandles).forEach(f=>{if(rt(f.dataType,p),x.data.type.toLocaleLowerCase().includes("fifo")&&"lengthMemory"in x.data){const y=x.data.lengthMemory,C=Object.values(x.data.outputHandles)[0].dataType,E=y*fo[C];rt(f.dataType,p,E),rt("int",p)}}),x.data.type==="risEdgeTimerBool"&&rt("int",p),x.data.type.includes("analogInput")&&rt("analog",b,void 0,{bool:1,int:4,float:4,analog:80}),x.data.type.toLocaleLowerCase().includes("output")&&rt(x.data.inputHandles.input.dataType,g)}),{offsets:{bool:[...p.bool],int:[...p.int],float:[...p.float],analog:[...p.analog]},setpointOffsets:{bool:[...h.bool],int:[...h.int],float:[...h.float],analog:[...h.analog]},outputOffsetsStore:{bool:[...g.bool],int:[...g.int],float:[...g.float],analog:[...g.analog]},analogInputsOffsets:{bool:[...b.bool],int:[...b.int],float:[...b.float],analog:[...b.analog]}}},d=(p,h,g,b)=>{const x=[],f=new Set,y=oo(),C=e.filter(I=>{var _;return(_=I.data)==null?void 0:_.type.toLowerCase().includes("output")});if(!C.length)throw new Error("Нет выходных элементов");const{handleOffsetsMap:E,outputOffsetsMap:T}=lo(e,p,g);return C.forEach(I=>Le(I,f,x,y,p,E,h,T,b,e,t)),{scripts:x,instructions:y.instructions}};return{calculateConfig:async()=>{try{const{setConfig:p}=Jt.getState(),{offsets:h,setpointOffsets:g,outputOffsetsStore:b,analogInputsOffsets:x}=c(),{scripts:f,instructions:y}=d(h,g,b,x),{oscillographicOffsets:C}=xe.getState(),E=no({scripts:f,instructions:y,setpoints:o,indications:n,inputMatrixData:l,offsetsOsc:C,sms:s,smsWeb:i,phoneNumber:r});console.log(E),p({...E})}catch(p){throw K(p instanceof Error?p.message:"Ошибка сохранения",{variant:"error"}),p}},sendResConfig:()=>{const{config:p}=Jt.getState();ho(JSON.stringify(p),512).forEach((g,b)=>{console.log(g),setTimeout(()=>a(g),b*1e3)})}}},yo=[{type:"analogInput",position:{x:0,y:0}},{type:"analogInput",position:{x:0,y:60}},{type:"analogInput",position:{x:0,y:120}},{type:"discreteOutput",position:{x:1500,y:0}},{type:"discreteOutput",position:{x:1500,y:60}},{type:"discreteOutput",position:{x:1500,y:120}},{type:"discreteOutput",position:{x:1500,y:180}},{type:"discreteOutput",position:{x:1500,y:240}}],mo=[{type:"analogInput",position:{x:0,y:0}},{type:"analogInput",position:{x:0,y:60}},{type:"analogInput",position:{x:0,y:120}},{type:"analogInput",position:{x:0,y:180}},{type:"analogInput",position:{x:0,y:240}},{type:"analogInput",position:{x:0,y:300}},{type:"discreteInput",position:{x:0,y:360}},{type:"discreteInput",position:{x:0,y:420}},{type:"discreteInput",position:{x:0,y:480}},{type:"discreteInput",position:{x:0,y:540}},{type:"discreteInput",position:{x:0,y:600}},{type:"discreteInput",position:{x:0,y:660}},{type:"discreteOutput",position:{x:1500,y:0}},{type:"discreteOutput",position:{x:1500,y:60}},{type:"discreteOutput",position:{x:1500,y:120}},{type:"discreteOutput",position:{x:1500,y:180}},{type:"discreteOutput",position:{x:1500,y:240}}],vo=[{type:"analogInput",position:{x:0,y:0}},{type:"fifoWordWithoutEn",position:{x:530,y:-150}},{type:"fourierInt",position:{x:360,y:-5}},{type:"subInt",position:{x:750,y:-60}},{type:"constInt",position:{x:550,y:250}},{type:"constInt",position:{x:550,y:350}},{type:"moreInt",position:{x:970,y:-100}},{type:"lessInt",position:{x:970,y:100}},{type:"or",position:{x:1180,y:-50}},{type:"discreteOutput",position:{x:1400,y:0}}],ge={ikz:yo,rza:mo,template1:vo},bo=e=>{const t={type:e.type,inputHandles:e.inputHandles,outputHandles:e.outputHandles,...e.name&&{name:e.name}};if("lengthMemory"in e)return{...t,lengthMemory:e.lengthMemory};if("digit"in e)return{...t,digit:e.digit};if("setpointDataType"in e){const a=Ut(e.setpointDataType);return a===void 0?null:{...t,setpointDataType:e.setpointDataType,setpointOffset:a}}return t},Me=(e,t)=>{const a=Dn[e];if(!a)return K(`Неизвестный тип узла: ${e}`,{variant:"error"}),null;const o=bo(a);return o?{id:St(),type:"node",position:t,data:{...o}}:(K("Не удалось выделить память",{variant:"error"}),null)},xo=()=>{const e=Dt(n=>n.addNode,tt),{screenToFlowPosition:t}=M();return{onDragOver:k.useCallback(n=>{n.preventDefault(),n.dataTransfer.dropEffect="move"},[]),onDrop:n=>{n.preventDefault();const s=n.dataTransfer.getData("application/reactflow"),i=t({x:n.clientX,y:n.clientY}),r=Me(s,i);r&&e(r)}}},Eo=()=>{const[e,t]=Dt(n=>[n.nodes,n.setNodes],tt);return{templatesKeys:be(ge),addNodeByTemplate:n=>{const i=ge[n].reduce((r,l)=>{const c=Me(l.type,l.position);return c&&r.push(c),r},[]);t([...e,...i])}}},ko=({})=>{const[e,t]=k.useState(""),{templatesKeys:a,addNodeByTemplate:o}=Eo(),n={ikz:"ИКЗ",rza:"РЗА",template1:"Шаблон икз2"};return u.jsx("div",{children:u.jsx(hn,{value:e,placeholder:"шаблоны",options:a.map(s=>({value:s,label:n[s]})),onChange:s=>{o(s),t(s)}})})},_o=({nodes:e})=>{const{calculateConfig:t,sendResConfig:a}=go(),{cut:o,copy:n,paste:s,bufferedNodes:i}=Be(),r=e.some(({selected:c})=>c),l=i.length>0;return u.jsxs(u.Fragment,{children:[u.jsx(Lt,{position:"top-left",children:u.jsx(ko,{})}),u.jsxs(Lt,{position:"top-center",style:{display:"flex",gap:"10px"},children:[u.jsx(W,{text:"cut",type:"button",onClick:()=>o(),disabled:!r}),u.jsx(W,{text:"copy",type:"button",onClick:()=>n(),disabled:!r}),u.jsx(W,{text:"paste",type:"button",onClick:()=>s(),disabled:!l}),u.jsx(W,{text:"Рассчитать",type:"button",onClick:()=>t()}),u.jsx(W,{text:"Отправить",type:"button",onClick:()=>a()})]}),u.jsx(Lt,{position:"top-right",children:u.jsx(to,{})})]})},Co=()=>{const{nodes:e,edges:t,onNodesChange:a,onEdgesChange:o,addEdge:n}=Dt(Nn,tt),{onDragOver:s,onDrop:i}=xo(),{getNodes:r,getEdges:l}=M(),{enqueueSnackbar:c}=da();return{nodes:e,edges:t,onNodesChange:a,onEdgesChange:o,addEdge:n,onDragOver:s,onDrop:i,isValidConnection:m=>{var _,w,j,B;const p=r(),h=l(),g=m.source??"",b=m.target??"",x=m.sourceHandle,f=m.targetHandle,y=p.find(N=>N.id===g),C=p.find(N=>N.id===b);if(!y||!C||!x||!f)return!1;const E=((_=y.data.outputHandles[x==null?void 0:x.split(" ")[1]])==null?void 0:_.dataType)||((w=y.data.inputHandles[x==null?void 0:x.split(" ")[1]])==null?void 0:w.dataType),T=((j=C.data.inputHandles[f==null?void 0:f.split(" ")[1]])==null?void 0:j.dataType)||((B=C.data.outputHandles[f==null?void 0:f.split(" ")[1]])==null?void 0:B.dataType);if(E!==T)return!1;const I=(N,H=new Set)=>{if(H.has(N.id))return!1;H.add(N.id);for(const L of nn(N,p,h))if(L.id===g||I(L,H))return!0;return!1};return g===b?!1:!I(C)},onConnectEnd:(m,p)=>{var j,B,N,H,L,R,$,at;const{fromNode:h,fromHandle:g,toNode:b,toHandle:x,isValid:f}=p,y=Bt=>Bt==null?void 0:Bt.data;if(!h||!b||!(g!=null&&g.id)||!(x!=null&&x.id))return;const C=g.id.split(" ")[1],E=x.id.split(" ")[1],T=y(h),I=y(b),_=((B=(j=T.outputHandles)==null?void 0:j[C])==null?void 0:B.dataType)??((H=(N=T.inputHandles)==null?void 0:N[C])==null?void 0:H.dataType),w=((R=(L=I.inputHandles)==null?void 0:L[E])==null?void 0:R.dataType)??((at=($=I.outputHandles)==null?void 0:$[E])==null?void 0:at.dataType);_!==w&&f===!1&&c("Нерроектное соединение",{variant:"error"})}}},Io=()=>{const{nodes:e,edges:t,onNodesChange:a,onEdgesChange:o,onDragOver:n,onDrop:s,isValidConnection:i,onConnectEnd:r,addEdge:l}=Co();return u.jsx("div",{className:jn["graph-editor"],children:u.jsxs(on,{deleteKeyCode:null,proOptions:za,nodeTypes:Ka,edgeTypes:Ua,nodes:e,edges:t,onNodesChange:a,onEdgesChange:o,onConnect:l,onDragOver:n,onDrop:s,connectionLineComponent:Xa,isValidConnection:i,onConnectEnd:r,fitView:!0,children:[u.jsx(_o,{nodes:e}),u.jsx(sn,{}),u.jsx(rn,{})]})})},To=()=>u.jsx(an,{children:u.jsx(ca,{maxSnack:3,children:u.jsx(Io,{})})}),Wo=()=>u.jsx(To,{});export{Wo as default};
