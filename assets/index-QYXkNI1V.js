import{r as _,j as c,c as V,G as $e,R as O,a as Ve}from"./index-3MObPIs1.js";import{u as L,a as ye,g as me,B as Re,E as Pe,P as $,b as ve,c as We,d as Fe,H as Ae,e as Xt,N as ze,f as qe,C as Ke,o as Ue,i as Xe,l as Ge,h as Ye,j as Ze,t as Qe,F as Je,k as tn,m as en,n as Ot,p as Bt,q as nn,R as an,r as on,s as rn,v as sn}from"./index-CS6M_GL_.js";import{s as tt}from"./shallow-8MTDicKX.js";import{I as it}from"./Input-DCNXsCgf.js";import{B as W}from"./Button-BY81tSlI.js";import{i as be,a as ln,u as xe}from"./store-PvFbztav.js";import{v as Nt,g as Ee}from"./helpers-fab74NUc.js";import{u as un}from"./store-BA2X3m0f.js";import{u as cn}from"./store-CsJsmltL.js";import{u as dn}from"./store-Bm20OEui.js";import{u as qt}from"./store-PwL57-xN.js";import{u as Jt}from"./store-SYwfSGIB.js";import{C as pn}from"./CustomSelect-kF18cAKV.js";const fn="_popup_cjxb8_1",hn="_left_cjxb8_61",gn="_center_cjxb8_67",yn="_right_cjxb8_75",mn="_visible_cjxb8_81",vn="_popup__label_cjxb8_91",pt={popup:fn,"popup-content":"_popup-content_cjxb8_11",left:hn,center:gn,right:yn,visible:mn,popup__label:vn},bn=({text:t,children:e,position:a})=>{const[r,n]=_.useState(!1),o=_.useRef(null);_.useEffect(()=>{const i=l=>{o.current&&l.target instanceof Node&&!o.current.contains(l.target)&&n(!1)};return document.addEventListener("click",i),()=>{document.removeEventListener("click",i)}},[]);const s=i=>{i.stopPropagation(),n(l=>!l)};return c.jsxs("div",{className:pt.popup,ref:o,children:[c.jsx(W,{text:t,type:"button",onClick:s}),c.jsxs("div",{className:V(pt["popup-content"],pt[a],{[pt.visible]:r}),children:[c.jsx("div",{className:pt.popup__label,children:t}),c.jsx("div",{children:e})]})]})};function xn(t){return $e({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 294.1L383 167c9.4-9.4 24.6-9.4 33.9 0s9.3 24.6 0 34L273 345c-9.1 9.1-23.7 9.3-33.1.7L95 201.1c-4.7-4.7-7-10.9-7-17s2.3-12.3 7-17c9.4-9.4 24.6-9.4 33.9 0l127.1 127z"},child:[]}]})(t)}const En="_container_1y4rw_1",_n="_header_1y4rw_19",kn="_title_1y4rw_51",Cn="_arrow_1y4rw_63",wn="_rotated_1y4rw_73",In="_content_1y4rw_81",Tn="_innerContent_1y4rw_91",K={container:En,header:_n,title:kn,arrow:Cn,rotated:wn,content:In,innerContent:Tn},U=({name:t,children:e,defaultOpen:a=!1})=>{const[r,n]=_.useState(a),[o,s]=_.useState(0),i=_.useRef(null);_.useEffect(()=>{i.current&&s(i.current.scrollHeight)},[e]);const l=()=>{n(u=>!u)};return c.jsxs("div",{className:K.container,children:[c.jsxs("button",{className:K.header,onClick:l,"aria-expanded":r,children:[c.jsx("span",{className:K.title,children:t}),c.jsx(xn,{className:V(K.arrow,{[K.rotated]:r})})]}),c.jsx("div",{ref:i,className:K.content,style:{height:r?`${o}px`:"0px"},"aria-hidden":!r,children:c.jsx("div",{className:K.innerContent,children:e})})]})},Nn={"graph-editor":"_graph-editor_3h800_1"},Sn=t=>({nodes:t.nodes,edges:t.edges,onNodesChange:t.onNodesChange,onEdgesChange:t.onEdgesChange,addEdge:t.addEdge}),jn={discreteInput:{outputHandles:{out:{dataType:"bool"}},inputHandles:{},type:"discreteInput",name:""},discreteOutput:{inputHandles:{input:{dataType:"bool"}},outputHandles:{},type:"discreteOutput",name:""},analogInput:{outputHandles:{out:{dataType:"analog"}},inputHandles:{},type:"analogInput"},analogInputInt:{outputHandles:{out:{dataType:"int"}},inputHandles:{},type:"analogInputInt"},analogOutput:{inputHandles:{input:{dataType:"float"}},outputHandles:{},type:"analogOutput",name:""},xor:{inputHandles:{"input-1":{dataType:"bool"},"input-2":{dataType:"bool"}},outputHandles:{out:{dataType:"bool"}},type:"xor"},and:{inputHandles:{"input-1":{dataType:"bool"},"input-2":{dataType:"bool"}},outputHandles:{out:{dataType:"bool"}},type:"and"},or:{inputHandles:{"input-1":{dataType:"bool"},"input-2":{dataType:"bool"},"input-3":{dataType:"bool"}},outputHandles:{out:{dataType:"bool"}},type:"or"},nand:{inputHandles:{"input-1":{dataType:"bool"},"input-2":{dataType:"bool"},"input-3":{dataType:"bool"}},outputHandles:{out:{dataType:"bool"}},type:"nand"},nor:{inputHandles:{"input-1":{dataType:"bool"},"input-2":{dataType:"bool"},"input-3":{dataType:"bool"}},outputHandles:{out:{dataType:"bool"}},type:"nor"},notOperation:{inputHandles:{"input-1":{dataType:"bool"}},outputHandles:{out:{dataType:"bool"}},type:"notOperation"},sumInt:{inputHandles:{"input-1":{dataType:"int"},"input-2":{dataType:"int"}},outputHandles:{out:{dataType:"int"}},type:"sumInt"},multInt:{inputHandles:{"input-1":{dataType:"int"},"input-2":{dataType:"int"}},outputHandles:{out:{dataType:"int"}},type:"multInt"},divInt:{inputHandles:{"input-1":{dataType:"int"},"input-2":{dataType:"int"}},outputHandles:{out:{dataType:"int"}},type:"divInt"},subInt:{inputHandles:{"input-1":{dataType:"int"},"input-2":{dataType:"int"}},outputHandles:{out:{dataType:"int"}},type:"subInt"},equalsInt:{inputHandles:{"input-1":{dataType:"int"},"input-2":{dataType:"int"}},outputHandles:{out:{dataType:"bool"}},type:"equalsInt"},lessInt:{inputHandles:{"input-1":{dataType:"int"},"input-2":{dataType:"int"}},outputHandles:{out:{dataType:"bool"}},type:"lessInt"},moreInt:{inputHandles:{"input-1":{dataType:"int"},"input-2":{dataType:"int"}},outputHandles:{out:{dataType:"bool"}},type:"moreInt"},timerInt:{inputHandles:{},outputHandles:{out:{dataType:"int"}},setpointDataType:"int",setpointValue:0,type:"timerInt",name:""},risEdgeTimerBool:{inputHandles:{"input-1":{dataType:"bool"}},outputHandles:{out:{dataType:"bool"}},type:"risEdgeTimerBool",digit:0,name:""},constInt:{inputHandles:{},outputHandles:{out:{dataType:"int"}},setpointDataType:"int",setpointValue:0,type:"constInt",name:""},constBoolean:{inputHandles:{},outputHandles:{out:{dataType:"bool"}},setpointDataType:"int",setpointValue:0,type:"constBoolean",name:""},fourierInt:{inputHandles:{"input-1":{dataType:"analog"}},outputHandles:{"out-1":{dataType:"int"},"out-2":{dataType:"int"}},type:"fourierInt",setpointDataType:"int",setpointValue:[0,0,0,0]},fifoByte:{type:"fifoByte",lengthMemory:1,inputHandles:{"input-1":{dataType:"bool"},"input-2":{dataType:"bool"}},outputHandles:{"out-1":{dataType:"bool"}}},fifoWord:{type:"fifoWord",lengthMemory:1,inputHandles:{"input-1":{dataType:"int"},"input-2":{dataType:"bool"}},outputHandles:{"out-1":{dataType:"int"}}},fifoByteWithoutEn:{type:"fifoByteWithoutEn",lengthMemory:1,inputHandles:{"input-1":{dataType:"bool"}},outputHandles:{"out-1":{dataType:"bool"}}},fifoWordWithoutEn:{type:"fifoWordWithoutEn",lengthMemory:1,inputHandles:{"input-1":{dataType:"int"}},outputHandles:{"out-1":{dataType:"int"}}},dtrigger:{inputHandles:{},outputHandles:{out:{dataType:"bool"}},type:"dtrigger"}},J={discreteInput:{0:{instruction:[34,12,131,199,5,0,35,0,245,0,130,128],lengthInBytes:12,in_type:33}},discreteOutput:{1:{instruction:[34,12,131,199,5,0,35,0,245,0,130,128],lengthInBytes:12,in_type:30}},analogInput:{0:{instruction:[34,12,131,199,5,0,35,0,245,0,130,128],lengthInBytes:12,in_type:33}},analogInputInt:{0:{instruction:[34,12,131,199,5,0,35,0,245,0,130,128],lengthInBytes:12,in_type:34}},analogOutput:{},dtrigger:{},multInt:{2:{instruction:[34,12,156,65,24,66,179,135,231,2,28,193,130,128],lengthInBytes:14,in_type:8}},divInt:{2:{instruction:[34,12,156,65,24,66,179,135,231,2,28,193,130,128],lengthInBytes:14,in_type:45}},subInt:{2:{instruction:[34,12,156,65,24,66,153,143,28,193,130,128],lengthInBytes:12,in_type:8}},sumInt:{2:{instruction:[34,12,156,65,24,66,186,151,28,193,130,128],lengthInBytes:12,in_type:8},3:{instruction:[130,128,24,66,156,65,186,151,152,66,186,151,28,193,130,128],lengthInBytes:16,in_type:9},4:{instruction:[130,128,156,65,16,66,148,66,24,67,178,151,182,151,186,151,28,193,130,128],lengthInBytes:20,in_type:10},5:{instruction:[130,128,140,65,16,66,148,66,24,67,156,67,178,149,182,149,186,149,190,149,12,193,130,128],lengthInBytes:24,in_type:11},6:{instruction:[130,128,140,65,16,66,148,66,24,67,156,67,178,149,182,149,186,149,190,149,131,39,8,0,190,149,12,193,130,128],lengthInBytes:30,in_type:12},7:{instruction:[130,128,140,65,16,66,148,66,24,67,156,67,178,149,182,149,186,149,190,149,131,39,8,0,190,149,131,167,8,0,190,149,12,193,130,128],lengthInBytes:36,in_type:13}},notOperation:{1:{instruction:[34,12,131,199,5,0,147,199,23,0,35,0,245,0,130,128],lengthInBytes:16,in_type:1}},and:{2:{instruction:[34,12,131,199,5,0,3,71,6,0,249,143,35,0,245,0,130,128],lengthInBytes:18,in_type:2},3:{instruction:[130,128,3,199,6,0,131,71,6,0,249,143,3,199,5,0,249,143,35,0,245,0,130,128],lengthInBytes:24,in_type:3},4:{instruction:[130,128,3,71,7,0,131,199,6,0,249,143,3,71,6,0,249,143,3,199,5,0,249,143,35,0,245,0,130,128],lengthInBytes:30,in_type:4},5:{instruction:[130,128,131,199,7,0,3,71,7,0,125,143,131,199,6,0,125,143,131,71,6,0,125,143,131,199,5,0,125,143,35,0,229,0,130,128],lengthInBytes:36,in_type:5},6:{instruction:[130,128,131,199,7,0,3,72,8,0,3,71,7,0,179,247,7,1,249,143,3,199,6,0,249,143,3,71,6,0,249,143,3,199,5,0,249,143,35,0,245,0,130,128],lengthInBytes:44,in_type:6},7:{instruction:[130,128,3,72,8,0,131,200,8,0,131,199,7,0,51,120,24,1,51,120,248,0,131,71,7,0,51,120,248,0,131,199,6,0,51,120,248,0,131,71,6,0,51,120,248,0,131,199,5,0,51,120,248,0,35,0,5,1,130,128],lengthInBytes:60,in_type:7}},nand:{2:{instruction:[34,12,131,199,5,0,3,71,6,0,249,143,147,199,23,0,35,0,245,0,130,128],lengthInBytes:22,in_type:2},3:{instruction:[130,128,3,199,6,0,131,71,6,0,249,143,3,199,5,0,249,143,147,199,23,0,35,0,245,0,130,128],lengthInBytes:28,in_type:3},4:{instruction:[130,128,3,71,7,0,131,199,6,0,249,143,3,71,6,0,249,143,3,199,5,0,249,143,147,199,23,0,35,0,245,0,130,128],lengthInBytes:34,in_type:4},5:{instruction:[130,128,131,199,7,0,3,71,7,0,125,143,131,199,6,0,125,143,131,71,6,0,125,143,131,199,5,0,125,143,19,71,23,0,35,0,229,0,130,128],lengthInBytes:40,in_type:5},6:{instruction:[130,128,131,199,7,0,3,72,8,0,3,71,7,0,179,247,7,1,249,143,3,199,6,0,249,143,3,71,6,0,249,143,3,199,5,0,249,143,147,199,23,0,35,0,245,0,130,128],lengthInBytes:48,in_type:6},7:{instruction:[130,128,3,72,8,0,131,200,8,0,131,199,7,0,51,120,24,1,51,120,248,0,131,71,7,0,51,120,248,0,131,199,6,0,51,120,248,0,131,71,6,0,51,120,248,0,131,199,5,0,51,120,248,0,19,72,24,0,35,0,5,1,130,128],lengthInBytes:64,in_type:7}},nor:{2:{instruction:[34,12,131,199,5,0,3,71,6,0,249,143,147,199,23,0,35,0,245,0,130,128],lengthInBytes:22,in_type:2},3:{instruction:[130,128,3,199,6,0,131,71,6,0,249,143,3,199,5,0,249,143,147,199,23,0,35,0,245,0,130,128],lengthInBytes:28,in_type:3},4:{instruction:[130,128,3,71,7,0,131,199,6,0,249,143,3,71,6,0,249,143,3,199,5,0,249,143,147,199,23,0,35,0,245,0,130,128],lengthInBytes:34,in_type:4},5:{instruction:[130,128,131,199,7,0,3,71,7,0,125,143,131,199,6,0,125,143,131,71,6,0,125,143,131,199,5,0,125,143,19,71,23,0,35,0,229,0,130,128],lengthInBytes:40,in_type:5},6:{instruction:[130,128,131,199,7,0,3,72,8,0,3,71,7,0,179,247,7,1,249,143,3,199,6,0,249,143,3,71,6,0,249,143,3,199,5,0,249,143,147,199,23,0,35,0,245,0,130,128],lengthInBytes:48,in_type:6},7:{instruction:[130,128,3,72,8,0,131,200,8,0,131,199,7,0,51,120,24,1,51,120,248,0,131,71,7,0,51,120,248,0,131,199,6,0,51,120,248,0,131,71,6,0,51,120,248,0,131,199,5,0,51,120,248,0,19,72,24,0,35,0,5,1,130,128],lengthInBytes:64,in_type:7}},or:{2:{instruction:[34,12,131,199,5,0,3,71,6,0,217,143,35,0,245,0,130,128],lengthInBytes:18,in_type:2},3:{instruction:[130,128,3,199,6,0,131,71,6,0,217,143,3,199,5,0,217,143,35,0,245,0,130,128],lengthInBytes:24,in_type:3},4:{instruction:[130,128,3,71,7,0,131,199,6,0,217,143,3,71,6,0,217,143,3,199,5,0,217,143,35,0,245,0,130,128],lengthInBytes:30,in_type:4},5:{instruction:[130,128,131,199,7,0,3,71,7,0,93,143,131,199,6,0,93,143,131,71,6,0,93,143,131,199,5,0,93,143,35,0,229,0,130,128],lengthInBytes:36,in_type:5},6:{instruction:[130,128,131,199,7,0,3,72,8,0,3,71,7,0,179,231,7,1,217,143,3,199,6,0,217,143,3,71,6,0,217,143,3,199,5,0,217,143,35,0,245,0,130,128],lengthInBytes:44,in_type:6},7:{instruction:[130,128,3,72,8,0,131,200,8,0,131,199,7,0,51,104,24,1,51,104,248,0,131,71,7,0,51,104,248,0,131,199,6,0,51,104,248,0,131,71,6,0,51,104,248,0,131,199,5,0,51,104,248,0,35,0,5,1,130,128],lengthInBytes:60,in_type:7}},xor:{2:{instruction:[34,12,131,199,5,0,3,71,6,0,185,143,35,0,245,0,130,128],lengthInBytes:18,in_type:2},3:{instruction:[130,128,3,199,6,0,131,71,6,0,185,143,3,199,5,0,185,143,35,0,245,0,130,128],lengthInBytes:24,in_type:3},4:{instruction:[130,128,3,71,7,0,131,199,6,0,185,143,3,71,6,0,185,143,3,199,5,0,185,143,35,0,245,0,130,128],lengthInBytes:30,in_type:4},5:{instruction:[130,128,131,199,7,0,3,71,7,0,61,143,131,199,6,0,61,143,131,71,6,0,61,143,131,199,5,0,61,143,35,0,229,0,130,128],lengthInBytes:36,in_type:5},6:{instruction:[130,128,131,199,7,0,3,72,8,0,3,71,7,0,179,199,7,1,185,143,3,199,6,0,185,143,3,71,6,0,185,143,3,199,5,0,185,143,35,0,245,0,130,128],lengthInBytes:44,in_type:6},7:{instruction:[130,128,3,72,8,0,131,200,8,0,131,199,7,0,51,72,24,1,51,72,248,0,131,71,7,0,51,72,248,0,131,199,6,0,51,72,248,0,131,71,6,0,51,72,248,0,131,199,5,0,51,72,248,0,35,0,5,1,130,128],lengthInBytes:60,in_type:7}},equalsInt:{2:{instruction:[34,12,152,65,28,66,35,0,5,0,99,21,247,0,133,71,35,0,245,0,130,128],lengthInBytes:22,in_type:26}},equalsFloat:{},moreInt:{2:{instruction:[34,12,152,65,28,66,35,0,5,0,99,213,231,0,133,71,35,0,245,0,130,128],lengthInBytes:22,in_type:26}},moreFloat:{},lessInt:{2:{instruction:[34,12,152,65,28,66,35,0,5,0,99,85,247,0,133,71,35,0,245,0,130,128],lengthInBytes:22,in_type:26}},lessFloat:{},constInt:{0:{instruction:[34,12,156,65,28,193,130,128],lengthInBytes:8,in_type:28}},constBoolean:{0:{instruction:[34,12,131,199,5,0,35,0,245,0,130,128],lengthInBytes:8,in_type:29}},timerInt:{0:{instruction:[34,12,28,65,133,7,28,193,152,65,99,84,247,0,35,32,5,0,130,128],lengthInBytes:20,in_type:27}},risEdgeTimerBool:{1:{instruction:[34,12,28,65,133,7,28,193,152,65,99,84,247,0,35,32,5,0,130,128],lengthInBytes:20,in_type:46}},fourierInt:{1:{instruction:[],lengthInBytes:0,in_type:36},2:{instruction:[],lengthInBytes:0,in_type:37},3:{instruction:[],lengthInBytes:0,in_type:38}},fifoByte:{2:{instruction:[3,71,7,0,13,195,152,67,99,100,183,0,35,160,7,0,131,198,6,0,152,67,42,151,35,0,215,0,152,67,5,7,99,122,183,0,152,195,156,67,62,149,131,71,5,0,35,0,246,0,130,128,35,160,7,0,253,183,130,128],lengthInBytes:60,in_type:41}},fifoWord:{2:{instruction:[3,71,7,0,5,195,152,67,99,100,183,0,35,160,7,0,148,66,152,67,51,71,167,32,20,195,152,67,5,7,99,121,183,0,152,195,156,67,51,197,167,32,28,65,28,194,130,128,35,160,7,0,197,191,130,128],lengthInBytes:56,in_type:42}},fifoByteWithoutEn:{1:{instruction:[28,67,99,228,183,0,35,32,7,0,148,66,28,67,179,199,167,32,148,195,20,67,147,135,22,0,179,181,183,0,179,5,176,64,237,143,28,195,179,199,167,32,156,67,28,194,130,128],lengthInBytes:48,in_type:43}},fifoWordWithoutEn:{1:{instruction:[28,67,99,228,183,0,35,32,7,0,131,198,6,0,28,67,170,151,35,128,215,0,28,67,133,7,179,181,183,0,179,5,176,64,237,143,28,195,62,149,131,71,5,0,35,0,246,0,130,128],lengthInBytes:50,in_type:44}}},ut={bool:{clr:"#00ff00",selectedClr:"#08d508"},int:{clr:"#368ff4",selectedClr:"#2b79d2"},float:{clr:"#ffe417",selectedClr:"#ead219"},analog:{clr:"#cd1fe8",selectedClr:"#ab2cbe"}},On={bool:void 0,analog:void 0,int:"circle",float:"arrow-closed"},Lt={"button-edge__label":"_button-edge__label_t1jz9_1","button-txt":"_button-txt_t1jz9_55",delete:"_delete_t1jz9_81"},Dn=({id:t,source:e,sourceHandleId:a,sourceX:r,sourceY:n,targetX:o,targetY:s,selected:i,sourcePosition:l=$.Right,targetPosition:u=$.Left})=>{var f,w,T,B;const{getEdge:d,setEdges:v}=L(),m=ye(j=>j.nodeLookup.get(e),tt),h=d(t);if(!m||!h||!a)return null;const g=a.split(" ")[1],y=m.data.outputHandles[g];if(!y)return null;const{dataType:b}=y,[p,x,E]=me({sourceX:r,sourceY:n,targetX:o,targetY:s,sourcePosition:l,targetPosition:u,borderRadius:8,offset:17}),k=i?(f=ut[b])==null?void 0:f.selectedClr:(w=ut[b])==null?void 0:w.clr,C=On[b],I=()=>{v(j=>j.filter(N=>N.id!==h.id))};return c.jsxs(c.Fragment,{children:[c.jsxs("defs",{children:[c.jsx("marker",{id:"circle",viewBox:"0 0 10 10",refX:9,refY:5,markerWidth:7,markerHeight:7,orient:"auto-start-reverse",children:c.jsx("circle",{cx:"6",cy:"5",r:"3",fill:(T=ut.int)==null?void 0:T.clr})}),c.jsx("marker",{id:"arrow-closed",viewBox:"0 0 10 10",refX:10,refY:5,markerWidth:8,markerHeight:8,orient:"auto-start-reverse",children:c.jsx("path",{d:"M 0 0 L 10 5 L 0 10 Z",fill:(B=ut.float)==null?void 0:B.clr})})]}),c.jsx(Re,{id:t,path:p,style:{stroke:k,strokeWidth:3},markerEnd:C?`url(#${C})`:void 0}),i&&c.jsx(Pe,{children:c.jsx("div",{className:V(Lt["button-edge__label"],"nodrag","nopan"),style:{transform:`translate(-50%, -140%) translate(${x}px,${E}px)`},children:c.jsx("button",{className:V(Lt["button-txt"],Lt.delete),onClick:I,children:"Удалить"})})})]})};function _e(t){var e,a,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(a=_e(t[e]))&&(r&&(r+=" "),r+=a);else for(e in t)t[e]&&(r&&(r+=" "),r+=e);return r}function at(){for(var t,e,a=0,r="";a<arguments.length;)(t=arguments[a++])&&(e=_e(t))&&(r&&(r+=" "),r+=e);return r}let Hn={data:""},Bn=t=>typeof window=="object"?((t?t.querySelector("#_goober"):window._goober)||Object.assign((t||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:t||Hn,Ln=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,Mn=/\/\*[^]*?\*\/|  +/g,te=/\n+/g,Q=(t,e)=>{let a="",r="",n="";for(let o in t){let s=t[o];o[0]=="@"?o[1]=="i"?a=o+" "+s+";":r+=o[1]=="f"?Q(s,o):o+"{"+Q(s,o[1]=="k"?"":e)+"}":typeof s=="object"?r+=Q(s,e?e.replace(/([^,])+/g,i=>o.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,l=>/&/.test(l)?l.replace(/&/g,i):i?i+" "+l:l)):o):s!=null&&(o=/^--/.test(o)?o:o.replace(/[A-Z]/g,"-$&").toLowerCase(),n+=Q.p?Q.p(o,s):o+":"+s+";")}return a+(e&&n?e+"{"+n+"}":n)+r},R={},ke=t=>{if(typeof t=="object"){let e="";for(let a in t)e+=a+ke(t[a]);return e}return t},$n=(t,e,a,r,n)=>{let o=ke(t),s=R[o]||(R[o]=(l=>{let u=0,d=11;for(;u<l.length;)d=101*d+l.charCodeAt(u++)>>>0;return"go"+d})(o));if(!R[s]){let l=o!==t?t:(u=>{let d,v,m=[{}];for(;d=Ln.exec(u.replace(Mn,""));)d[4]?m.shift():d[3]?(v=d[3].replace(te," ").trim(),m.unshift(m[0][v]=m[0][v]||{})):m[0][d[1]]=d[2].replace(te," ").trim();return m[0]})(t);R[s]=Q(n?{["@keyframes "+s]:l}:l,a?"":"."+s)}let i=a&&R.g?R.g:null;return a&&(R.g=R[s]),((l,u,d,v)=>{v?u.data=u.data.replace(v,l):u.data.indexOf(l)===-1&&(u.data=d?l+u.data:u.data+l)})(R[s],e,r,i),s},Vn=(t,e,a)=>t.reduce((r,n,o)=>{let s=e[o];if(s&&s.call){let i=s(a),l=i&&i.props&&i.props.className||/^go/.test(i)&&i;s=l?"."+l:i&&typeof i=="object"?i.props?"":Q(i,""):i===!1?"":i}return r+n+(s??"")},"");function Gt(t){let e=this||{},a=t.call?t(e.p):t;return $n(a.unshift?a.raw?Vn(a,[].slice.call(arguments,1),e.p):a.reduce((r,n)=>Object.assign(r,n&&n.call?n(e.p):n),{}):a,Bn(e.target),e.g,e.o,e.k)}Gt.bind({g:1});Gt.bind({k:1});function Rn(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ce(t,e,a){return e&&Rn(t.prototype,e),t}function S(){return S=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},S.apply(this,arguments)}function we(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function bt(t,e){if(t==null)return{};var a={},r=Object.keys(t),n,o;for(o=0;o<r.length;o++)n=r[o],!(e.indexOf(n)>=0)&&(a[n]=t[n]);return a}function ee(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var ne=function(){return""},Ie=O.createContext({enqueueSnackbar:ne,closeSnackbar:ne}),Z={downXs:"@media (max-width:599.95px)",upSm:"@media (min-width:600px)"},ae=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},Yt=function(e){return""+ae(e.vertical)+ae(e.horizontal)},_t=function(e){return!!e||e===0},kt="unmounted",ot="exited",rt="entering",ft="entered",oe="exiting",Zt=function(t){we(e,t);function e(r){var n;n=t.call(this,r)||this;var o=r.appear,s;return n.appearStatus=null,r.in?o?(s=ot,n.appearStatus=rt):s=ft:r.unmountOnExit||r.mountOnEnter?s=kt:s=ot,n.state={status:s},n.nextCallback=null,n}e.getDerivedStateFromProps=function(n,o){var s=n.in;return s&&o.status===kt?{status:ot}:null};var a=e.prototype;return a.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},a.componentDidUpdate=function(n){var o=null;if(n!==this.props){var s=this.state.status;this.props.in?s!==rt&&s!==ft&&(o=rt):(s===rt||s===ft)&&(o=oe)}this.updateStatus(!1,o)},a.componentWillUnmount=function(){this.cancelNextCallback()},a.getTimeouts=function(){var n=this.props.timeout,o=n,s=n;return n!=null&&typeof n!="number"&&typeof n!="string"&&(s=n.exit,o=n.enter),{exit:s,enter:o}},a.updateStatus=function(n,o){n===void 0&&(n=!1),o!==null?(this.cancelNextCallback(),o===rt?this.performEnter(n):this.performExit()):this.props.unmountOnExit&&this.state.status===ot&&this.setState({status:kt})},a.performEnter=function(n){var o=this,s=this.props.enter,i=n,l=this.getTimeouts();if(!n&&!s){this.safeSetState({status:ft},function(){o.props.onEntered&&o.props.onEntered(o.node,i)});return}this.props.onEnter&&this.props.onEnter(this.node,i),this.safeSetState({status:rt},function(){o.props.onEntering&&o.props.onEntering(o.node,i),o.onTransitionEnd(l.enter,function(){o.safeSetState({status:ft},function(){o.props.onEntered&&o.props.onEntered(o.node,i)})})})},a.performExit=function(){var n=this,o=this.props.exit,s=this.getTimeouts();if(!o){this.safeSetState({status:ot},function(){n.props.onExited&&n.props.onExited(n.node)});return}this.props.onExit&&this.props.onExit(this.node),this.safeSetState({status:oe},function(){n.props.onExiting&&n.props.onExiting(n.node),n.onTransitionEnd(s.exit,function(){n.safeSetState({status:ot},function(){n.props.onExited&&n.props.onExited(n.node)})})})},a.cancelNextCallback=function(){this.nextCallback!==null&&this.nextCallback.cancel&&(this.nextCallback.cancel(),this.nextCallback=null)},a.safeSetState=function(n,o){o=this.setNextCallback(o),this.setState(n,o)},a.setNextCallback=function(n){var o=this,s=!0;return this.nextCallback=function(){s&&(s=!1,o.nextCallback=null,n())},this.nextCallback.cancel=function(){s=!1},this.nextCallback},a.onTransitionEnd=function(n,o){this.setNextCallback(o);var s=n==null&&!this.props.addEndListener;if(!this.node||s){setTimeout(this.nextCallback,0);return}this.props.addEndListener&&this.props.addEndListener(this.node,this.nextCallback),n!=null&&setTimeout(this.nextCallback,n)},a.render=function(){var n=this.state.status;if(n===kt)return null;var o=this.props,s=o.children,i=bt(o,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return s(n,i)},Ce(e,[{key:"node",get:function(){var n,o=(n=this.props.nodeRef)===null||n===void 0?void 0:n.current;if(!o)throw new Error("notistack - Custom snackbar is not refForwarding");return o}}]),e}(O.Component);function st(){}Zt.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:st,onEntering:st,onEntered:st,onExit:st,onExiting:st,onExited:st};function re(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function Kt(t,e){return _.useMemo(function(){return t==null&&e==null?null:function(a){re(t,a),re(e,a)}},[t,e])}function jt(t){var e=t.timeout,a=t.style,r=a===void 0?{}:a,n=t.mode;return{duration:typeof e=="object"?e[n]||0:e,easing:r.transitionTimingFunction,delay:r.transitionDelay}}var Ut={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},Te=function(e){e.scrollTop=e.scrollTop},se=function(e){return Math.round(e)+"ms"};function ct(t,e){t===void 0&&(t=["all"]);var a=e||{},r=a.duration,n=r===void 0?300:r,o=a.easing,s=o===void 0?Ut.easeInOut:o,i=a.delay,l=i===void 0?0:i,u=Array.isArray(t)?t:[t];return u.map(function(d){var v=typeof n=="string"?n:se(n),m=typeof l=="string"?l:se(l);return d+" "+v+" "+s+" "+m}).join(",")}function Pn(t){return t&&t.ownerDocument||document}function Ne(t){var e=Pn(t);return e.defaultView||window}function Wn(t,e){e===void 0&&(e=166);var a;function r(){for(var n=this,o=arguments.length,s=new Array(o),i=0;i<o;i++)s[i]=arguments[i];var l=function(){t.apply(n,s)};clearTimeout(a),a=setTimeout(l,e)}return r.clear=function(){clearTimeout(a)},r}function Fn(t,e){var a=e.getBoundingClientRect(),r=Ne(e),n;if(e.fakeTransform)n=e.fakeTransform;else{var o=r.getComputedStyle(e);n=o.getPropertyValue("-webkit-transform")||o.getPropertyValue("transform")}var s=0,i=0;if(n&&n!=="none"&&typeof n=="string"){var l=n.split("(")[1].split(")")[0].split(",");s=parseInt(l[4],10),i=parseInt(l[5],10)}switch(t){case"left":return"translateX("+(r.innerWidth+s-a.left)+"px)";case"right":return"translateX(-"+(a.left+a.width-s)+"px)";case"up":return"translateY("+(r.innerHeight+i-a.top)+"px)";default:return"translateY(-"+(a.top+a.height-i)+"px)"}}function Ct(t,e){if(e){var a=Fn(t,e);a&&(e.style.webkitTransform=a,e.style.transform=a)}}var Se=_.forwardRef(function(t,e){var a=t.children,r=t.direction,n=r===void 0?"down":r,o=t.in,s=t.style,i=t.timeout,l=i===void 0?0:i,u=t.onEnter,d=t.onEntered,v=t.onExit,m=t.onExited,h=bt(t,["children","direction","in","style","timeout","onEnter","onEntered","onExit","onExited"]),g=_.useRef(null),y=Kt(a.ref,g),b=Kt(y,e),p=function(f,w){Ct(n,f),Te(f),u&&u(f,w)},x=function(f){var w=(s==null?void 0:s.transitionTimingFunction)||Ut.easeOut,T=jt({timeout:l,mode:"enter",style:S({},s,{transitionTimingFunction:w})});f.style.webkitTransition=ct("-webkit-transform",T),f.style.transition=ct("transform",T),f.style.webkitTransform="none",f.style.transform="none"},E=function(f){var w=(s==null?void 0:s.transitionTimingFunction)||Ut.sharp,T=jt({timeout:l,mode:"exit",style:S({},s,{transitionTimingFunction:w})});f.style.webkitTransition=ct("-webkit-transform",T),f.style.transition=ct("transform",T),Ct(n,f),v&&v(f)},k=function(f){f.style.webkitTransition="",f.style.transition="",m&&m(f)},C=_.useCallback(function(){g.current&&Ct(n,g.current)},[n]);return _.useEffect(function(){if(!(o||n==="down"||n==="right")){var I=Wn(function(){g.current&&Ct(n,g.current)}),f=Ne(g.current);return f.addEventListener("resize",I),function(){I.clear(),f.removeEventListener("resize",I)}}},[n,o]),_.useEffect(function(){o||C()},[o,C]),_.createElement(Zt,Object.assign({appear:!0,nodeRef:g,onEnter:p,onEntered:d,onEntering:x,onExit:E,onExited:k,in:o,timeout:l},h),function(I,f){return _.cloneElement(a,S({ref:b,style:S({visibility:I==="exited"&&!o?"hidden":void 0},s,{},a.props.style)},f))})});Se.displayName="Slide";var Dt=function(e){return O.createElement("svg",Object.assign({viewBox:"0 0 24 24",focusable:"false",style:{fontSize:20,marginInlineEnd:8,userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:"currentColor",flexShrink:0}},e))},An=function(){return O.createElement(Dt,null,O.createElement("path",{d:`M12 2C6.5 2 2 6.5 2 12S6.5 22 12 22 22 17.5 22 12 17.5 2 12 2M10 17L5 12L6.41
        10.59L10 14.17L17.59 6.58L19 8L10 17Z`}))},zn=function(){return O.createElement(Dt,null,O.createElement("path",{d:"M13,14H11V10H13M13,18H11V16H13M1,21H23L12,2L1,21Z"}))},qn=function(){return O.createElement(Dt,null,O.createElement("path",{d:`M12,2C17.53,2 22,6.47 22,12C22,17.53 17.53,22 12,22C6.47,22 2,17.53 2,12C2,
        6.47 6.47,2 12,2M15.59,7L12,10.59L8.41,7L7,8.41L10.59,12L7,15.59L8.41,17L12,
        13.41L15.59,17L17,15.59L13.41,12L17,8.41L15.59,7Z`}))},Kn=function(){return O.createElement(Dt,null,O.createElement("path",{d:`M13,9H11V7H13M13,17H11V11H13M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,
        0 22,12A10,10 0 0,0 12,2Z`}))},Un={default:void 0,success:O.createElement(An,null),warning:O.createElement(zn,null),error:O.createElement(qn,null),info:O.createElement(Kn,null)},et={maxSnack:3,persist:!1,hideIconVariant:!1,disableWindowBlurListener:!1,variant:"default",autoHideDuration:5e3,iconVariant:Un,anchorOrigin:{vertical:"bottom",horizontal:"left"},TransitionComponent:Se,transitionDuration:{enter:225,exit:195}},Xn=function(e,a){var r=function(o){return typeof o=="number"||o===null};return r(e)?e:r(a)?a:et.autoHideDuration},Gn=function(e,a){var r=function(o,s){return s.some(function(i){return typeof o===i})};return r(e,["string","number"])?e:r(e,["object"])?S({},et.transitionDuration,{},r(a,["object"])&&a,{},e):r(a,["string","number"])?a:r(a,["object"])?S({},et.transitionDuration,{},a):et.transitionDuration},Yn=function(e,a){return function(r,n){return n===void 0&&(n=!1),n?S({},et[r],{},a[r],{},e[r]):r==="autoHideDuration"?Xn(e.autoHideDuration,a.autoHideDuration):r==="transitionDuration"?Gn(e.transitionDuration,a.transitionDuration):e[r]||a[r]||et[r]}};function xt(t){return Object.entries(t).reduce(function(e,a){var r,n=a[0],o=a[1];return S({},e,(r={},r[n]=Gt(o),r))},{})}var dt={SnackbarContainer:"notistack-SnackbarContainer",Snackbar:"notistack-Snackbar",CollapseWrapper:"notistack-CollapseWrapper",MuiContent:"notistack-MuiContent",MuiContentVariant:function(e){return"notistack-MuiContent-"+e}},ie=xt({root:{height:0},entered:{height:"auto"}}),Mt="0px",$t=175,je=_.forwardRef(function(t,e){var a=t.children,r=t.in,n=t.onExited,o=_.useRef(null),s=_.useRef(null),i=Kt(e,s),l=function(){return o.current?o.current.clientHeight:0},u=function(y){y.style.height=Mt},d=function(y){var b=l(),p=jt({timeout:$t,mode:"enter"}),x=p.duration,E=p.easing;y.style.transitionDuration=typeof x=="string"?x:x+"ms",y.style.height=b+"px",y.style.transitionTimingFunction=E||""},v=function(y){y.style.height="auto"},m=function(y){y.style.height=l()+"px"},h=function(y){Te(y);var b=jt({timeout:$t,mode:"exit"}),p=b.duration,x=b.easing;y.style.transitionDuration=typeof p=="string"?p:p+"ms",y.style.height=Mt,y.style.transitionTimingFunction=x||""};return _.createElement(Zt,{in:r,unmountOnExit:!0,onEnter:u,onEntered:v,onEntering:d,onExit:m,onExited:n,onExiting:h,nodeRef:s,timeout:$t},function(g,y){return _.createElement("div",Object.assign({ref:i,className:at(ie.root,g==="entered"&&ie.entered),style:S({pointerEvents:"all",overflow:"hidden",minHeight:Mt,transition:ct("height")},g==="entered"&&{overflow:"visible"},{},g==="exited"&&!r&&{visibility:"hidden"})},y),_.createElement("div",{ref:o,className:dt.CollapseWrapper,style:{display:"flex",width:"100%"}},a))})});je.displayName="Collapse";var le={right:"left",left:"right",bottom:"up",top:"down"},Zn=function(e){return e.horizontal!=="center"?le[e.horizontal]:le[e.vertical]},Qn=function(e){return"anchorOrigin"+Yt(e)},Jn=function(e){e===void 0&&(e={});var a={containerRoot:!0,containerAnchorOriginTopCenter:!0,containerAnchorOriginBottomCenter:!0,containerAnchorOriginTopRight:!0,containerAnchorOriginBottomRight:!0,containerAnchorOriginTopLeft:!0,containerAnchorOriginBottomLeft:!0};return Object.keys(e).filter(function(r){return!a[r]}).reduce(function(r,n){var o;return S({},r,(o={},o[n]=e[n],o))},{})},ta=function(){};function vt(t,e){return t.reduce(function(a,r){return r==null?a:function(){for(var o=arguments.length,s=new Array(o),i=0;i<o;i++)s[i]=arguments[i];var l=[].concat(s);e&&l.indexOf(e)===-1&&l.push(e),a.apply(this,l),r.apply(this,l)}},ta)}var ea=typeof window<"u"?_.useLayoutEffect:_.useEffect;function ue(t){var e=_.useRef(t);return ea(function(){e.current=t}),_.useCallback(function(){return e.current.apply(void 0,arguments)},[])}var Oe=_.forwardRef(function(t,e){var a=t.children,r=t.className,n=t.autoHideDuration,o=t.disableWindowBlurListener,s=o===void 0?!1:o,i=t.onClose,l=t.id,u=t.open,d=t.SnackbarProps,v=d===void 0?{}:d,m=_.useRef(),h=ue(function(){i&&i.apply(void 0,arguments)}),g=ue(function(E){!i||E==null||(m.current&&clearTimeout(m.current),m.current=setTimeout(function(){h(null,"timeout",l)},E))});_.useEffect(function(){return u&&g(n),function(){m.current&&clearTimeout(m.current)}},[u,n,g]);var y=function(){m.current&&clearTimeout(m.current)},b=_.useCallback(function(){n!=null&&g(n*.5)},[n,g]),p=function(k){v.onMouseEnter&&v.onMouseEnter(k),y()},x=function(k){v.onMouseLeave&&v.onMouseLeave(k),b()};return _.useEffect(function(){if(!s&&u)return window.addEventListener("focus",b),window.addEventListener("blur",y),function(){window.removeEventListener("focus",b),window.removeEventListener("blur",y)}},[s,b,u]),_.createElement("div",Object.assign({ref:e},v,{className:at(dt.Snackbar,r),onMouseEnter:p,onMouseLeave:x}),a)});Oe.displayName="Snackbar";var Vt,na=xt({root:(Vt={display:"flex",flexWrap:"wrap",flexGrow:1},Vt[Z.upSm]={flexGrow:"initial",minWidth:"288px"},Vt)}),De=_.forwardRef(function(t,e){var a=t.className,r=bt(t,["className"]);return O.createElement("div",Object.assign({ref:e,className:at(na.root,a)},r))});De.displayName="SnackbarContent";var ht=xt({root:{backgroundColor:"#313131",fontSize:"0.875rem",lineHeight:1.43,letterSpacing:"0.01071em",color:"#fff",alignItems:"center",padding:"6px 16px",borderRadius:"4px",boxShadow:"0px 3px 5px -1px rgba(0,0,0,0.2),0px 6px 10px 0px rgba(0,0,0,0.14),0px 1px 18px 0px rgba(0,0,0,0.12)"},lessPadding:{paddingLeft:8*2.5+"px"},default:{backgroundColor:"#313131"},success:{backgroundColor:"#43a047"},error:{backgroundColor:"#d32f2f"},warning:{backgroundColor:"#ff9800"},info:{backgroundColor:"#2196f3"},message:{display:"flex",alignItems:"center",padding:"8px 0"},action:{display:"flex",alignItems:"center",marginLeft:"auto",paddingLeft:"16px",marginRight:"-8px"}}),ce="notistack-snackbar",He=_.forwardRef(function(t,e){var a=t.id,r=t.message,n=t.action,o=t.iconVariant,s=t.variant,i=t.hideIconVariant,l=t.style,u=t.className,d=o[s],v=n;return typeof v=="function"&&(v=v(a)),O.createElement(De,{ref:e,role:"alert","aria-describedby":ce,style:l,className:at(dt.MuiContent,dt.MuiContentVariant(s),ht.root,ht[s],u,!i&&d&&ht.lessPadding)},O.createElement("div",{id:ce,className:ht.message},i?null:d,r),v&&O.createElement("div",{className:ht.action},v))});He.displayName="MaterialDesignContent";var aa=_.memo(He),oa=xt({wrappedRoot:{width:"100%",position:"relative",transform:"translateX(0)",top:0,right:0,bottom:0,left:0,minWidth:"288px"}}),ra=function(e){var a=_.useRef(),r=_.useState(!0),n=r[0],o=r[1],s=vt([e.snack.onClose,e.onClose]),i=function(){e.snack.requestClose&&s(null,"instructed",e.snack.id)},l=_.useCallback(function(){a.current=setTimeout(function(){o(function(T){return!T})},125)},[]);_.useEffect(function(){return function(){a.current&&clearTimeout(a.current)}},[]);var u=e.snack,d=e.classes,v=e.Component,m=v===void 0?aa:v,h=_.useMemo(function(){return Jn(d)},[d]),g=u.open,y=u.SnackbarProps,b=u.TransitionComponent,p=u.TransitionProps,x=u.transitionDuration,E=u.disableWindowBlurListener,k=u.content,C=bt(u,["open","SnackbarProps","TransitionComponent","TransitionProps","transitionDuration","disableWindowBlurListener","content","entered","requestClose","onEnter","onEntered","onExit","onExited"]),I=S({direction:Zn(C.anchorOrigin),timeout:x},p),f=k;typeof f=="function"&&(f=f(C.id,C.message));var w=["onEnter","onEntered","onExit","onExited"].reduce(function(T,B){var j;return S({},T,(j={},j[B]=vt([e.snack[B],e[B]],C.id),j))},{});return O.createElement(je,{in:n,onExited:w.onExited},O.createElement(Oe,{open:g,id:C.id,disableWindowBlurListener:E,autoHideDuration:C.autoHideDuration,className:at(oa.wrappedRoot,h.root,h[Qn(C.anchorOrigin)]),SnackbarProps:y,onClose:s},O.createElement(b,Object.assign({},I,{appear:!0,in:g,onExit:w.onExit,onExited:l,onEnter:w.onEnter,onEntered:vt([w.onEntered,i],C.id)}),f||O.createElement(m,Object.assign({},C)))))},gt,Rt,wt,It,Pt,P={view:{default:20},snackbar:{default:6,dense:2}},de="."+dt.CollapseWrapper,Wt=16,Tt=xt({root:(gt={boxSizing:"border-box",display:"flex",maxHeight:"100%",position:"fixed",zIndex:1400,height:"auto",width:"auto",transition:ct(["top","right","bottom","left","max-width"],{duration:300,easing:"ease"}),pointerEvents:"none"},gt[de]={padding:P.snackbar.default+"px 0px",transition:"padding 300ms ease 0ms"},gt.maxWidth="calc(100% - "+P.view.default*2+"px)",gt[Z.downXs]={width:"100%",maxWidth:"calc(100% - "+Wt*2+"px)"},gt),rootDense:(Rt={},Rt[de]={padding:P.snackbar.dense+"px 0px"},Rt),top:{top:P.view.default-P.snackbar.default+"px",flexDirection:"column"},bottom:{bottom:P.view.default-P.snackbar.default+"px",flexDirection:"column-reverse"},left:(wt={left:P.view.default+"px"},wt[Z.upSm]={alignItems:"flex-start"},wt[Z.downXs]={left:Wt+"px"},wt),right:(It={right:P.view.default+"px"},It[Z.upSm]={alignItems:"flex-end"},It[Z.downXs]={right:Wt+"px"},It),center:(Pt={left:"50%",transform:"translateX(-50%)"},Pt[Z.upSm]={alignItems:"center"},Pt)}),sa=function(e){var a=e.classes,r=a===void 0?{}:a,n=e.anchorOrigin,o=e.dense,s=e.children,i=at(dt.SnackbarContainer,Tt[n.vertical],Tt[n.horizontal],Tt.root,r.containerRoot,r["containerAnchorOrigin"+Yt(n)],o&&Tt.rootDense);return O.createElement("div",{className:i},s)},ia=_.memo(sa),pe=function(e){var a=typeof e=="string"||_.isValidElement(e);return!a},nt,la=function(t){we(e,t);function e(r){var n;return n=t.call(this,r)||this,n.enqueueSnackbar=function(o,s){if(s===void 0&&(s={}),o==null)throw new Error("enqueueSnackbar called with invalid argument");var i=pe(o)?o:s,l=pe(o)?o.message:o,u=i.key,d=i.preventDuplicate,v=bt(i,["key","preventDuplicate"]),m=_t(u),h=m?u:new Date().getTime()+Math.random(),g=Yn(v,n.props),y=S({id:h},v,{message:l,open:!0,entered:!1,requestClose:!1,persist:g("persist"),action:g("action"),content:g("content"),variant:g("variant"),anchorOrigin:g("anchorOrigin"),disableWindowBlurListener:g("disableWindowBlurListener"),autoHideDuration:g("autoHideDuration"),hideIconVariant:g("hideIconVariant"),TransitionComponent:g("TransitionComponent"),transitionDuration:g("transitionDuration"),TransitionProps:g("TransitionProps",!0),iconVariant:g("iconVariant",!0),style:g("style",!0),SnackbarProps:g("SnackbarProps",!0),className:at(n.props.className,v.className)});return y.persist&&(y.autoHideDuration=void 0),n.setState(function(b){if(d===void 0&&n.props.preventDuplicate||d){var p=function(C){return m?C.id===h:C.message===l},x=b.queue.findIndex(p)>-1,E=b.snacks.findIndex(p)>-1;if(x||E)return b}return n.handleDisplaySnack(S({},b,{queue:[].concat(b.queue,[y])}))}),h},n.handleDisplaySnack=function(o){var s=o.snacks;return s.length>=n.maxSnack?n.handleDismissOldest(o):n.processQueue(o)},n.processQueue=function(o){var s=o.queue,i=o.snacks;return s.length>0?S({},o,{snacks:[].concat(i,[s[0]]),queue:s.slice(1,s.length)}):o},n.handleDismissOldest=function(o){if(o.snacks.some(function(d){return!d.open||d.requestClose}))return o;var s=!1,i=!1,l=o.snacks.reduce(function(d,v){return d+(v.open&&v.persist?1:0)},0);l===n.maxSnack&&(i=!0);var u=o.snacks.map(function(d){return!s&&(!d.persist||i)?(s=!0,d.entered?(d.onClose&&d.onClose(null,"maxsnack",d.id),n.props.onClose&&n.props.onClose(null,"maxsnack",d.id),S({},d,{open:!1})):S({},d,{requestClose:!0})):S({},d)});return S({},o,{snacks:u})},n.handleEnteredSnack=function(o,s,i){if(!_t(i))throw new Error("handleEnteredSnack Cannot be called with undefined key");n.setState(function(l){var u=l.snacks;return{snacks:u.map(function(d){return d.id===i?S({},d,{entered:!0}):S({},d)})}})},n.handleCloseSnack=function(o,s,i){n.props.onClose&&n.props.onClose(o,s,i);var l=i===void 0;n.setState(function(u){var d=u.snacks,v=u.queue;return{snacks:d.map(function(m){return!l&&m.id!==i?S({},m):m.entered?S({},m,{open:!1}):S({},m,{requestClose:!0})}),queue:v.filter(function(m){return m.id!==i})}})},n.closeSnackbar=function(o){var s=n.state.snacks.find(function(i){return i.id===o});_t(o)&&s&&s.onClose&&s.onClose(null,"instructed",o),n.handleCloseSnack(null,"instructed",o)},n.handleExitedSnack=function(o,s){if(!_t(s))throw new Error("handleExitedSnack Cannot be called with undefined key");n.setState(function(i){var l=n.processQueue(S({},i,{snacks:i.snacks.filter(function(u){return u.id!==s})}));return l.queue.length===0?l:n.handleDismissOldest(l)})},nt=n.enqueueSnackbar,n.closeSnackbar,n.state={snacks:[],queue:[],contextValue:{enqueueSnackbar:n.enqueueSnackbar.bind(ee(n)),closeSnackbar:n.closeSnackbar.bind(ee(n))}},n}var a=e.prototype;return a.render=function(){var n=this,o=this.state.contextValue,s=this.props,i=s.domRoot,l=s.children,u=s.dense,d=u===void 0?!1:u,v=s.Components,m=v===void 0?{}:v,h=s.classes,g=this.state.snacks.reduce(function(b,p){var x,E=Yt(p.anchorOrigin),k=b[E]||[];return S({},b,(x={},x[E]=[].concat(k,[p]),x))},{}),y=Object.keys(g).map(function(b){var p=g[b],x=p[0];return O.createElement(ia,{key:b,dense:d,anchorOrigin:x.anchorOrigin,classes:h},p.map(function(E){return O.createElement(ra,{key:E.id,snack:E,classes:h,Component:m[E.variant],onClose:n.handleCloseSnack,onEnter:n.props.onEnter,onExit:n.props.onExit,onExited:vt([n.handleExitedSnack,n.props.onExited],E.id),onEntered:vt([n.handleEnteredSnack,n.props.onEntered],E.id)})}))});return O.createElement(Ie.Provider,{value:o},l,i?Ve.createPortal(y,i):y)},Ce(e,[{key:"maxSnack",get:function(){return this.props.maxSnack||et.maxSnack}}]),e}(_.Component),ua=function(){return _.useContext(Ie)};function Be(){const t=_.useRef({x:0,y:0}),e=ye(p=>p.domNode),{getNodes:a,setNodes:r,getEdges:n,setEdges:o,screenToFlowPosition:s}=L(),[i,l]=_.useState([]),[u,d]=_.useState([]);_.useEffect(()=>{if(!e)return;const p=k=>k.preventDefault(),x=k=>{t.current={x:k.clientX,y:k.clientY}},E=["cut","copy","paste"];return E.forEach(k=>e.addEventListener(k,p)),e.addEventListener("mousemove",x),()=>{E.forEach(k=>e.removeEventListener(k,p)),e.removeEventListener("mousemove",x)}},[e]);const v=_.useCallback(()=>{const p=a().filter(k=>k.selected),E=ve(p,n()).filter(k=>{const C=!p.some(f=>f.id===k.source),I=!p.some(f=>f.id===k.target);return!C&&!I});return{selectedNodes:p,selectedEdges:E}},[a,n]),m=_.useCallback(()=>{const{selectedNodes:p,selectedEdges:x}=v();l(p),d(x)},[v]),h=_.useCallback(()=>{try{const{selectedNodes:p,selectedEdges:x}=v();l(p),d(x),r(E=>E.filter(k=>!k.selected)),o(E=>E.filter(k=>!x.includes(k)))}catch(p){nt("Ошибка при вырезании",{variant:"error"}),console.error("Paste error:",p)}},[v,r,o]),g=(p,x,E,k)=>{const C=Nt(),I=x.x+(p.position.x-E),f=x.y+(p.position.y-k);return{...p,id:C,position:{x:I,y:f},data:{...p.data}}},y=p=>{try{const x=Nt(),E=p.positionAbsoluteX+20,k=(p.height??140)+10,C=p.positionAbsoluteY+k;let I;I={...p,id:x,position:{x:E,y:C},data:{...p.data}},r(f=>[...f.map(w=>({...w,selected:!1})),I])}catch(x){nt("Ошибка при копировании",{variant:"error"}),console.error("Paste error:",x)}},b=_.useCallback(async(p=s(t.current))=>{if(i.length)try{const x=Math.min(...i.map(f=>f.position.x)),E=Math.min(...i.map(f=>f.position.y)),k=await Promise.all(i.map(f=>g(f,p,x,E))),C=Object.fromEntries(i.map((f,w)=>[f.id,k[w].id])),I=u.map(f=>{var w,T;return{...f,id:Nt(),source:C[f.source],sourceHandle:`${C[f.source]} ${(w=f.sourceHandle)==null?void 0:w.split(" ")[1]}`,target:C[f.target],targetHandle:`${C[f.target]} ${(T=f.targetHandle)==null?void 0:T.split(" ")[1]}`}});r(f=>[...f.map(w=>({...w,selected:!1})),...k]),o(f=>[...f.map(w=>({...w,selected:!1})),...I])}catch(x){nt("Ошибка при копировании",{variant:"error"}),console.error("Paste error:",x)}},[i,u,s,r,o]);return Ft(["Meta+x","Control+x"],h),Ft(["Meta+c","Control+c"],m),Ft(["Meta+v","Control+v"],b),{cut:h,copy:m,paste:b,bufferedNodes:i,bufferedEdges:u,createDublicate:y}}function Ft(t,e){const[a,r]=_.useState(!1),n=We(t);_.useEffect(()=>{n&&!a?(e(),r(!0)):!n&&a&&r(!1)},[n,a,e])}const ca=()=>{const{setNodes:t,setEdges:e}=L();return{handleDelete:(r,n)=>{t(o=>o.filter(s=>s.id!==r)),e(o=>o.filter(s=>s.target!==r&&s.source!==r))}}},da="_row_1sy6z_1",pa="_input_1sy6z_9",fa="_outputs_1sy6z_19",ha="_wraps_1sy6z_29",ga="_text_1sy6z_49",F={row:da,input:pa,outputs:fa,wraps:ha,"handle-wrap":"_handle-wrap_1sy6z_41",text:ga},ya="_handle_1orw5_1",ma="_action_1orw5_131",X={handle:ya,"handle-wrapper":"_handle-wrapper_1orw5_17","handle-container":"_handle-container_1orw5_29","oscillography-view":"_oscillography-view_1orw5_37","tooltip-visible":"_tooltip-visible_1orw5_93","context-menu":"_context-menu_1orw5_101",action:ma},St=({id:t,type:e,position:a,dataType:r,data:n})=>{var I;const[o,s]=_.useState(!1),i=_.useRef(null),{updateNodeData:l}=L(),u=Fe(),[d,v]=_.useMemo(()=>{const[f="",w=""]=String(t).split(" ");return[f,w]},[t]),m=_.useMemo(()=>u.filter(f=>e==="target"?f.targetHandle===`${t}`:f.sourceHandle===`${t}`),[u,t,e]),h=((I=n==null?void 0:n.outputHandles)==null?void 0:I[v])??{},{oscillography:g=!1,name:y=""}=h,b=f=>{l(d,{...n,outputHandles:{...n.outputHandles,[v]:{...h,...f}}})},p=()=>{b({oscillography:!g})},x=f=>{b({name:f.target.value})},E=f=>{f.stopPropagation(),!(!(n!=null&&n.outputHandles)||Object.keys(n.outputHandles).length===0)&&s(w=>!w)};_.useEffect(()=>{if(!o)return;const f=T=>{i.current&&!i.current.contains(T.target)&&s(!1)},w=T=>{T.key==="Escape"&&s(!1)};return document.addEventListener("click",f),document.addEventListener("touchstart",f),document.addEventListener("keydown",w),()=>{document.removeEventListener("click",f),document.removeEventListener("touchstart",f),document.removeEventListener("keydown",w)}},[o]);const k=f=>{f.stopPropagation(),f.key==="Enter"&&(f.target.blur(),s(!1))},C=_.useMemo(()=>{switch(a){case $.Left:return{transform:"translate(-150%, -50%)"};case $.Right:return{transform:"translate(50%, -50%)"};case $.Top:return{transform:"translate(-50%, -150%)"};case $.Bottom:return{transform:"translate(-50%, 50%)"};default:return{transform:"translate(-50%, -150%)"}}},[a]);return c.jsxs("div",{ref:i,onClick:e==="source"?E:void 0,onDoubleClick:f=>f.stopPropagation(),className:V(X["handle-wrapper"],"nodrag","nopan"),children:[e==="source"&&o&&c.jsxs("div",{className:X["context-menu"],role:"menu","aria-label":"Handle context menu",onClick:f=>f.stopPropagation(),children:[c.jsx("label",{children:c.jsx(it,{type:"text",style:{width:"300px"},value:y,onChange:x,placeholder:"Введите название",onKeyDown:k})}),c.jsx("button",{type:"button",className:X.action,onClick:p,children:g?"Выключить осциллографирование":"Осциллографировать"})]}),c.jsxs("div",{className:X["handle-container"],children:[c.jsx(Ae,{type:e,position:a,id:`${t}`,"data-tooltip":e==="source"?"Нажмите чтобы изменить настройки выхода":void 0,style:{backgroundColor:r?ut[r].clr:"gray",transform:a===$.Left?"translate(-100%, -50%)":a===$.Right?"translate(100%, -50%)":a===$.Top?"translate(-50%, -100%)":"translate(-50%, 100%)"},isConnectable:m.length<1,className:V(X.handle,{[X["tooltip-visible"]]:e==="source"})}),g&&c.jsx("div",{className:X["oscillography-view"],style:C})]})]})},fe={"handles-column":"_handles-column_gcrpe_1","handle-wrap":"_handle-wrap_gcrpe_11"},va=({nodeId:t,inputHandles:e,data:a})=>c.jsx("div",{className:fe["handles-column"],children:Object.keys(e).map(r=>c.jsx("div",{className:fe["handle-wrap"],children:c.jsx(St,{id:`${t} ${r}`,type:"target",position:$.Left,dataType:e[r].dataType,data:a})},r))}),ba={analogInput:["updateName","updateSetpointValue","delete","dublicate"],analogInputInt:["updateName","updateSetpointValue","delete","dublicate"],discreteInput:["updateName","delete","dublicate"],discreteOutput:["updateName","delete","dublicate"],constInt:["updateSetpointValue","updateName","delete","dublicate"],fourierInt:["updateName","changeFourierGarmonics","delete","dublicate"],xor:["delete","dublicate"],and:["invert","delete","dublicate"],or:["invert","delete","dublicate"],nand:["invert","delete","dublicate"],nor:["invert","delete","dublicate"],multInt:["delete","dublicate"],divInt:["delete","dublicate"],sumInt:["delete","dublicate"],subInt:["delete","dublicate"],timerInt:["updateSetpointValue","updateName","delete","dublicate"],risEdgeTimerBool:["updateDigit","delete","dublicate"],equalsInt:["delete","dublicate"],lessInt:["delete","dublicate"],moreInt:["delete","dublicate"],fifoByte:["updateLengthMemory","delete","dublicate"],fifoByteWithoutEn:["updateLengthMemory","delete","dublicate"],fifoWord:["updateLengthMemory","delete","dublicate"],fifoWordWithoutEn:["updateLengthMemory","delete","dublicate"]},xa=t=>"setpointDataType"in t,Ea={delete:{key:"deleteNode",label:"delete node",dependencies:["useDeleteNode"],createElement:({node:t,dependencies:e})=>{var s;const{id:a,data:r}=t,n=(s=e.useDeleteNode)==null?void 0:s.call(e);if(!n)return null;const{handleDelete:o}=n;return c.jsx(W,{text:"Удалить",onClick:()=>o(a,r)})}},dublicate:{key:"dublicate",label:"dublicate node",dependencies:["useCopyPaste"],createElement:({node:t,dependencies:e})=>{var n;const a=(n=e.useCopyPaste)==null?void 0:n.call(e);if(!a)return null;const{createDublicate:r}=a;return c.jsx(W,{text:"Дублировать",onClick:()=>r(t)})}},changeFourierGarmonics:{key:"invert",label:"Инвертировать",dependencies:["useUpdateFourierValue"],createElement:({node:t,dependencies:e})=>{const{data:a}=t;if(!("setpointDataType"in a))return;const{outputHandles:r}=a;if(!(e!=null&&e.useUpdateFourierValue))return null;const n=e.useUpdateFourierValue(t.id,t.data);if(!n)return;const{handleFourierGarmonicForOutput:o,inputsValue:s}=n,i=Object.values(r).reduce((l,u,d)=>(d%2===0?l.push([u]):l[l.length-1].push(u),l),[]);return c.jsx("div",{onDoubleClick:l=>{l.stopPropagation()},className:"nodrag nopan nowheel",style:{display:"flex",gap:"10px",width:"max-content"},children:i.map((l,u)=>c.jsx(it,{style:{width:"60px"},type:"number",min:0,value:s[u],onChange:d=>o(u,d.target.value)},u))})}},invert:{key:"invert",label:"Инвертировать",dependencies:["useInverseNode"],createElement:({node:t,dependencies:e})=>{var o;const{id:a,data:r}=t,n=(o=e.useInverseNode)==null?void 0:o.call(e,a,r.type);return c.jsx(W,{onClick:n,text:"Инвертировать",type:"button"})}},updateSetpointValue:{key:"updateSetpointValue",label:"Изменить значение",dependencies:["useUpdateSetpointValue"],createElement:({node:t,dependencies:e})=>{var s;const{data:a}=t;if(!xa(a))return null;const r=(s=e.useUpdateSetpointValue)==null?void 0:s.call(e,t.id,a);if(!r)return null;const{handleChange:n,inputValue:o}=r;return c.jsx("div",{className:"flex flex-col gap-2",children:c.jsx(it,{type:"text",value:o,onChange:n,placeholder:"Введите значение"})})}},updateName:{key:"updateName",label:"Изменить значение",dependencies:["useUpdateNameValue"],createElement:({node:t,dependencies:e})=>{var i;const{id:a,data:r}=t,n=(i=e.useUpdateNameValue)==null?void 0:i.call(e,a,r);if(!n)return null;const{name:o,handleChangeName:s}=n;return c.jsx("div",{className:"flex flex-col gap-2",children:c.jsx(it,{type:"text",value:o,onChange:s,placeholder:"Введите имя"})})}},updateDigit:{key:"updateDigit",label:"Изменить значение",dependencies:["useUpdateDigit"],createElement:({node:t,dependencies:e})=>{var i;const{id:a,data:r}=t,n=(i=e.useUpdateDigit)==null?void 0:i.call(e,a,r);if(!n)return null;const{digit:o,handleChangeDigit:s}=n;return c.jsx("div",{className:"nodrag nopan nowheel",onDoubleClick:l=>{l.stopPropagation()},children:c.jsx(it,{type:"number",min:0,max:6e3,value:o,onChange:s,placeholder:"Введите значение"})})}},updateLengthMemory:{key:"updateLengthMemory",label:"Изменить значение",dependencies:["useChangeLengthMemory"],createElement:({node:t,dependencies:e})=>{var i;const{id:a,data:r}=t,n=(i=e.useChangeLengthMemory)==null?void 0:i.call(e,a,r);if(!n)return null;const{lengthMemory:o,handleChangeLengthMemory:s}=n;return c.jsx("div",{className:"nodrag nopan nowheel",onDoubleClick:l=>{l.stopPropagation()},children:c.jsx(it,{type:"number",min:1,value:o,onChange:s,placeholder:"Введите глубину"})})}}},_a=t=>Object.values({0:"1",1:"2",2:"3",3:"4",4:"5",5:"6",6:"7",7:"8"}).slice(0,t).reduce((a,r)=>(a[r]=void 0,a),{}),ka=t=>{const{updateNodeData:e,getEdges:a,setEdges:r,getNode:n}=L(),o=Xt(),s=[...new Array(10)].reduce((l,u,d)=>(l.push({value:d+1}),l),[]);return{changeHandles:_.useCallback(l=>{e(t,{inputHandlesCount:l}),o(t);const u=a(),d=Object.keys(_a(+l)).map(m=>`${t} ${m}`),v=u.filter(m=>m.target!==t||m.targetHandle&&d.includes(m.targetHandle));r(v)},[t,e,o,a,r,n]),items:s}},Ca={or:"nor",and:"nand",nor:"or",nand:"and"},wa=(t,e)=>{const{updateNodeData:a}=L();return _.useCallback(()=>{a(t,{type:Ca[e]})},[t,e,a])};function Ia(t){const e=new Uint8Array(4);return e[3]=t>>24&255,e[2]=t>>16&255,e[1]=t>>8&255,e[0]=t&255,e}const Ta=(t,e)=>{const{updateNodeData:a}=L();if(!("setpointDataType"in e)||e.type!=="fourierInt")return;const[r,n]=_.useState([...e.setpointValue]);return{inputsValue:r,handleFourierGarmonicForOutput:(s,i)=>{if(be(i)){const l=Number(i);if(!Number.isNaN(l)&&l>=0&&l<=19){const u=[...r];u[s]=l,a(t,{setpointValue:[...u]}),n([...u])}}}}},Na=(t,e)=>{const{updateNodeData:a}=L();if(!("setpointDataType"in e)||Array.isArray(e.setpointValue))return;const{setpointDataType:r}=e,[n,o]=_.useState(String(e.setpointValue)),s=(l,u)=>{if(l===""||l==="-"||l==="."||l==="-.")return l;u&&(l=l.replace(",","."));const d=Number(l);return Number.isNaN(d)?l:String(d)};return{handleChange:l=>{let u=l.target.value;switch(r){case"int":if(be(u)){const m=s(u,!1);o(m);const h=Number(m);Number.isNaN(h)||a(t,{setpointValue:h})}break;case"float":if(ln(u)){const m=s(u,!0);o(m);const h=Number(m);Number.isNaN(h)||a(t,{setpointValue:h})}break;case"bool":const v=l.target.checked?1:0;a(t,{setpointValue:v}),o(String(v));break}},inputValue:n}},Sa=(t,e)=>{const{updateNodeData:a}=L(),r=n=>{const o=n.target.value;a(t,{name:o})};return{name:e.name,handleChangeName:r}},ja=(t,e)=>{if(!("lengthMemory"in e))return null;const{updateNodeData:a}=L(),r=n=>{const o=n.target.value;a(t,{lengthMemory:+o})};return{lengthMemory:e.lengthMemory,handleChangeLengthMemory:r}},Oa=(t,e)=>{const{updateNodeData:a}=L();if(!("digit"in e))return;const r=n=>{const o=Number(n.target.value);o&&a(t,{digit:o})};return{digit:e.digit,handleChangeDigit:r}},Da=t=>{var n;const{type:e}=t.data,a={useChangeHandles:ka,useInverseNode:wa,useUpdateSetpointValue:Na,useUpdateNameValue:Sa,useDeleteNode:ca,useUpdateFourierValue:Ta,useCopyPaste:Be,useChangeLengthMemory:ja,useUpdateDigit:Oa};return{actions:(n=ba[e])==null?void 0:n.map(o=>{const s=Ea[o];if(!s)return null;const i=s.dependencies.reduce((l,u)=>(u in a&&(l[u]=a[u]),l),{});return{key:s.key,label:s.label,element:s.createElement({node:t,dependencies:i})}})}},he={"context-menu-block":"_context-menu-block_64p36_1","menu-item":"_menu-item_64p36_15"},Ha=_.memo(({actions:t,visible:e,setVisible:a})=>{const r=_.useRef(null);return _.useEffect(()=>{const n=o=>{r.current&&!r.current.contains(o.target)&&a(!1)};return document.addEventListener("click",n),()=>document.removeEventListener("click",n)},[]),c.jsx(ze,{isVisible:e,children:c.jsx("div",{ref:r,className:he["context-menu-block"],children:t.map((n,o)=>c.jsx("div",{className:he["menu-item"],children:n.element},o))})})}),D=({node:t,children:e})=>{const[a,r]=_.useState(!1),{actions:n}=Da(t);return c.jsxs("div",{style:{position:"relative"},onDoubleClick:()=>r(o=>!o),children:[e,c.jsx(Ha,{actions:n,visible:a,setVisible:r})]})},Ba="_inc_1tbfq_1",La="_dec_1tbfq_9",Ma="_disabled_1tbfq_47",yt={"inc-dec":"_inc-dec_1tbfq_1",inc:Ba,dec:La,disabled:Ma},A=({node:t,children:e})=>{const{id:a,data:r}=t,{updateNodeData:n,setEdges:o}=L(),s=Xt(),i=r.inputHandles||{},l=Object.keys(i),u=i[l[0]].dataType,d={min:2,max:10},v=()=>{const y=l.length;if(y>=d.max)return;const b=`input-${y+1}`,p={...i,[b]:{dataType:u}};n(a,{inputHandles:p}),s(a)},m=()=>{if(l.length<=d.min)return;const p=Object.keys(i).filter(k=>k.startsWith("input-")).sort((k,C)=>{const I=parseInt(k.replace("input-",""),10);return parseInt(C.replace("input-",""),10)-I})[0],{[p]:x,...E}=i;o(k=>k.filter(C=>C.targetHandle!==`${a} ${p}`)),n(a,{inputHandles:E}),s(a)},h=l.length>=d.max,g=l.length<=d.min;return c.jsxs("div",{className:yt["inc-dec"],children:[c.jsx("button",{className:V(yt.inc,"nodrag",{[yt.disabled]:h}),onClick:v,disabled:h,children:"+"}),e,c.jsx("button",{className:V(yt.dec,"nodrag",{[yt.disabled]:g}),onClick:m,disabled:g,children:"—"})]})},$a="_btn_aosl1_9",Va="_inc_aosl1_1",Ra="_disabled_aosl1_41",Pa="_dec_aosl1_47",z={"inc-dec":"_inc-dec_aosl1_1","btns-row":"_btns-row_aosl1_9",btn:$a,inc:Va,disabled:Ra,dec:Pa},Wa=({node:t,children:e})=>{const{id:a,data:r}=t,{updateNodeData:n,setEdges:o}=L(),s=r.outputHandles||{},i=Object.keys(s),l={min:2,max:6},u=Xt(),d=()=>{const g=i.length,y=l.max-g,b=Math.min(2,y);if(b>0){const p={...s};for(let x=1;x<=b;x++){const E=`out-${g+x}`;p[E]={dataType:"int"}}n(a,{outputHandles:p}),u(a)}},v=()=>{const y=i.length-l.min,b=Math.min(2,y);if(b>0){const p={...s},x=Object.keys(p).filter(E=>E.startsWith("out-")).sort((E,k)=>{const C=parseInt(E.replace("out-",""),10);return parseInt(k.replace("out-",""),10)-C});for(let E=0;E<b;E++){const k=x[E];o(C=>C.filter(I=>I.sourceHandle!==`${a} ${k}`)),delete p[k]}n(a,{outputHandles:p}),u(a)}},m=i.length>=l.max,h=i.length<=l.min;return c.jsxs("div",{className:z["inc-dec"],children:[e,c.jsxs("div",{className:z["btns-row"],children:[c.jsx("button",{className:V(z.btn,z.inc,"nodrag",{[z.disabled]:m}),onClick:d,disabled:m,children:"+"}),c.jsx("button",{className:V(z.btn,z.dec,"nodrag",{[z.disabled]:h}),onClick:v,disabled:h,children:"—"})]})]})},Fa={analogInput:[D],analogInputInt:[D],discreteInput:[D],discreteOutput:[D],fourierInt:[D,Wa],constInt:[D],xor:[D,A],and:[D,A],or:[D,A],nand:[D,A],nor:[D,A],multInt:[D,A],divInt:[D,A],sumInt:[D,A],subInt:[D],timerInt:[D],risEdgeTimerBool:[D],equalsInt:[D],lessInt:[D],moreInt:[D],fifoByte:[D],fifoByteWithoutEn:[D],fifoWord:[D],fifoWordWithoutEn:[D]},Aa=(t,e)=>(Fa[t.data.type]||[]).reduce((r,n,o)=>c.jsx(n,{node:t,children:r},`feature-${o}`),e),za=_.memo(t=>{const{type:e,inputHandles:a,outputHandles:r}=t.data,n=qe[e];if(!n)return null;const{view:o,...s}=n,i=c.jsxs("div",{className:F.row,children:[!!Object.keys(a).length&&c.jsx(va,{nodeId:t.id,inputHandles:a,data:t.data}),c.jsx(o,{...s}),!!Object.keys(r).length&&Object.keys(r).map(d=>c.jsx(St,{id:`${t.id} ${d}`,type:"source",position:$.Right,dataType:r[d].dataType,data:t.data},d))]}),u=e!=="fourierInt"?i:(()=>{const d=Object.keys(a).length,v=Object.keys(a)[0];return c.jsxs("div",{className:F.row,children:[!!d&&c.jsx("div",{className:F.input,children:c.jsx(St,{id:`${t.id} ${v}`,type:"target",position:$.Left,dataType:a[v].dataType,data:t.data},v)}),c.jsx(o,{...s}),!!Object.keys(r).length&&c.jsx("div",{className:F.outputs,children:Array.from({length:Math.ceil(Object.keys(r).length/2)},(m,h)=>Object.keys(r).slice(h*2,h*2+2)).map((m,h)=>c.jsx("div",{className:F.wraps,children:m.map((g,y)=>c.jsxs("div",{className:F["handle-wrap"],children:[y===0?c.jsx("div",{className:F.text,children:"Amp"}):c.jsx("div",{className:F.text,children:"Ph"}),c.jsx(St,{id:`${t.id} ${g}`,type:"source",position:$.Right,dataType:r[g].dataType,data:t.data},`${h}-${y}`)]},g))},h))})]})})();return Aa(t,u)}),qa={account:"paid-pro",hideAttribution:!0};Ke.SmoothStep;const Ka={node:za},Ua={"custom-edge":Dn},Xa=({fromX:t,fromY:e,toX:a,toY:r,fromPosition:n,fromHandle:o,toPosition:s,fromNode:i})=>{var d,v,m,h;const[l]=me({sourceX:t,sourceY:e,targetX:a,targetY:r,offset:15,sourcePosition:n,targetPosition:s});if(!i||!o||!o.id)return null;const u=((v=i.data.outputHandles[(d=o.id)==null?void 0:d.split(" ")[1]])==null?void 0:v.dataType)||((h=i.data.inputHandles[(m=o.id)==null?void 0:m.split(" ")[1]])==null?void 0:h.dataType);return u?c.jsx("g",{children:c.jsx("path",{fill:"none",stroke:ut[u].clr,strokeWidth:3,d:l})}):null},Ga="_panel__item_1tehr_15",Ya="_name_1tehr_41",At={"sidebar-item-drag-image":"_sidebar-item-drag-image_1tehr_1",panel__item:Ga,name:Ya},Za=({viewData:t,type:e})=>{const a=_.useRef(null),{view:r,name:n,...o}=t,s=i=>{var l;(l=i.dataTransfer)==null||l.setData("application/reactflow",e),a.current&&i.dataTransfer.setDragImage(a.current,0,0)};return c.jsxs("div",{className:At.panel__item,draggable:!0,onDragStart:s,children:[c.jsx(r,{...t}),c.jsx("div",{className:At.name,children:n}),c.jsx("div",{className:At["sidebar-item-drag-image"],ref:a,children:c.jsx(r,{...o})})]})},Qa="_elements_15sbx_1",Ja={elements:Qa},G=({views:t})=>c.jsx("div",{className:Ja.elements,children:Object.entries(t).map(e=>c.jsx(Za,{viewData:e[1],type:e[0]},e[0]))}),to=()=>c.jsx("div",{children:c.jsxs(bn,{text:"Библиотека",position:"right",children:[c.jsx(U,{name:"Входы и выходы",children:c.jsx(G,{views:{...Xe,...Ue}})}),c.jsx(U,{name:"Логические элементы",children:c.jsx(G,{views:Ge})}),c.jsx(U,{name:"Алгебраические операции",children:c.jsx(G,{views:Ye})}),c.jsx(U,{name:"Операции сравнения",children:c.jsx(G,{views:Ze})}),c.jsx(U,{name:"Выдержки времени",children:c.jsx(G,{views:Qe})}),c.jsx(U,{name:"Фурье",children:c.jsx(G,{views:Je})}),c.jsx(U,{name:"Fifo",children:c.jsx(G,{views:tn})})]})});function eo(t){return t.map(e=>{const a="digit"in e?[e.inType,e.instructionOffset,...e.resultOffsets,...e.sourcesOffsets,e.digit,e.workingSpace]:"lengthMemory"in e?[e.inType,e.instructionOffset,e.ptrBegin,e.lengthMemory,...e.resultOffsets,...e.sourcesOffsets,e.workingSpace]:"instructionOffset"in e?[e.inType,e.instructionOffset,...e.resultOffsets,...e.sourcesOffsets]:[e.inType,...e.sourcesOffsets,...e.resultOffsets];for(;a.length<10;)a.push(0);return a})}function no({scripts:t,instructions:e,setpoints:a,indications:r,inputMatrixData:n,offsetsOsc:o,sms:s,smsWeb:i,phoneNumber:l}){const u=eo(t),d=Object.values(r).map(({led1:h,led2:g,led3:y,blOn:b,blOff:p,sms:x,smsWeb:E})=>[h,g,y,b,p,x,E]),v=Object.values(n).map(({I:h,U:g,HRM3:y})=>[h,g,y]);let m=[];return Object.entries(o).forEach(h=>{m.push({length:h[1].lengthMemory,offset:Number(h[0])})}),{scripts:u,functions:e,setpoints:a,outputMatrix:d,inputMatrix:v,sms:s,smsWeb:i,phoneNumber:l,offsetsOsc:m}}const ao=(t,e,a)=>{if(!e.length)return{newPrimitiveData:{lengthInBytes:t.lengthInBytes,offset:1},newOffset:1,lastLength:t.lengthInBytes};const r=e.slice(-1)[0]+a,n={lengthInBytes:t.lengthInBytes,offset:r};return{newOffset:r,newPrimitiveData:n,lastLength:t.lengthInBytes}},oo=()=>({lastLength:0,instructions:[],offsets:[],primitivesData:{}}),lt={bool:1,int:4,float:4,analog:160},ro=(t,e,a)=>{var o;const r=t.data.type;if(Ee(J).includes(r)&&!((o=a.primitivesData[r])!=null&&o[e])){const s=J[r];if(s&&s[e]){a.instructions.push(...s[e].instruction);const{newOffset:i,newPrimitiveData:l,lastLength:u}=ao(J[r][e],a.offsets,a.lastLength);a.primitivesData[r]={...a.primitivesData[r],[e]:l},a.offsets.push(i),a.lastLength=u}}},so=(t,e)=>{try{const a=Object.keys(e.data.inputHandles);if(a.length===0)return!0;for(const r of a)if(!t.find(o=>o.targetHandle===`${e.id} ${r}`))throw new Error(`Не найдено исходное смещение для handle ${r} узла ${e.id}`)}catch(a){throw new Error(`Ошибка при создании scriptItem для узла ${e.id}: ${a instanceof Error?a.message:String(a)}`)}},io=(t,e,a,r,n,o,s,i)=>{var l,u,d,v,m,h,g,y,b,p,x,E,k,C;try{const{initOscillographicOffsets:I}=qt.getState(),f=t.data.type,w=Object.keys(t.data.inputHandles).length;let T;f.includes("Output")?T=[s.get(t.id)]:(T=Object.entries(t.data.outputHandles).map(([j])=>o.get(`${t.id} ${j}`)),Object.entries(t.data.outputHandles).forEach(([j,N])=>{const H=o.get(`${t.id} ${j}`);if(H===void 0)throw new Error(`Не найдено смещение в мапе для handle ${j} узла ${t.id}`);N.oscillography&&I(H,N.name??"",lt[N.dataType],N.dataType,N.dataType==="bool"?"line":"block")}));let B=Object.keys(t.data.inputHandles).reduce((j,N)=>{var q;const H=(q=e.find(Et=>`${t.id} ${N}`===Et.targetHandle))==null?void 0:q.sourceHandle;if(!H)throw new Error(`Не найдено исходный handle для handle ${N} узла ${t.id}`);const M=o.get(H);if(M===void 0)throw new Error(`Не найдено исходный узел для handle ${N} узла ${t.id}`);return j.push(M),j},[]);if(t.data.type.includes("analogInput")&&(B=[i.analog.splice(0,lt.analog)[0]]),"setpointDataType"in t.data){const{setpointsValues:j,setSetpoints:N}=xe.getState(),H=[...j],M=n[t.data.setpointDataType].splice(0,t.data.setpointDataType==="bool"?1:4)[0];if(t.data.type==="fourierInt")Array.isArray(t.data.setpointValue)&&(H.splice(M,4,...t.data.setpointValue),N([...H]));else if(!Array.isArray(t.data.setpointValue))if(t.data.setpointDataType==="bool")H[M]=t.data.setpointValue,N([...H]);else{const q=Ia(t.data.setpointValue);H.splice(M,4,...q),N([...H])}}if(f==="fourierInt")return{inType:(u=(l=J[f])==null?void 0:l[w])==null?void 0:u.in_type,sourcesOffsets:B,resultOffsets:T};if("digit"in t.data)return{inType:(v=(d=J[f])==null?void 0:d[w])==null?void 0:v.in_type,instructionOffset:(h=(m=a.primitivesData[f])==null?void 0:m[w])==null?void 0:h.offset,resultOffsets:T,sourcesOffsets:B,digit:t.data.digit,workingSpace:r.int.splice(0,lt.int)[0]};if("lengthMemory"in t.data){const j=Object.values(t.data.outputHandles)[0].dataType,N=t.data.lengthMemory,H=r[j].splice(0,N*lt[j])[0],M=r.int.splice(0,lt.int)[0];return{inType:(y=(g=J[f])==null?void 0:g[w])==null?void 0:y.in_type,instructionOffset:(p=(b=a.primitivesData[f])==null?void 0:b[w])==null?void 0:p.offset,ptrBegin:H,lengthMemory:N,resultOffsets:T,sourcesOffsets:B,workingSpace:M}}return{inType:(E=(x=J[f])==null?void 0:x[w])==null?void 0:E.in_type,instructionOffset:(C=(k=a.primitivesData[f])==null?void 0:k[w])==null?void 0:C.offset,resultOffsets:T,sourcesOffsets:B}}catch(I){throw new Error(`Ошибка при создании scriptItem для узла ${t.id}: ${I instanceof Error?I.message:String(I)}`)}};function Le(t,e,a,r,n,o,s,i,l,u,d){if(e.has(t.id))return;e.add(t.id),t.data.type!=="fourierInt"&&ro(t,Object.keys(t.data.inputHandles).length,r);const v=ve([t],d),{targets:m}=v.reduce((y,b)=>(b.source===t.id&&y.sources.push(b),b.target===t.id&&y.targets.push(b),y),{sources:[],targets:[]});so(m,t);const h=en(t,u,d),g=io(t,m,r,n,s,o,i,l);h.forEach(y=>Le(y,e,a,r,n,o,s,i,l,u,d)),a.push(g)}const lo=(t,e,a)=>{const r=new Map,n=new Map;return t.forEach(o=>{if(o.data.type.toLocaleLowerCase().includes("out")){const i=Object.values(o.data.inputHandles)[0].dataType,l=a[i].shift();n.set(o.id,l)}Object.entries(o.data.outputHandles).forEach(([i,l])=>{const u=Object.values(o.data.outputHandles)[0].dataType,d=e[u].splice(0,lt[u])[0];r.set(`${o.id} ${i}`,d)})}),{handleOffsetsMap:r,outputOffsetsMap:n}},mt=["bool","int","float","analog"],zt=(t,e)=>e===1?t:Math.ceil(t/4)*4,uo=(t,e)=>{const a=[];for(let r=t;r<t+e;r++)a.push(r);return a},co=(t,e,a,r)=>t<=r&&a<=e,po=(t,e)=>t.map(a=>a+e),Y=(t,e,a,r={bool:1,int:4,float:4,analog:160})=>{const n=r[t],o=mt.indexOf(t),s=u=>e[u].length?e[u][e[u].length-1]:null;let i=e[t].length?e[t][e[t].length-1]+1:0;if(e[t].length===0){for(let u=0;u<o;u++){const d=mt[u],v=s(d);v!==null&&(i=Math.max(i,zt(v+1,n)))}i=zt(i,n)}e[t].push(...uo(i,a??n));const l=u=>{const d=mt[u],v=e[d];if(!v.length)return;const m=v[0],h=v[v.length-1];for(let g=u+1;g<mt.length;g++){const y=mt[g],b=e[y];if(!b.length)continue;const p=b[0],x=b[b.length-1];if(co(m,h,p,x)){const E=r[y],C=zt(h+1,E)-p;e[y]=po(b,C),l(g);return}}};l(o)},fo={bool:1,int:4,float:4,analog:160};function ho(t,e=512){const r=new TextEncoder().encode(t),n=[];let o=0;for(;o<r.length;){const s=r.slice(o,o+e),i=new TextDecoder().decode(s);n.push(i),o+=e}return n}const go=()=>{const[t,e]=Ot(h=>[h.nodes,h.edges],tt),[a,r]=dn(h=>[h.sendConfig,h.addLog]),[n,o,s,i]=un(h=>[h.indications,h.smsText,h.smsWebText,h.phoneNumber],tt),[l]=cn(h=>[h.datas,h.characteristicTypeData],tt),u=()=>{const h={bool:[],int:[],float:[],analog:[]},g={bool:[],int:[],float:[],analog:[]},y={bool:[],int:[],float:[],analog:[]},b={bool:[],int:[],float:[],analog:[]};return t.forEach(p=>{Object.values(p.data.outputHandles).forEach(x=>{if(Y(x.dataType,h),p.data.type.toLocaleLowerCase().includes("fifo")&&"lengthMemory"in p.data){const E=p.data.lengthMemory,k=Object.values(p.data.outputHandles)[0].dataType,C=E*fo[k];Y(x.dataType,h,C),Y("int",h)}}),"setpointDataType"in p.data&&Y(p.data.setpointDataType,g,void 0,{bool:1,int:4,float:4,analog:4}),p.data.type==="risEdgeTimerBool"&&Y("int",h),p.data.type.includes("analogInput")&&Y("analog",b,void 0,{bool:1,int:4,float:4,analog:160}),p.data.type.toLocaleLowerCase().includes("output")&&Y(p.data.inputHandles.input.dataType,y)}),{offsets:{bool:[...h.bool],int:[...h.int],float:[...h.float],analog:[...h.analog]},setpointOffsets:{bool:[...g.bool],int:[...g.int],float:[...g.float],analog:[...g.analog]},outputOffsetsStore:{bool:[...y.bool],int:[...y.int],float:[...y.float],analog:[...y.analog]},analogInputsOffsets:{bool:[...b.bool],int:[...b.int],float:[...b.float],analog:[...b.analog]}}},d=(h,g,y,b)=>{const p=[],x=new Set,E=oo(),k=t.filter(f=>{var w;return(w=f.data)==null?void 0:w.type.toLowerCase().includes("output")});if(!k.length)throw new Error("Нет выходных элементов");const{handleOffsetsMap:C,outputOffsetsMap:I}=lo(t,h,y);return qt.getState().clearOscillographicOffsets(),k.forEach(f=>Le(f,x,p,E,h,C,g,I,b,t,e)),{scripts:p,instructions:E.instructions}};return{calculateConfig:async()=>{try{const{setConfig:h}=Jt.getState(),{offsets:g,setpointOffsets:y,outputOffsetsStore:b,analogInputsOffsets:p}=u(),{scripts:x,instructions:E}=d(g,y,b,p),{oscillographicOffsets:k}=qt.getState(),C=no({scripts:x,instructions:E,setpoints:xe.getState().setpointsValues,indications:n,inputMatrixData:l,offsetsOsc:k,sms:o,smsWeb:s,phoneNumber:i});console.log(C),h({...C})}catch(h){throw nt(h instanceof Error?h.message:"Ошибка сохранения",{variant:"error"}),h}},sendResConfig:()=>{const{config:h}=Jt.getState(),g=ho(JSON.stringify(h),512);r("Отправка конфигурации..."),g.forEach((y,b)=>{console.log(y),setTimeout(()=>a(y),b*1e3)}),r("Конфигурация была отправлена!","in")}}},yo=[{type:"analogInput",position:{x:0,y:0}},{type:"analogInput",position:{x:0,y:60}},{type:"analogInput",position:{x:0,y:120}},{type:"discreteOutput",position:{x:1500,y:0}},{type:"discreteOutput",position:{x:1500,y:60}},{type:"discreteOutput",position:{x:1500,y:120}},{type:"discreteOutput",position:{x:1500,y:180}},{type:"discreteOutput",position:{x:1500,y:240}}],mo=[{type:"analogInput",position:{x:0,y:0}},{type:"analogInput",position:{x:0,y:60}},{type:"analogInput",position:{x:0,y:120}},{type:"analogInput",position:{x:0,y:180}},{type:"analogInput",position:{x:0,y:240}},{type:"analogInput",position:{x:0,y:300}},{type:"discreteInput",position:{x:0,y:360}},{type:"discreteInput",position:{x:0,y:420}},{type:"discreteInput",position:{x:0,y:480}},{type:"discreteInput",position:{x:0,y:540}},{type:"discreteInput",position:{x:0,y:600}},{type:"discreteInput",position:{x:0,y:660}},{type:"discreteOutput",position:{x:1500,y:0}},{type:"discreteOutput",position:{x:1500,y:60}},{type:"discreteOutput",position:{x:1500,y:120}},{type:"discreteOutput",position:{x:1500,y:180}},{type:"discreteOutput",position:{x:1500,y:240}}],vo=[{type:"analogInput",position:{x:0,y:0}},{type:"fifoWordWithoutEn",position:{x:530,y:-150}},{type:"fourierInt",position:{x:360,y:-5}},{type:"subInt",position:{x:750,y:-60}},{type:"constInt",position:{x:550,y:250}},{type:"constInt",position:{x:550,y:350}},{type:"moreInt",position:{x:970,y:-100}},{type:"lessInt",position:{x:970,y:100}},{type:"or",position:{x:1180,y:-50}},{type:"discreteOutput",position:{x:1400,y:0}}],ge={ikz:yo,rza:mo,template1:vo},bo=t=>{const e={type:t.type,inputHandles:t.inputHandles,outputHandles:t.outputHandles,...t.name&&{name:t.name}};return"lengthMemory"in t?{...e,lengthMemory:t.lengthMemory}:"digit"in t?{...e,digit:t.digit}:"setpointDataType"in t?{...e,setpointDataType:t.setpointDataType,setpointValue:t.setpointValue}:e},Me=(t,e)=>{const a=jn[t];if(!a)return nt(`Неизвестный тип узла: ${t}`,{variant:"error"}),null;const r=bo(a);return r?{id:Nt(),type:"node",position:e,data:{...r}}:(nt("Не удалось выделить память",{variant:"error"}),null)},xo=()=>{const t=Ot(n=>n.addNode,tt),{screenToFlowPosition:e}=L();return{onDragOver:_.useCallback(n=>{n.preventDefault(),n.dataTransfer.dropEffect="move"},[]),onDrop:n=>{n.preventDefault();const o=n.dataTransfer.getData("application/reactflow"),s=e({x:n.clientX,y:n.clientY}),i=Me(o,s);i&&t(i)}}},Eo=()=>{const[t,e]=Ot(n=>[n.nodes,n.setNodes],tt);return{templatesKeys:Ee(ge),addNodeByTemplate:n=>{const s=ge[n].reduce((i,l)=>{const u=Me(l.type,l.position);return u&&i.push(u),i},[]);e([...t,...s])}}},_o=({})=>{const[t,e]=_.useState(""),{templatesKeys:a,addNodeByTemplate:r}=Eo(),n={ikz:"ИКЗ",rza:"РЗА",template1:"Шаблон икз2"};return c.jsx("div",{children:c.jsx(pn,{value:t,placeholder:"шаблоны",options:a.map(o=>({value:o,label:n[o]})),onChange:o=>{r(o),e(o)}})})},ko=({nodes:t})=>{const{calculateConfig:e,sendResConfig:a}=go(),{cut:r,copy:n,paste:o,bufferedNodes:s}=Be(),i=t.some(({selected:u})=>u),l=s.length>0;return c.jsxs(c.Fragment,{children:[c.jsx(Bt,{position:"top-left",children:c.jsx(_o,{})}),c.jsxs(Bt,{position:"top-center",style:{display:"flex",gap:"10px"},children:[c.jsx(W,{text:"cut",type:"button",onClick:()=>r(),disabled:!i}),c.jsx(W,{text:"copy",type:"button",onClick:()=>n(),disabled:!i}),c.jsx(W,{text:"paste",type:"button",onClick:()=>o(),disabled:!l}),c.jsx(W,{text:"Рассчитать",type:"button",onClick:()=>e()}),c.jsx(W,{text:"Отправить",type:"button",onClick:()=>a()})]}),c.jsx(Bt,{position:"top-right",children:c.jsx(to,{})})]})},Co=()=>{const{nodes:t,edges:e,onNodesChange:a,onEdgesChange:r,addEdge:n}=Ot(Sn,tt),{onDragOver:o,onDrop:s}=xo(),{getNodes:i,getEdges:l}=L(),{enqueueSnackbar:u}=ua();return{nodes:t,edges:e,onNodesChange:a,onEdgesChange:r,addEdge:n,onDragOver:o,onDrop:s,isValidConnection:m=>{var w,T,B,j;const h=i(),g=l(),y=m.source??"",b=m.target??"",p=m.sourceHandle,x=m.targetHandle,E=h.find(N=>N.id===y),k=h.find(N=>N.id===b);if(!E||!k||!p||!x)return!1;const C=((w=E.data.outputHandles[p==null?void 0:p.split(" ")[1]])==null?void 0:w.dataType)||((T=E.data.inputHandles[p==null?void 0:p.split(" ")[1]])==null?void 0:T.dataType),I=((B=k.data.inputHandles[x==null?void 0:x.split(" ")[1]])==null?void 0:B.dataType)||((j=k.data.outputHandles[x==null?void 0:x.split(" ")[1]])==null?void 0:j.dataType);if(C!==I)return!1;const f=(N,H=new Set)=>{if(H.has(N.id))return!1;H.add(N.id);for(const M of nn(N,h,g))if(M.id===y||f(M,H))return!0;return!1};return y===b?!1:!f(k)},onConnectEnd:(m,h)=>{var B,j,N,H,M,q,Et,Qt;const{fromNode:g,fromHandle:y,toNode:b,toHandle:p,isValid:x}=h,E=Ht=>Ht==null?void 0:Ht.data;if(!g||!b||!(y!=null&&y.id)||!(p!=null&&p.id))return;const k=y.id.split(" ")[1],C=p.id.split(" ")[1],I=E(g),f=E(b),w=((j=(B=I.outputHandles)==null?void 0:B[k])==null?void 0:j.dataType)??((H=(N=I.inputHandles)==null?void 0:N[k])==null?void 0:H.dataType),T=((q=(M=f.inputHandles)==null?void 0:M[C])==null?void 0:q.dataType)??((Qt=(Et=f.outputHandles)==null?void 0:Et[C])==null?void 0:Qt.dataType);w!==T&&x===!1&&u("Нерроектное соединение",{variant:"error"})}}},wo=()=>{const{nodes:t,edges:e,onNodesChange:a,onEdgesChange:r,onDragOver:n,onDrop:o,isValidConnection:s,onConnectEnd:i,addEdge:l}=Co();return console.log(t),c.jsx("div",{className:Nn["graph-editor"],children:c.jsxs(on,{deleteKeyCode:null,proOptions:qa,nodeTypes:Ka,edgeTypes:Ua,nodes:t,edges:e,onNodesChange:a,onEdgesChange:r,onConnect:l,onDragOver:n,onDrop:o,connectionLineComponent:Xa,isValidConnection:s,onConnectEnd:i,fitView:!0,children:[c.jsx(ko,{nodes:t}),c.jsx(rn,{}),c.jsx(sn,{})]})})},Io=()=>c.jsx(an,{children:c.jsx(la,{maxSnack:3,children:c.jsx(wo,{})})}),Po=()=>c.jsx(Io,{});export{Po as default};
