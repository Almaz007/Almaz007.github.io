import{a as ye}from"./useBleStore-B8eLlH7u.js";import{c as ke}from"./shallow-DIOMUKyK.js";import{d as Ee}from"./index-UDX9EIKB.js";import{d as Ce}from"./helpers-C0jkC3_s.js";var pe={exports:{}};/* @license
Papa Parse
v5.5.3
https://github.com/mholt/PapaParse
License: MIT
*/var be=pe.exports,ve;function De(){return ve||(ve=1,function(G,ae){((D,a)=>{G.exports=a()})(be,function D(){var a=typeof self<"u"?self:typeof window<"u"?window:a!==void 0?a:{},k,O=!a.document&&!!a.postMessage,I=a.IS_PAPA_WORKER||!1,w={},z=0,o={};function j(e){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(t){var r=X(t);r.chunkSize=parseInt(r.chunkSize),t.step||t.chunk||(r.chunkSize=null),this._handle=new Y(r),(this._handle.streamer=this)._config=r}).call(this,e),this.parseChunk=function(t,r){var i=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<i){let c=this._config.newline;c||(n=this._config.quoteChar||'"',c=this._handle.guessLineEndings(t,n)),t=[...t.split(c).slice(i)].join(c)}this.isFirstChunk&&v(this._config.beforeFirstChunk)&&(n=this._config.beforeFirstChunk(t))!==void 0&&(t=n),this.isFirstChunk=!1,this._halted=!1;var i=this._partialLine+t,n=(this._partialLine="",this._handle.parse(i,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(t=n.meta.cursor,i=(this._finished||(this._partialLine=i.substring(t-this._baseIndex),this._baseIndex=t),n&&n.data&&(this._rowCount+=n.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),I)a.postMessage({results:n,workerId:o.WORKER_ID,finished:i});else if(v(this._config.chunk)&&!r){if(this._config.chunk(n,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=n=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(n.data),this._completeResults.errors=this._completeResults.errors.concat(n.errors),this._completeResults.meta=n.meta),this._completed||!i||!v(this._config.complete)||n&&n.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),i||n&&n.meta.paused||this._nextChunk(),n}this._halted=!0},this._sendError=function(t){v(this._config.error)?this._config.error(t):I&&this._config.error&&a.postMessage({workerId:o.WORKER_ID,error:t,finished:!1})}}function W(e){var t;(e=e||{}).chunkSize||(e.chunkSize=o.RemoteChunkSize),j.call(this,e),this._nextChunk=O?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(r){this._input=r,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(t=new XMLHttpRequest,this._config.withCredentials&&(t.withCredentials=this._config.withCredentials),O||(t.onload=J(this._chunkLoaded,this),t.onerror=J(this._chunkError,this)),t.open(this._config.downloadRequestBody?"POST":"GET",this._input,!O),this._config.downloadRequestHeaders){var r,i=this._config.downloadRequestHeaders;for(r in i)t.setRequestHeader(r,i[r])}var n;this._config.chunkSize&&(n=this._start+this._config.chunkSize-1,t.setRequestHeader("Range","bytes="+this._start+"-"+n));try{t.send(this._config.downloadRequestBody)}catch(c){this._chunkError(c.message)}O&&t.status===0&&this._chunkError()}},this._chunkLoaded=function(){t.readyState===4&&(t.status<200||400<=t.status?this._chunkError():(this._start+=this._config.chunkSize||t.responseText.length,this._finished=!this._config.chunkSize||this._start>=(r=>(r=r.getResponseHeader("Content-Range"))!==null?parseInt(r.substring(r.lastIndexOf("/")+1)):-1)(t),this.parseChunk(t.responseText)))},this._chunkError=function(r){r=t.statusText||r,this._sendError(new Error(r))}}function B(e){(e=e||{}).chunkSize||(e.chunkSize=o.LocalChunkSize),j.call(this,e);var t,r,i=typeof FileReader<"u";this.stream=function(n){this._input=n,r=n.slice||n.webkitSlice||n.mozSlice,i?((t=new FileReader).onload=J(this._chunkLoaded,this),t.onerror=J(this._chunkError,this)):t=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var n=this._input,c=(this._config.chunkSize&&(c=Math.min(this._start+this._config.chunkSize,this._input.size),n=r.call(n,this._start,c)),t.readAsText(n,this._config.encoding));i||this._chunkLoaded({target:{result:c}})},this._chunkLoaded=function(n){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(n.target.result)},this._chunkError=function(){this._sendError(t.error)}}function m(e){var t;j.call(this,e=e||{}),this.stream=function(r){return t=r,this._nextChunk()},this._nextChunk=function(){var r,i;if(!this._finished)return r=this._config.chunkSize,t=r?(i=t.substring(0,r),t.substring(r)):(i=t,""),this._finished=!t,this.parseChunk(i)}}function M(e){j.call(this,e=e||{});var t=[],r=!0,i=!1;this.pause=function(){j.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){j.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(n){this._input=n,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){i&&t.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),t.length?this.parseChunk(t.shift()):r=!0},this._streamData=J(function(n){try{t.push(typeof n=="string"?n:n.toString(this._config.encoding)),r&&(r=!1,this._checkIsFinished(),this.parseChunk(t.shift()))}catch(c){this._streamError(c)}},this),this._streamError=J(function(n){this._streamCleanUp(),this._sendError(n)},this),this._streamEnd=J(function(){this._streamCleanUp(),i=!0,this._streamData("")},this),this._streamCleanUp=J(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function Y(e){var t,r,i,n,c=Math.pow(2,53),L=-c,K=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,$=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,d=this,x=0,h=0,U=!1,l=!1,p=[],s={data:[],errors:[],meta:{}};function T(g){return e.skipEmptyLines==="greedy"?g.join("").trim()==="":g.length===1&&g[0].length===0}function A(){if(s&&i&&(Q("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+o.DefaultDelimiter+"'"),i=!1),e.skipEmptyLines&&(s.data=s.data.filter(function(u){return!T(u)})),P()){let u=function(S,F){v(e.transformHeader)&&(S=e.transformHeader(S,F)),p.push(S)};if(s)if(Array.isArray(s.data[0])){for(var g=0;P()&&g<s.data.length;g++)s.data[g].forEach(u);s.data.splice(0,1)}else s.data.forEach(u)}function y(u,S){for(var F=e.header?{}:[],E=0;E<u.length;E++){var C=E,_=u[E],_=((Z,f)=>(b=>(e.dynamicTypingFunction&&e.dynamicTyping[b]===void 0&&(e.dynamicTyping[b]=e.dynamicTypingFunction(b)),(e.dynamicTyping[b]||e.dynamicTyping)===!0))(Z)?f==="true"||f==="TRUE"||f!=="false"&&f!=="FALSE"&&((b=>{if(K.test(b)&&(b=parseFloat(b),L<b&&b<c))return 1})(f)?parseFloat(f):$.test(f)?new Date(f):f===""?null:f):f)(C=e.header?E>=p.length?"__parsed_extra":p[E]:C,_=e.transform?e.transform(_,C):_);C==="__parsed_extra"?(F[C]=F[C]||[],F[C].push(_)):F[C]=_}return e.header&&(E>p.length?Q("FieldMismatch","TooManyFields","Too many fields: expected "+p.length+" fields but parsed "+E,h+S):E<p.length&&Q("FieldMismatch","TooFewFields","Too few fields: expected "+p.length+" fields but parsed "+E,h+S)),F}var R;s&&(e.header||e.dynamicTyping||e.transform)&&(R=1,!s.data.length||Array.isArray(s.data[0])?(s.data=s.data.map(y),R=s.data.length):s.data=y(s.data,0),e.header&&s.meta&&(s.meta.fields=p),h+=R)}function P(){return e.header&&p.length===0}function Q(g,y,R,u){g={type:g,code:y,message:R},u!==void 0&&(g.row=u),s.errors.push(g)}v(e.step)&&(n=e.step,e.step=function(g){s=g,P()?A():(A(),s.data.length!==0&&(x+=g.data.length,e.preview&&x>e.preview?r.abort():(s.data=s.data[0],n(s,d))))}),this.parse=function(g,y,R){var u=e.quoteChar||'"',u=(e.newline||(e.newline=this.guessLineEndings(g,u)),i=!1,e.delimiter?v(e.delimiter)&&(e.delimiter=e.delimiter(g),s.meta.delimiter=e.delimiter):((u=((S,F,E,C,_)=>{var Z,f,b,se;_=_||[",","	","|",";",o.RECORD_SEP,o.UNIT_SEP];for(var ue=0;ue<_.length;ue++){for(var ee,ce=_[ue],q=0,te=0,N=0,H=(b=void 0,new ne({comments:C,delimiter:ce,newline:F,preview:10}).parse(S)),ie=0;ie<H.data.length;ie++)E&&T(H.data[ie])?N++:(ee=H.data[ie].length,te+=ee,b===void 0?b=ee:0<ee&&(q+=Math.abs(ee-b),b=ee));0<H.data.length&&(te/=H.data.length-N),(f===void 0||q<=f)&&(se===void 0||se<te)&&1.99<te&&(f=q,Z=ce,se=te)}return{successful:!!(e.delimiter=Z),bestDelimiter:Z}})(g,e.newline,e.skipEmptyLines,e.comments,e.delimitersToGuess)).successful?e.delimiter=u.bestDelimiter:(i=!0,e.delimiter=o.DefaultDelimiter),s.meta.delimiter=e.delimiter),X(e));return e.preview&&e.header&&u.preview++,t=g,r=new ne(u),s=r.parse(t,y,R),A(),U?{meta:{paused:!0}}:s||{meta:{paused:!1}}},this.paused=function(){return U},this.pause=function(){U=!0,r.abort(),t=v(e.chunk)?"":t.substring(r.getCharIndex())},this.resume=function(){d.streamer._halted?(U=!1,d.streamer.parseChunk(t,!0)):setTimeout(d.resume,3)},this.aborted=function(){return l},this.abort=function(){l=!0,r.abort(),s.meta.aborted=!0,v(e.complete)&&e.complete(s),t=""},this.guessLineEndings=function(S,u){S=S.substring(0,1048576);var u=new RegExp(V(u)+"([^]*?)"+V(u),"gm"),R=(S=S.replace(u,"")).split("\r"),u=S.split(`
`),S=1<u.length&&u[0].length<R[0].length;if(R.length===1||S)return`
`;for(var F=0,E=0;E<R.length;E++)R[E][0]===`
`&&F++;return F>=R.length/2?`\r
`:"\r"}}function V(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function ne(e){var t=(e=e||{}).delimiter,r=e.newline,i=e.comments,n=e.step,c=e.preview,L=e.fastMode,K=null,$=!1,d=e.quoteChar==null?'"':e.quoteChar,x=d;if(e.escapeChar!==void 0&&(x=e.escapeChar),(typeof t!="string"||-1<o.BAD_DELIMITERS.indexOf(t))&&(t=","),i===t)throw new Error("Comment character same as delimiter");i===!0?i="#":(typeof i!="string"||-1<o.BAD_DELIMITERS.indexOf(i))&&(i=!1),r!==`
`&&r!=="\r"&&r!==`\r
`&&(r=`
`);var h=0,U=!1;this.parse=function(l,p,s){if(typeof l!="string")throw new Error("Input must be a string");var T=l.length,A=t.length,P=r.length,Q=i.length,g=v(n),y=[],R=[],u=[],S=h=0;if(!l)return q();if(L||L!==!1&&l.indexOf(d)===-1){for(var F=l.split(r),E=0;E<F.length;E++){if(u=F[E],h+=u.length,E!==F.length-1)h+=r.length;else if(s)return q();if(!i||u.substring(0,Q)!==i){if(g){if(y=[],se(u.split(t)),te(),U)return q()}else se(u.split(t));if(c&&c<=E)return y=y.slice(0,c),q(!0)}}return q()}for(var C=l.indexOf(t,h),_=l.indexOf(r,h),Z=new RegExp(V(x)+V(d),"g"),f=l.indexOf(d,h);;)if(l[h]===d)for(f=h,h++;;){if((f=l.indexOf(d,f+1))===-1)return s||R.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:y.length,index:h}),ee();if(f===T-1)return ee(l.substring(h,f).replace(Z,d));if(d===x&&l[f+1]===x)f++;else if(d===x||f===0||l[f-1]!==x){C!==-1&&C<f+1&&(C=l.indexOf(t,f+1));var b=ue((_=_!==-1&&_<f+1?l.indexOf(r,f+1):_)===-1?C:Math.min(C,_));if(l.substr(f+1+b,A)===t){u.push(l.substring(h,f).replace(Z,d)),l[h=f+1+b+A]!==d&&(f=l.indexOf(d,h)),C=l.indexOf(t,h),_=l.indexOf(r,h);break}if(b=ue(_),l.substring(f+1+b,f+1+b+P)===r){if(u.push(l.substring(h,f).replace(Z,d)),ce(f+1+b+P),C=l.indexOf(t,h),f=l.indexOf(d,h),g&&(te(),U))return q();if(c&&y.length>=c)return q(!0);break}R.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:y.length,index:h}),f++}}else if(i&&u.length===0&&l.substring(h,h+Q)===i){if(_===-1)return q();h=_+P,_=l.indexOf(r,h),C=l.indexOf(t,h)}else if(C!==-1&&(C<_||_===-1))u.push(l.substring(h,C)),h=C+A,C=l.indexOf(t,h);else{if(_===-1)break;if(u.push(l.substring(h,_)),ce(_+P),g&&(te(),U))return q();if(c&&y.length>=c)return q(!0)}return ee();function se(N){y.push(N),S=h}function ue(N){var H=0;return H=N!==-1&&(N=l.substring(f+1,N))&&N.trim()===""?N.length:H}function ee(N){return s||(N===void 0&&(N=l.substring(h)),u.push(N),h=T,se(u),g&&te()),q()}function ce(N){h=N,se(u),u=[],_=l.indexOf(r,h)}function q(N){if(e.header&&!p&&y.length&&!$){var H=y[0],ie=Object.create(null),ge=new Set(H);let _e=!1;for(let le=0;le<H.length;le++){let re=H[le];if(ie[re=v(e.transformHeader)?e.transformHeader(re,le):re]){let de,me=ie[re];for(;de=re+"_"+me,me++,ge.has(de););ge.add(de),H[le]=de,ie[re]++,_e=!0,(K=K===null?{}:K)[de]=re}else ie[re]=1,H[le]=re;ge.add(re)}_e&&console.warn("Duplicate headers found and renamed."),$=!0}return{data:y,errors:R,meta:{delimiter:t,linebreak:r,aborted:U,truncated:!!N,cursor:S+(p||0),renamedHeaders:K}}}function te(){n(q()),y=[],R=[]}},this.abort=function(){U=!0},this.getCharIndex=function(){return h}}function oe(e){var t=e.data,r=w[t.workerId],i=!1;if(t.error)r.userError(t.error,t.file);else if(t.results&&t.results.data){var n={abort:function(){i=!0,fe(t.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:he,resume:he};if(v(r.userStep)){for(var c=0;c<t.results.data.length&&(r.userStep({data:t.results.data[c],errors:t.results.errors,meta:t.results.meta},n),!i);c++);delete t.results}else v(r.userChunk)&&(r.userChunk(t.results,n,t.file),delete t.results)}t.finished&&!i&&fe(t.workerId,t.results)}function fe(e,t){var r=w[e];v(r.userComplete)&&r.userComplete(t),r.terminate(),delete w[e]}function he(){throw new Error("Not implemented.")}function X(e){if(typeof e!="object"||e===null)return e;var t,r=Array.isArray(e)?[]:{};for(t in e)r[t]=X(e[t]);return r}function J(e,t){return function(){e.apply(t,arguments)}}function v(e){return typeof e=="function"}return o.parse=function(e,t){var r=(t=t||{}).dynamicTyping||!1;if(v(r)&&(t.dynamicTypingFunction=r,r={}),t.dynamicTyping=r,t.transform=!!v(t.transform)&&t.transform,!t.worker||!o.WORKERS_SUPPORTED)return r=null,o.NODE_STREAM_INPUT,typeof e=="string"?(e=(i=>i.charCodeAt(0)!==65279?i:i.slice(1))(e),r=new(t.download?W:m)(t)):e.readable===!0&&v(e.read)&&v(e.on)?r=new M(t):(a.File&&e instanceof File||e instanceof Object)&&(r=new B(t)),r.stream(e);(r=(()=>{var i;return!!o.WORKERS_SUPPORTED&&(i=(()=>{var n=a.URL||a.webkitURL||null,c=D.toString();return o.BLOB_URL||(o.BLOB_URL=n.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",c,")();"],{type:"text/javascript"})))})(),(i=new a.Worker(i)).onmessage=oe,i.id=z++,w[i.id]=i)})()).userStep=t.step,r.userChunk=t.chunk,r.userComplete=t.complete,r.userError=t.error,t.step=v(t.step),t.chunk=v(t.chunk),t.complete=v(t.complete),t.error=v(t.error),delete t.worker,r.postMessage({input:e,config:t,workerId:r.id})},o.unparse=function(e,t){var r=!1,i=!0,n=",",c=`\r
`,L='"',K=L+L,$=!1,d=null,x=!1,h=((()=>{if(typeof t=="object"){if(typeof t.delimiter!="string"||o.BAD_DELIMITERS.filter(function(p){return t.delimiter.indexOf(p)!==-1}).length||(n=t.delimiter),typeof t.quotes!="boolean"&&typeof t.quotes!="function"&&!Array.isArray(t.quotes)||(r=t.quotes),typeof t.skipEmptyLines!="boolean"&&typeof t.skipEmptyLines!="string"||($=t.skipEmptyLines),typeof t.newline=="string"&&(c=t.newline),typeof t.quoteChar=="string"&&(L=t.quoteChar),typeof t.header=="boolean"&&(i=t.header),Array.isArray(t.columns)){if(t.columns.length===0)throw new Error("Option columns is empty");d=t.columns}t.escapeChar!==void 0&&(K=t.escapeChar+L),t.escapeFormulae instanceof RegExp?x=t.escapeFormulae:typeof t.escapeFormulae=="boolean"&&t.escapeFormulae&&(x=/^[=+\-@\t\r].*$/)}})(),new RegExp(V(L),"g"));if(typeof e=="string"&&(e=JSON.parse(e)),Array.isArray(e)){if(!e.length||Array.isArray(e[0]))return U(null,e,$);if(typeof e[0]=="object")return U(d||Object.keys(e[0]),e,$)}else if(typeof e=="object")return typeof e.data=="string"&&(e.data=JSON.parse(e.data)),Array.isArray(e.data)&&(e.fields||(e.fields=e.meta&&e.meta.fields||d),e.fields||(e.fields=Array.isArray(e.data[0])?e.fields:typeof e.data[0]=="object"?Object.keys(e.data[0]):[]),Array.isArray(e.data[0])||typeof e.data[0]=="object"||(e.data=[e.data])),U(e.fields||[],e.data||[],$);throw new Error("Unable to serialize unrecognized input");function U(p,s,T){var A="",P=(typeof p=="string"&&(p=JSON.parse(p)),typeof s=="string"&&(s=JSON.parse(s)),Array.isArray(p)&&0<p.length),Q=!Array.isArray(s[0]);if(P&&i){for(var g=0;g<p.length;g++)0<g&&(A+=n),A+=l(p[g],g);0<s.length&&(A+=c)}for(var y=0;y<s.length;y++){var R=(P?p:s[y]).length,u=!1,S=P?Object.keys(s[y]).length===0:s[y].length===0;if(T&&!P&&(u=T==="greedy"?s[y].join("").trim()==="":s[y].length===1&&s[y][0].length===0),T==="greedy"&&P){for(var F=[],E=0;E<R;E++){var C=Q?p[E]:E;F.push(s[y][C])}u=F.join("").trim()===""}if(!u){for(var _=0;_<R;_++){0<_&&!S&&(A+=n);var Z=P&&Q?p[_]:_;A+=l(s[y][Z],_)}y<s.length-1&&(!T||0<R&&!S)&&(A+=c)}}return A}function l(p,s){var T,A;return p==null?"":p.constructor===Date?JSON.stringify(p).slice(1,25):(A=!1,x&&typeof p=="string"&&x.test(p)&&(p="'"+p,A=!0),T=p.toString().replace(h,K),(A=A||r===!0||typeof r=="function"&&r(p,s)||Array.isArray(r)&&r[s]||((P,Q)=>{for(var g=0;g<Q.length;g++)if(-1<P.indexOf(Q[g]))return!0;return!1})(T,o.BAD_DELIMITERS)||-1<T.indexOf(n)||T.charAt(0)===" "||T.charAt(T.length-1)===" ")?L+T+L:T)}},o.RECORD_SEP="",o.UNIT_SEP="",o.BYTE_ORDER_MARK="\uFEFF",o.BAD_DELIMITERS=["\r",`
`,'"',o.BYTE_ORDER_MARK],o.WORKERS_SUPPORTED=!O&&!!a.Worker,o.NODE_STREAM_INPUT=1,o.LocalChunkSize=10485760,o.RemoteChunkSize=5242880,o.DefaultDelimiter=",",o.Parser=ne,o.ParserHandle=Y,o.NetworkStreamer=W,o.FileStreamer=B,o.StringStreamer=m,o.ReadableStreamStreamer=M,a.jQuery&&((k=a.jQuery).fn.parse=function(e){var t=e.config||{},r=[];return this.each(function(c){if(!(k(this).prop("tagName").toUpperCase()==="INPUT"&&k(this).attr("type").toLowerCase()==="file"&&a.FileReader)||!this.files||this.files.length===0)return!0;for(var L=0;L<this.files.length;L++)r.push({file:this.files[L],inputElem:this,instanceConfig:k.extend({},t)})}),i(),this;function i(){if(r.length===0)v(e.complete)&&e.complete();else{var c,L,K,$,d=r[0];if(v(e.before)){var x=e.before(d.file,d.inputElem);if(typeof x=="object"){if(x.action==="abort")return c="AbortError",L=d.file,K=d.inputElem,$=x.reason,void(v(e.error)&&e.error({name:c},L,K,$));if(x.action==="skip")return void n();typeof x.config=="object"&&(d.instanceConfig=k.extend(d.instanceConfig,x.config))}else if(x==="skip")return void n()}var h=d.instanceConfig.complete;d.instanceConfig.complete=function(U){v(h)&&h(U,d.file,d.inputElem),n()},o.parse(d.file,d.instanceConfig)}}function n(){r.splice(0,1),i()}}),I&&(a.onmessage=function(e){e=e.data,o.WORKER_ID===void 0&&e&&(o.WORKER_ID=e.workerId),typeof e.input=="string"?a.postMessage({workerId:o.WORKER_ID,results:o.parse(e.input,e.config),finished:!0}):(a.File&&e.input instanceof File||e.input instanceof Object)&&(e=o.parse(e.input,e.config))&&a.postMessage({workerId:o.WORKER_ID,results:e,finished:!0})}),(W.prototype=Object.create(j.prototype)).constructor=W,(B.prototype=Object.create(j.prototype)).constructor=B,(m.prototype=Object.create(m.prototype)).constructor=m,(M.prototype=Object.create(j.prototype)).constructor=M,o})}(pe)),pe.exports}var we=De();const xe=Ee(we),Ie=ke((G,ae)=>({cfgData:{fileName:"",countsInfo:{total:0,analogueChannelsCount:0,discreteChannelsCount:0},channelsData:{analogueChannels:[],discreteChannels:[]}},cursorIndex:0,cfgDataLoad:!1,cfgError:"",cfgLoaded:!1,sginalsData:{fileName:"",signals:[]},signalDataLoad:!1,signalDataError:"",signalsLoaded:!1,chartBuffers:{0:[],1:[],2:[],3:[]},tempBuffer:[],chartsData:[],permision:!1,lastChartIndex:0,count:0,updateCursorIndex:D=>{const{cursorIndex:a}=ae();a!==D&&G({cursorIndex:D})},handleChartChanged:D=>{const a=Array.from(new Uint16Array(D.target.value.buffer));console.log("Пришёл пакет:",a);const k=82,O=3,I=["A","B","C"],w=[],z=a[1],o=[],j=[],W=[];for(let m=2;m<k;m+=4){const M=a[m],Y=a[m+1],V=a[m+2],ne=a[m+3];if(M===void 0||Y===void 0||V===void 0||ne===void 0)break;const oe=Y<<16|M;o.push(oe),j.push(V),W.push(ne)}w.push({phase:"A",phaseNumber:z,xData:o,yDataCh1:j,yDataCh2:W});for(let m=1;m<O;m++){const M=m*k,Y=I[m],V=a[M+1],ne=[],oe=[],fe=[];let he=0;for(let X=M+2;X<M+k;X+=4){const J=a[X],v=a[X+1],e=a[X+2],t=a[X+3];if(e===void 0||t===void 0)break;let r;J===0&&v===0&&w[0].xData[he]!==void 0?r=w[0].xData[he]:r=v<<16|J,ne.push(r),oe.push(e),fe.push(t),he++}w.push({phase:Y,phaseNumber:V,xData:ne,yDataCh1:oe,yDataCh2:fe})}const B=[];w.forEach((m,M)=>{B.push({id:M*2+1,name:`Фаза ${m.phase} (№${m.phaseNumber}) / Канал 1`,xyData:{xData:m.xData,yData:m.yDataCh1},visible:!0}),B.push({id:M*2+2,name:`Фаза ${m.phase} (№${m.phaseNumber}) / Канал 2`,xyData:{xData:m.xData,yData:m.yDataCh2},visible:!0})}),G({chartsData:B})},chartNotificationStart:async()=>{const{addLog:D,characteristics:{oscill_service_tx_chararcteristic:a}}=ye.getState(),{handleChartChanged:k}=ae();await a.startNotifications(),a.addEventListener("characteristicvaluechanged",k),D("charts notification started")},chartNotificationStop:async()=>{const{addLog:D,characteristics:{oscill_service_tx_chararcteristic:a}}=ye.getState(),{handleChartChanged:k}=ae();await a.stopNotifications(),a.removeEventListener("characteristicvaluechanged",k),G({chartBuffers:{0:[],1:[],2:[],3:[]},lastChartIndex:0,permision:!1}),D("charts notification stopped")},handleCfgFile:D=>{var I;const a=(I=D.target.files)==null?void 0:I[0];if(!a)return;const k=new FileReader;let O=new TextDecoder("windows-1251");k.readAsArrayBuffer(a),k.onload=function(){var M,Y;const w=O.decode(k.result).split(`\r
`),z=w[1].split(","),o={total:+z[0],analogueChannelsCount:+((M=z[1])==null?void 0:M.slice(0,-1)),discreteChannelsCount:+((Y=z[2])==null?void 0:Y.slice(0,-1))},j=w.slice(2,2+o.total),{analogueChannelsCount:W}=o,B={analogueChannels:j.slice(0,W),discreteChannels:j.slice(W)},m={fileName:a.name,countsInfo:o,channelsData:B};G({cfgData:{...m},cfgLoaded:!0})},k.onerror=function(){var z;const w=((z=k.error)==null?void 0:z.message)??"Неизвестная ошибка чтения файла";G({cfgError:w}),console.error(k.error)}},handleDataFile:D=>{var k;const a=(k=D.target.files)==null?void 0:k[0];a&&xe.parse(a,{header:!1,dynamicTyping:!0,complete:function(O){G({sginalsData:{fileName:a.name,signals:O.data.slice(0,-1)},signalsLoaded:!0})},error:function(O){const I=(O==null?void 0:O.message)??"Неизвестная ошибка чтения файла";G({signalDataError:I,signalsLoaded:!1}),console.error("Error parsing CSV:",I)}})},exportCfgFile:()=>{},exportDataFile:()=>{const{chartsData:D}=ae(),a=D[0].xyData.xData.length,k=D[0].xyData.xData;let O=[];for(let I=0;I<a;I++){let w=[I+1,k[I]];for(let z=0;z<D.length;z++)w.push(D[z].xyData.yData[I]);O.push(w.join(", "))}Ce(O.join(`
`),"data.dat","text/plain")},generateChartsData:()=>{const{cfgData:D,sginalsData:a}=ae(),{analogueChannels:k}=D.channelsData,O=[];[...k].map((I,w)=>{let[z,o]=I.split(",");w=w+2;const j=a.signals.reduce((B,m)=>(B.xData.push(m[1]),B.yData.push(m[w]),B),{xData:[],yData:[]}),W={name:o,id:+z,xyData:j,visible:!0};O.push(W)}),G({chartsData:O})}}));export{Ie as u};
